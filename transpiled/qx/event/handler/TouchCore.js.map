{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-Dialog/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/event/handler/TouchCore.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "Object",
    "implement",
    "core",
    "IDisposable",
    "statics",
    "TAP_MAX_DISTANCE",
    "Environment",
    "get",
    "SWIPE_DIRECTION",
    "x",
    "y",
    "SWIPE_MIN_DISTANCE",
    "SWIPE_MIN_VELOCITY",
    "LONGTAP_TIME",
    "construct",
    "target",
    "emitter",
    "__target",
    "__emitter",
    "_initTouchObserver",
    "__pointers",
    "__touchStartPosition",
    "members",
    "__onTouchEventWrapper",
    "__originalTarget",
    "__startTime",
    "__beginScalingDistance",
    "__beginRotation",
    "__touchEventNames",
    "lang",
    "Function",
    "listener",
    "_onTouchEvent",
    "engineVersion",
    "parseInt",
    "i",
    "length",
    "bom",
    "Event",
    "addNativeListener",
    "_stopTouchObserver",
    "removeNativeListener",
    "domEvent",
    "_commonTouchEventHandler",
    "_getScalingDistance",
    "touch0",
    "touch1",
    "Math",
    "sqrt",
    "pow",
    "pageX",
    "pageY",
    "_getRotationAngle",
    "atan2",
    "PI",
    "_calcTouchesDelta",
    "touches",
    "delta",
    "push",
    "_calcSingleTouchDelta",
    "touch",
    "hasOwnProperty",
    "identifier",
    "touchStartPosition",
    "deltaX",
    "floor",
    "clientX",
    "deltaY",
    "clientY",
    "axis",
    "abs",
    "type",
    "_mapPointerEvent",
    "_detectTouchesByPointer",
    "changedTouches",
    "targetTouches",
    "_getTarget",
    "scale",
    "currentScalingDistance",
    "rotation",
    "currentRotation",
    "_rotation",
    "_fireEvent",
    "pointerId",
    "pointer",
    "toLowerCase",
    "indexOf",
    "getTarget",
    "nodeType",
    "parentNode",
    "targetForIE",
    "__evaluateTarget",
    "hitTargets",
    "document",
    "msElementsFromPoint",
    "currentTarget",
    "pointerEvents",
    "element",
    "Style",
    "emit",
    "dispose",
    "event",
    "handler",
    "TouchCore"
  ],
  "mappings": "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",
  "file": "TouchCore.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2012 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Martin Wittemann (martinwittemann)\n     * Tino Butz (tbtz)\n     * Christian Hagendorn (chris_schmidt)\n     * Daniel Wagner (danielwagner)\n\n************************************************************************ */\n\n/**\n * Listens for native touch events and fires composite events like \"tap\" and\n * \"swipe\"\n *\n * @ignore(qx.event.*)\n */\nqx.Bootstrap.define(\"qx.event.handler.TouchCore\", {\n\n  extend : Object,\n  implement: [ qx.core.IDisposable ],\n\n  statics :\n  {\n    /** @type {Integer} The maximum distance of a tap. Only if the x or y distance of\n     *      the performed tap is less or equal the value of this constant, a tap\n     *      event is fired.\n     */\n    TAP_MAX_DISTANCE : qx.core.Environment.get(\"os.name\") != \"android\" ? 10 : 40,\n\n\n    /** @type {Map} The direction of a swipe relative to the axis */\n    SWIPE_DIRECTION :\n    {\n      x : [\"left\", \"right\"],\n      y : [\"up\", \"down\"]\n    },\n\n\n    /** @type {Integer} The minimum distance of a swipe. Only if the x or y distance\n     *      of the performed swipe is greater as or equal the value of this\n     *      constant, a swipe event is fired.\n     */\n    SWIPE_MIN_DISTANCE : qx.core.Environment.get(\"os.name\") != \"android\" ? 11 : 41,\n\n    /** @type {Integer} The minimum velocity of a swipe. Only if the velocity of the\n     *      performed swipe is greater as or equal the value of this constant, a\n     *      swipe event is fired.\n     */\n    SWIPE_MIN_VELOCITY : 0,\n\n\n    /**\n     * @type {Integer} The time delta in milliseconds to fire a long tap event.\n     */\n    LONGTAP_TIME : 500\n  },\n\n\n  /**\n   * Create a new instance\n   *\n   * @param target {Element} element on which to listen for native touch events\n   * @param emitter {qx.event.Emitter} Event emitter object\n   */\n  construct : function(target, emitter)\n  {\n    this.__target = target;\n    this.__emitter = emitter;\n    this._initTouchObserver();\n    this.__pointers = [];\n\n    this.__touchStartPosition = {};\n  },\n\n\n  members :\n  {\n    __target : null,\n    __emitter : null,\n    __onTouchEventWrapper : null,\n\n    __originalTarget : null,\n\n    __touchStartPosition : null,\n    __startTime : null,\n\n    __beginScalingDistance : null,\n    __beginRotation : null,\n\n    __pointers : null,\n\n    __touchEventNames : null,\n\n\n    /*\n    ---------------------------------------------------------------------------\n      OBSERVER INIT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Initializes the native touch event listeners.\n     */\n    _initTouchObserver : function()\n    {\n      this.__onTouchEventWrapper = qx.lang.Function.listener(this._onTouchEvent, this);\n\n      this.__touchEventNames = [\"touchstart\", \"touchmove\", \"touchend\", \"touchcancel\"];\n\n      if (qx.core.Environment.get(\"event.mspointer\")) {\n        var engineVersion = parseInt(qx.core.Environment.get(\"engine.version\"), 10);\n        if (engineVersion == 10) {\n          // IE 10\n          this.__touchEventNames = [\"MSPointerDown\", \"MSPointerMove\", \"MSPointerUp\", \"MSPointerCancel\"];\n        } else {\n          // IE 11+\n          this.__touchEventNames = [\"pointerdown\", \"pointermove\", \"pointerup\", \"pointercancel\"];\n        }\n      }\n\n      for (var i = 0; i < this.__touchEventNames.length; i++) {\n        qx.bom.Event.addNativeListener(this.__target, this.__touchEventNames[i], this.__onTouchEventWrapper);\n      }\n    },\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      OBSERVER STOP\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Disconnects the native touch event listeners.\n     */\n    _stopTouchObserver : function()\n    {\n      for (var i = 0; i < this.__touchEventNames.length; i++) {\n        qx.bom.Event.removeNativeListener(this.__target, this.__touchEventNames[i], this.__onTouchEventWrapper);\n      }\n    },\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      NATIVE EVENT OBSERVERS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Handler for native touch events.\n     *\n     * @param domEvent {Event} The touch event from the browser.\n     */\n    _onTouchEvent : function(domEvent)\n    {\n      this._commonTouchEventHandler(domEvent);\n    },\n\n\n    /**\n     * Calculates the scaling distance between two touches.\n     * @param touch0 {Event} The touch event from the browser.\n     * @param touch1 {Event} The touch event from the browser.\n     * @return {Number} the calculated distance.\n     */\n    _getScalingDistance : function(touch0, touch1) {\n      return(Math.sqrt( Math.pow(touch0.pageX - touch1.pageX, 2) + Math.pow(touch0.pageY - touch1.pageY, 2) ));\n    },\n\n\n    /**\n     * Calculates the rotation between two touches.\n     * @param touch0 {Event} The touch event from the browser.\n     * @param touch1 {Event} The touch event from the browser.\n     * @return {Number} the calculated rotation.\n     */\n    _getRotationAngle :  function(touch0, touch1) {\n      var x = touch0.pageX - touch1.pageX;\n      var y = touch0.pageY - touch1.pageY;\n      return(Math.atan2(y, x)*180/Math.PI);\n    },\n\n\n    /**\n     * Calculates the delta of the touch position relative to its position when <code>touchstart/code> event occurred.\n     * @param touches {Array} an array with the current active touches, provided by <code>touchmove/code> event.\n     * @return {Array} an array containing objects with the calculated delta as <code>x</code>,\n     * <code>y</code> and the identifier of the corresponding touch.\n     */\n    _calcTouchesDelta : function(touches) {\n      var delta = [];\n      for (var i = 0; i < touches.length; i++) {\n        delta.push(this._calcSingleTouchDelta(touches[i]));\n      }\n      return delta;\n    },\n\n\n    /**\n     * Calculates the delta of one single touch position relative to its position when <code>touchstart/code> event occurred.\n     * @param touch {Event} the current active touch, provided by <code>touchmove/code> event.\n     * @return {Map} a map containing deltaX as <code>x</code>, deltaY as <code>y</code>, the direction of the movement as <code>axis</code> and the touch identifier as <code>identifier</code>.\n     */\n    _calcSingleTouchDelta : function(touch) {\n      if (this.__touchStartPosition.hasOwnProperty(touch.identifier)) {\n        var touchStartPosition = this.__touchStartPosition[touch.identifier];\n        var deltaX = Math.floor(touch.clientX - touchStartPosition[0]);\n        var deltaY = Math.floor(touch.clientY - touchStartPosition[1]);\n        var axis = \"x\";\n        if (Math.abs(deltaX / deltaY) < 1) {\n          axis = \"y\";\n        }\n        return {\n          \"x\": deltaX,\n          \"y\": deltaY,\n          \"axis\": axis,\n          \"identifier\": touch.identifier\n        };\n      } else {\n        return {\n          \"x\": 0,\n          \"y\": 0,\n          \"axis\": null,\n          \"identifier\": touch.identifier\n        };\n      }\n    },\n\n\n    /**\n     * Called by an event handler.\n     *\n     * @param domEvent {Event} DOM event\n     * @param type {String ? null} type of the event\n     */\n    _commonTouchEventHandler : function(domEvent, type)\n    {\n      var type = type || domEvent.type;\n      if (qx.core.Environment.get(\"event.mspointer\")) {\n        type = this._mapPointerEvent(type);\n        var touches = this._detectTouchesByPointer(domEvent, type);\n\n        domEvent.changedTouches = touches;\n        domEvent.targetTouches = touches;\n        domEvent.touches = touches;\n      }\n\n      domEvent.delta = [];\n\n      if (type == \"touchstart\") {\n        this.__originalTarget = this._getTarget(domEvent);\n\n        if(domEvent.touches && domEvent.touches.length > 1) {\n          this.__beginScalingDistance = this._getScalingDistance(domEvent.touches[0],domEvent.touches[1]);\n          this.__beginRotation = this._getRotationAngle(domEvent.touches[0], domEvent.touches[1]);\n        }\n\n        for (var i = 0; i < domEvent.changedTouches.length; i++) {\n          var touch = domEvent.changedTouches[i];\n          this.__touchStartPosition[touch.identifier] = [touch.clientX,touch.clientY];\n        }\n      }\n\n      if(type == \"touchmove\") {\n        // Polyfill for scale\n        if(typeof domEvent.scale == \"undefined\" && domEvent.targetTouches.length > 1) {\n          var currentScalingDistance = this._getScalingDistance(domEvent.targetTouches[0],domEvent.targetTouches[1]);\n          domEvent.scale = currentScalingDistance / this.__beginScalingDistance;\n        }\n        // Polyfill for rotation\n        if((typeof domEvent.rotation == \"undefined\" || qx.core.Environment.get(\"event.mspointer\")) && domEvent.targetTouches.length > 1) {\n          var currentRotation = this._getRotationAngle(domEvent.targetTouches[0], domEvent.targetTouches[1]);\n          domEvent._rotation = currentRotation - this.__beginRotation;\n        }\n\n        domEvent.delta = this._calcTouchesDelta(domEvent.targetTouches);\n      }\n\n      this._fireEvent(domEvent, type, this.__originalTarget);\n\n      if (qx.core.Environment.get(\"event.mspointer\")) {\n        if (type == \"touchend\" || type == \"touchcancel\") {\n          delete this.__pointers[domEvent.pointerId];\n        }\n      }\n\n      if ((type == \"touchend\" || type == \"touchcancel\") && domEvent.changedTouches[0]) {\n        delete this.__touchStartPosition[domEvent.changedTouches[0].identifier];\n      }\n    },\n\n\n    /**\n    * Creates an array with all current used touches out of multiple serial pointer events.\n    * Needed because pointerEvents do not provide a touch list.\n    * @param domEvent {Event} DOM event\n    * @param type {String ? null} type of the event\n    * @return {Array} touch list array.\n    */\n    _detectTouchesByPointer : function(domEvent, type) {\n      var touches = [];\n      if (type == \"touchstart\") {\n        this.__pointers[domEvent.pointerId] = domEvent;\n      } else if (type == \"touchmove\") {\n        this.__pointers[domEvent.pointerId] = domEvent;\n      }\n\n      for (var pointerId in this.__pointers) {\n        var pointer = this.__pointers[pointerId];\n        touches.push(pointer);\n      }\n\n      return touches;\n    },\n\n\n    /**\n    * Maps a pointer event type to the corresponding touch event type.\n    * @param type {String} the event type to parse.\n    * @return {String} the parsed event name.\n    */\n    _mapPointerEvent : function(type)\n    {\n      type = type.toLowerCase();\n\n      if (type.indexOf(\"pointerdown\") !== -1) {\n        return \"touchstart\";\n      } else if (type.indexOf(\"pointerup\") !== -1) {\n        return \"touchend\";\n      } else if (type.indexOf(\"pointermove\") !== -1) {\n          return \"touchmove\";\n      } else if (type.indexOf(\"pointercancel\") !== -1) {\n        return \"touchcancel\";\n      }\n\n      return type;\n    },\n\n\n    /**\n     * Return the target of the event.\n     *\n     * @param domEvent {Event} DOM event\n     * @return {Element} Event target\n     */\n    _getTarget : function(domEvent)\n    {\n      var target = qx.bom.Event.getTarget(domEvent);\n\n      // Text node. Fix Safari Bug, see http://www.quirksmode.org/js/events_properties.html\n      if (qx.core.Environment.get(\"engine.name\") == \"webkit\")\n      {\n        if (target && target.nodeType == 3) {\n          target = target.parentNode;\n        }\n      } else if(qx.core.Environment.get(\"engine.name\") == \"mshtml\" &&\n                qx.core.Environment.get(\"browser.documentmode\") < 11) {\n        // Fix for IE10 and pointer-events:none\n        //\n        // Changed the condition above to match exactly those browsers\n        // for which the fix was intended\n        // See: https://github.com/qooxdoo/qooxdoo/issues/9481\n        //\n        var targetForIE = this.__evaluateTarget(domEvent);\n        if(targetForIE) {\n          target = targetForIE;\n        }\n      }\n\n      return target;\n    },\n\n\n    /**\n     * This method fixes \"pointer-events:none\" for Internet Explorer 10.\n     * Checks which elements are placed to position x/y and traverses the array\n     * till one element has no \"pointer-events:none\" inside its style attribute.\n     * @param domEvent {Event} DOM event\n     * @return {Element | null} Event target\n     */\n    __evaluateTarget : function(domEvent) {\n      var clientX = null;\n      var clientY = null;\n      if(domEvent && domEvent.touches && domEvent.touches.length !== 0){\n        clientX = domEvent.touches[0].clientX;\n        clientY = domEvent.touches[0].clientY;\n      }\n\n      // Retrieve an array with elements on point X/Y.\n      var hitTargets = document.msElementsFromPoint(clientX, clientY);\n      if(hitTargets) {\n        // Traverse this array for the elements which has no pointer-events:none inside.\n        for (var i = 0; i < hitTargets.length; i++) {\n          var currentTarget = hitTargets[i];\n          var pointerEvents = qx.bom.element.Style.get(currentTarget, \"pointer-events\", 3);\n\n          if (pointerEvents != \"none\") {\n            return currentTarget;\n          }\n        }\n      }\n\n      return null;\n    },\n\n\n    /**\n     * Fire a touch event with the given parameters\n     *\n     * @param domEvent {Event} DOM event\n     * @param type {String ? null} type of the event\n     * @param target {Element ? null} event target\n     */\n    _fireEvent : function(domEvent, type, target)\n    {\n      if (!target) {\n        target = this._getTarget(domEvent);\n      }\n\n      var type = type || domEvent.type;\n\n      if (target && target.nodeType && this.__emitter)\n      {\n        this.__emitter.emit(type, domEvent);\n      }\n    },\n\n\n    /**\n     * Dispose this object\n     */\n    dispose : function()\n    {\n      this._stopTouchObserver();\n      this.__originalTarget = this.__target = this.__touchEventNames = this.__pointers = this.__emitter = this.__beginScalingDistance = this.__beginRotation = null;\n    }\n  }\n});\n"
  ]
}