{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-Dialog/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/ui/mobile/core/EventHandler.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "event",
    "IEventHandler",
    "construct",
    "__manager",
    "Registration",
    "getManager",
    "window",
    "statics",
    "PRIORITY",
    "PRIORITY_FIRST",
    "SUPPORTED_TYPES",
    "mousemove",
    "mouseover",
    "mouseout",
    "mousedown",
    "mouseup",
    "click",
    "dblclick",
    "contextmenu",
    "mousewheel",
    "keyup",
    "keydown",
    "keypress",
    "keyinput",
    "capture",
    "losecapture",
    "focusin",
    "focusout",
    "focus",
    "blur",
    "activate",
    "deactivate",
    "appear",
    "disappear",
    "dragstart",
    "dragend",
    "dragover",
    "dragleave",
    "drop",
    "drag",
    "dragchange",
    "droprequest",
    "roll",
    "touchstart",
    "touchend",
    "touchmove",
    "touchcancel",
    "tap",
    "longtap",
    "swipe",
    "dbltap",
    "track",
    "trackend",
    "trackstart",
    "pinch",
    "rotate",
    "pointermove",
    "pointerover",
    "pointerout",
    "pointerdown",
    "pointerup",
    "pointercancel",
    "IGNORE_CAN_HANDLE",
    "__activeTarget",
    "__scrollLeft",
    "__scrollTop",
    "__startY",
    "__timer",
    "__onPointerDown",
    "domEvent",
    "isPrimary",
    "EventHandler",
    "ui",
    "mobile",
    "bom",
    "Viewport",
    "getScrollLeft",
    "getScrollTop",
    "getScreenTop",
    "__cancelActiveStateTimer",
    "target",
    "getTarget",
    "parentNode",
    "nodeType",
    "element",
    "Attribute",
    "get",
    "___timer",
    "setTimeout",
    "add",
    "__onPointerUp",
    "__removeActiveState",
    "__onPointerMove",
    "deltaY",
    "Math",
    "abs",
    "handler",
    "GestureCore",
    "TAP_MAX_DISTANCE",
    "getPointerType",
    "clearTimeout",
    "activeTarget",
    "remove",
    "members",
    "canHandleEvent",
    "type",
    "Widget",
    "registerEvent",
    "getContainerElement",
    "addListener",
    "_dispatchEvent",
    "unregisterEvent",
    "removeListener",
    "domTarget",
    "id",
    "widgetTarget",
    "getWidgetById",
    "getRelatedTarget",
    "domRelatedTarget",
    "widgetRelatedTarget",
    "currentTarget",
    "getCurrentTarget",
    "currentWidget",
    "getEventPhase",
    "Event",
    "CAPTURING_PHASE",
    "getType",
    "listeners",
    "getListeners",
    "length",
    "widgetEvent",
    "Pool",
    "getInstance",
    "getObject",
    "constructor",
    "clone",
    "setTarget",
    "setRelatedTarget",
    "setCurrentTarget",
    "orig",
    "getOriginalTarget",
    "widgetOriginalTarget",
    "setOriginalTarget",
    "i",
    "l",
    "context",
    "call",
    "getPropagationStopped",
    "stopPropagation",
    "getDefaultPrevented",
    "preventDefault",
    "poolObject",
    "destruct",
    "defer",
    "addHandler",
    "document"
  ],
  "mappings": "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",
  "file": "EventHandler.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2011 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tino Butz (tbtz)\n\n************************************************************************ */\n\n/**\n * Connects the widgets to the browser DOM events.\n *\n * @require(qx.event.handler.Touch)\n * @require(qx.event.handler.Pointer)\n * @require(qx.event.dispatch.DomBubbling)\n * @require(qx.ui.mobile.core.Widget)\n */\nqx.Class.define(\"qx.ui.mobile.core.EventHandler\",\n{\n  extend : qx.core.Object,\n  implement : qx.event.IEventHandler,\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  construct : function()\n  {\n    this.base(arguments);\n\n    this.__manager = qx.event.Registration.getManager(window);\n  },\n\n\n\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics :\n  {\n    /** @type {Integer} Priority of this handler */\n    PRIORITY : qx.event.Registration.PRIORITY_FIRST,\n\n    /** @type {Map} Supported event types. Identical to events map of qx.ui.core.Widget */\n    SUPPORTED_TYPES :\n    {\n      // mouse events\n      mousemove : 1,\n      mouseover : 1,\n      mouseout : 1,\n      mousedown : 1,\n      mouseup : 1,\n      click : 1,\n      dblclick : 1,\n      contextmenu : 1,\n      mousewheel : 1,\n\n      // key events\n      keyup : 1,\n      keydown : 1,\n      keypress : 1,\n      keyinput : 1,\n\n      // mouse capture\n      capture : 1,\n      losecapture : 1,\n\n      // focus events\n      focusin : 1,\n      focusout : 1,\n      focus : 1,\n      blur : 1,\n      activate : 1,\n      deactivate : 1,\n\n      // appear events\n      appear : 1,\n      disappear : 1,\n\n      // resize event\n      // resize : 1,\n\n      // drag drop events\n      dragstart : 1,\n      dragend : 1,\n      dragover : 1,\n      dragleave : 1,\n      drop : 1,\n      drag : 1,\n      dragchange : 1,\n      droprequest : 1,\n\n      // scroll events\n      roll : 1,\n\n      // touch events\n      touchstart : 1,\n      touchend : 1,\n      touchmove : 1,\n      touchcancel : 1,\n\n      // gestures\n      tap : 1,\n      longtap : 1,\n      swipe : 1,\n      dbltap : 1,\n      track : 1,\n      trackend : 1,\n      trackstart : 1,\n      pinch : 1,\n      rotate : 1,\n\n      // pointer events\n      pointermove : 1,\n      pointerover : 1,\n      pointerout : 1,\n      pointerdown : 1,\n      pointerup : 1,\n      pointercancel : 1\n    },\n\n    /** @type {Integer} Whether the method \"canHandleEvent\" must be called */\n    IGNORE_CAN_HANDLE : false,\n\n    __activeTarget : null,\n    __scrollLeft : null,\n    __scrollTop : null,\n    __startY : null,\n    __timer : null,\n\n\n    /**\n     * Event handler. Called when the pointerdown event occurs.\n     * Sets the <code>active</class> class to the event target after a certain\n     * time.\n     *\n     * @param domEvent {qx.event.type.Pointer} The pointerdown event\n     */\n    __onPointerDown : function(domEvent)\n    {\n      if (!domEvent.isPrimary()) {\n        return;\n      }\n\n      var EventHandler = qx.ui.mobile.core.EventHandler;\n\n      EventHandler.__scrollLeft = qx.bom.Viewport.getScrollLeft();\n      EventHandler.__scrollTop = qx.bom.Viewport.getScrollTop();\n\n      EventHandler.__startY = domEvent.getScreenTop();\n\n      EventHandler.__cancelActiveStateTimer();\n\n      var target = domEvent.getTarget();\n      while (target && target.parentNode && target.parentNode.nodeType == 1 && qx.bom.element.Attribute.get(target, \"data-activatable\") != \"true\") {\n        target = target.parentNode;\n      }\n\n      EventHandler.__activeTarget = target;\n      EventHandler.___timer = window.setTimeout(function()\n      {\n        EventHandler.___timer =  null;\n        var target = EventHandler.__activeTarget;\n        if (target && (qx.bom.element.Attribute.get(target, \"data-selectable\") != \"false\")) {\n          qx.bom.element.Class.add(target, \"active\");\n        }\n      },100);\n    },\n\n\n    /**\n     * Event handler. Called when the pointerup event occurs.\n     * Removes the <code>active</class> class from the event target.\n     *\n     * @param domEvent {qx.event.type.Pointer} The pointerup event\n     */\n    __onPointerUp : function(domEvent)\n    {\n      qx.ui.mobile.core.EventHandler.__removeActiveState();\n    },\n\n\n    /**\n     * Event handler. Called when the pointermove event occurs.\n     * Removes the <code>active</class> class from the event target\n     * when the viewport was scrolled.\n     *\n     * @param domEvent {qx.event.type.Pointer} The pointermove event\n     */\n    __onPointerMove : function(domEvent)\n    {\n      if (!domEvent.isPrimary()) {\n        return;\n      }\n\n      var EventHandler = qx.ui.mobile.core.EventHandler;\n      var deltaY = domEvent.getScreenTop() - EventHandler.__startY;\n      if (EventHandler.__activeTarget && Math.abs(deltaY) >=\n          qx.event.handler.GestureCore.TAP_MAX_DISTANCE[domEvent.getPointerType()])\n      {\n        EventHandler.__removeActiveState();\n      }\n\n      if (EventHandler.__activeTarget\n          && (EventHandler.__scrollLeft != qx.bom.Viewport.getScrollLeft()\n              || EventHandler.__scrollTop != qx.bom.Viewport.getScrollTop())) {\n        EventHandler.__removeActiveState();\n      }\n    },\n\n\n    /**\n     * Cancels the active state timer.\n     */\n    __cancelActiveStateTimer : function()\n    {\n      var EventHandler = qx.ui.mobile.core.EventHandler;\n      if (EventHandler.___timer) {\n        window.clearTimeout(EventHandler.___timer);\n        EventHandler.___timer = null;\n      }\n    },\n\n\n    /**\n     * Removes the <code>active</class> class from the active target.\n     */\n    __removeActiveState : function()\n    {\n      var EventHandler = qx.ui.mobile.core.EventHandler;\n      EventHandler.__cancelActiveStateTimer();\n      var activeTarget = EventHandler.__activeTarget;\n      if (activeTarget) {\n        qx.bom.element.Class.remove(activeTarget, \"active\");\n      }\n      EventHandler.__activeTarget = null;\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    __manager : null,\n\n\n    // interface implementation\n    canHandleEvent : function(target, type) {\n      return target instanceof qx.ui.mobile.core.Widget;\n    },\n\n\n    // interface implementation\n    registerEvent : function(target, type, capture)\n    {\n      var element = target.getContainerElement();\n      qx.event.Registration.addListener(element, type, this._dispatchEvent, this, capture);\n    },\n\n\n    // interface implementation\n    unregisterEvent : function(target, type, capture)\n    {\n      var element = target.getContainerElement();\n      qx.event.Registration.removeListener(element, type, this._dispatchEvent, this, capture);\n    },\n\n\n    /**\n     * Dispatches a DOM event on a widget.\n     *\n     * @param domEvent {qx.event.type.Event} The event object to dispatch.\n     */\n    _dispatchEvent: function(domEvent){\n      // EVENT TARGET\n      var domTarget = domEvent.getTarget();\n      if (!domTarget || domTarget.id == null) {\n        return;\n      }\n      var widgetTarget = qx.ui.mobile.core.Widget.getWidgetById(domTarget.id);\n\n      // EVENT RELATED TARGET\n      if (domEvent.getRelatedTarget) {\n        var domRelatedTarget = domEvent.getRelatedTarget();\n\n        if (domRelatedTarget && domRelatedTarget.id) {\n          var widgetRelatedTarget = qx.ui.mobile.core.Widget.getWidgetById(domRelatedTarget.id);\n        }\n      }\n\n      // EVENT CURRENT TARGET\n      var currentTarget = domEvent.getCurrentTarget();\n      var currentWidget = qx.ui.mobile.core.Widget.getWidgetById(currentTarget.id);\n      if (!currentWidget) {\n        return;\n      }\n\n      // PROCESS LISTENERS\n\n      // Load listeners\n      var capture = domEvent.getEventPhase() == qx.event.type.Event.CAPTURING_PHASE;\n      var type = domEvent.getType();\n      var listeners = this.__manager.getListeners(currentWidget, type, capture);\n      if (!listeners || listeners.length === 0) {\n        return;\n      }\n\n      // Create cloned event with correct target\n      var widgetEvent = qx.event.Pool.getInstance().getObject(domEvent.constructor);\n      domEvent.clone(widgetEvent);\n\n      widgetEvent.setTarget(widgetTarget);\n      widgetEvent.setRelatedTarget(widgetRelatedTarget || null);\n      widgetEvent.setCurrentTarget(currentWidget);\n\n      // Keep original target of DOM event, otherwise map it to the original\n      var orig = domEvent.getOriginalTarget();\n      if (orig && orig.id) {\n        var widgetOriginalTarget = qx.ui.mobile.core.Widget.getWidgetById(orig.id);\n        widgetEvent.setOriginalTarget(widgetOriginalTarget);\n      }\n      else {\n        widgetEvent.setOriginalTarget(domTarget);\n      }\n\n      // Dispatch it on all listeners\n      for (var i = 0, l = listeners.length; i < l; i++) {\n        var context = listeners[i].context || currentWidget;\n        listeners[i].handler.call(context, widgetEvent);\n      }\n\n      // Synchronize propagation stopped/prevent default property\n      if (widgetEvent.getPropagationStopped()) {\n        domEvent.stopPropagation();\n      }\n\n      if (widgetEvent.getDefaultPrevented()) {\n        domEvent.preventDefault();\n      }\n\n      // Release the event instance to the event pool\n      qx.event.Pool.getInstance().poolObject(widgetEvent);\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct : function() {\n    this.__manager = null;\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     DEFER\n  *****************************************************************************\n  */\n\n  defer : function(statics)\n  {\n    qx.event.Registration.addHandler(statics);\n    qx.event.Registration.addListener(document, \"pointerdown\", statics.__onPointerDown);\n    qx.event.Registration.addListener(document, \"pointerup\", statics.__onPointerUp);\n    qx.event.Registration.addListener(document, \"pointercancel\", statics.__onPointerUp);\n    qx.event.Registration.addListener(document, \"pointermove\", statics.__onPointerMove);\n  }\n});\n"
  ]
}