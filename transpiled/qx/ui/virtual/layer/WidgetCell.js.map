{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-Dialog/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/ui/virtual/layer/WidgetCell.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "virtual",
    "layer",
    "Abstract",
    "include",
    "core",
    "MChildrenHandling",
    "construct",
    "widgetCellProvider",
    "setZIndex",
    "assertInterface",
    "IWidgetCellProvider",
    "_cellProvider",
    "__spacerPool",
    "properties",
    "anonymous",
    "refine",
    "init",
    "events",
    "updated",
    "members",
    "getRenderedCellWidget",
    "row",
    "column",
    "_getChildren",
    "length",
    "columnCount",
    "getColumnSizes",
    "rowCount",
    "getRowSizes",
    "firstRow",
    "getFirstRow",
    "firstColumn",
    "getFirstColumn",
    "childIndex",
    "widget",
    "getUserData",
    "_getSpacer",
    "spacer",
    "pop",
    "Spacer",
    "setUserData",
    "_activateNotEmptyChild",
    "elementToPool",
    "active",
    "FocusHandler",
    "getInstance",
    "getActiveWidget",
    "Widget",
    "contains",
    "children",
    "i",
    "activate",
    "_fullUpdate",
    "rowSizes",
    "columnSizes",
    "cellProvider",
    "concat",
    "child",
    "push",
    "poolCellWidget",
    "top",
    "left",
    "visibleItems",
    "y",
    "x",
    "item",
    "getCellWidget",
    "setUserBounds",
    "_add",
    "forEach",
    "indexOf",
    "_remove",
    "bind",
    "fireEvent",
    "_updateLayerWindow",
    "assertPositiveInteger",
    "assertArray",
    "lastRow",
    "lastColumn",
    "overlap",
    "Math",
    "max",
    "min",
    "_lastRow",
    "_lastColumn",
    "lineLength",
    "widgetsToMove",
    "widgetsToMoveIndexes",
    "index",
    "destruct",
    "dispose",
    "WidgetCell"
  ],
  "mappings": "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",
  "file": "WidgetCell.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2009 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Jonathan Weiß (jonathan_rass)\n\n************************************************************************ */\n\n\n/**\n * EXPERIMENTAL!\n *\n * The WidgetCell layer renders each cell with a qooxdoo widget. The concrete\n * widget instance for each cell is provided by a cell provider.\n */\nqx.Class.define(\"qx.ui.virtual.layer.WidgetCell\",\n{\n  extend : qx.ui.virtual.layer.Abstract,\n\n  include : [\n    qx.ui.core.MChildrenHandling\n  ],\n\n\n  /**\n   * @param widgetCellProvider {qx.ui.virtual.core.IWidgetCellProvider} This\n   *    class manages the life cycle of the cell widgets.\n   */\n  construct : function(widgetCellProvider)\n  {\n    this.base(arguments);\n    this.setZIndex(12);\n\n    if (qx.core.Environment.get(\"qx.debug\")) {\n      this.assertInterface(\n        widgetCellProvider,\n        qx.ui.virtual.core.IWidgetCellProvider\n      );\n    }\n\n    this._cellProvider = widgetCellProvider;\n    this.__spacerPool = [];\n  },\n\n\n  /*\n   *****************************************************************************\n      PROPERTIES\n   *****************************************************************************\n   */\n\n   properties :\n   {\n     // overridden\n     anonymous :\n     {\n       refine: true,\n       init: false\n     }\n   },\n\n  events :\n  {\n    /**\n     * Is fired when the {@link #_fullUpdate} or the\n     * {@link #_updateLayerWindow} is finished.\n     */\n    updated : \"qx.event.type.Event\"\n  },\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n     __spacerPool : null,\n\n     /**\n     * Returns the widget used to render the given cell. May return null if the\n     * cell isn’t rendered currently rendered.\n     *\n     * @param row {Integer} The cell's row index\n     * @param column {Integer} The cell's column index\n     * @return {qx.ui.core.LayoutItem|null} the widget used to render the given\n     *    cell or <code>null</code>\n     */\n     getRenderedCellWidget : function(row, column)\n     {\n        if (this._getChildren().length === 0) {\n          return null;\n        }\n\n        var columnCount = this.getColumnSizes().length;\n        var rowCount = this.getRowSizes().length;\n\n        var firstRow = this.getFirstRow();\n        var firstColumn = this.getFirstColumn();\n\n        if (\n         row < firstRow ||\n         row >= firstRow + rowCount ||\n         column < firstColumn ||\n         column >= firstColumn + columnCount\n        ) {\n         return null;\n        }\n\n        var childIndex = (column - firstColumn) + (row - firstRow) * columnCount;\n        var widget = this._getChildren()[childIndex];\n\n        if (!widget || widget.getUserData(\"cell.empty\")) {\n         return null;\n        } else {\n         return widget;\n        }\n     },\n\n\n    /**\n     * Get the spacer widget, for empty cells\n     *\n     * @return {qx.ui.core.Spacer} The spacer widget.\n     */\n    _getSpacer : function()\n    {\n      var spacer = this.__spacerPool.pop();\n      if (!spacer)\n      {\n        spacer = new qx.ui.core.Spacer();\n        spacer.setUserData(\"cell.empty\", 1);\n      }\n      return spacer;\n    },\n\n\n    /**\n     * Activates one of the still not empty items.\n     * @param elementToPool {qx.ui.core.Widget} The widget which gets pooled.\n     */\n    _activateNotEmptyChild : function(elementToPool)\n    {\n      // get the current active element\n      var active = qx.ui.core.FocusHandler.getInstance().getActiveWidget();\n      // if the element to pool is active or one of its children\n      if (active == elementToPool || qx.ui.core.Widget.contains(elementToPool, active)) {\n        // search for a new child to activate\n        var children = this._getChildren();\n        for (var i = children.length - 1; i >= 0; i--) {\n          if (!children[i].getUserData(\"cell.empty\")) {\n            children[i].activate();\n            break;\n          }\n        };\n      }\n    },\n\n\n    // overridden\n    _fullUpdate : function(firstRow, firstColumn, rowSizes, columnSizes)\n    {\n      var cellProvider = this._cellProvider;\n\n      var children = this._getChildren().concat();\n      for (var i=0; i<children.length; i++)\n      {\n        var child = children[i];\n        if (child.getUserData(\"cell.empty\")) {\n          this.__spacerPool.push(child);\n        } else {\n          this._activateNotEmptyChild(child);\n          cellProvider.poolCellWidget(child);\n        }\n      }\n\n\n      var top = 0;\n      var left = 0;\n\n      var visibleItems = [];\n\n      for (var y=0; y<rowSizes.length; y++)\n      {\n        for (var x=0; x<columnSizes.length; x++)\n        {\n          var row = firstRow + y;\n          var column = firstColumn + x;\n\n          var item = cellProvider.getCellWidget(row, column) || this._getSpacer();\n\n          visibleItems.push(item);\n\n          item.setUserBounds(left, top, columnSizes[x], rowSizes[y]);\n          item.setUserData(\"cell.row\", row);\n          item.setUserData(\"cell.column\", column);\n          this._add(item);\n\n          left += columnSizes[x];\n        }\n        top += rowSizes[y];\n        left = 0;\n      }\n      children.forEach(function(child){\n        if (visibleItems.indexOf(child) === -1) {\n          this._remove(child);\n        }\n      }.bind(this));\n\n      this.fireEvent(\"updated\");\n    },\n\n\n    _updateLayerWindow : function(\n      firstRow, firstColumn,\n      rowSizes, columnSizes\n    )\n    {\n      // compute overlap of old and new window\n      //\n      //      +---+\n      //      |  ##--+\n      //      |  ##  |\n      //      +--##  |\n      //         +---+\n      //\n\n\n    if (qx.core.Environment.get(\"qx.debug\"))\n    {\n      this.assertPositiveInteger(firstRow);\n      this.assertPositiveInteger(firstColumn);\n      this.assertArray(rowSizes);\n      this.assertArray(columnSizes);\n    }\n\n\n      var lastRow = firstRow + rowSizes.length - 1;\n      var lastColumn = firstColumn + columnSizes.length - 1;\n\n      var overlap = {\n        firstRow: Math.max(firstRow, this.getFirstRow()),\n        lastRow: Math.min(lastRow, this._lastRow),\n        firstColumn: Math.max(firstColumn, this.getFirstColumn()),\n        lastColumn: Math.min(lastColumn, this._lastColumn)\n      };\n\n      this._lastColumn = lastColumn;\n      this._lastRow = lastRow;\n\n      if (\n        overlap.firstRow > overlap.lastRow ||\n        overlap.firstColumn > overlap.lastColumn\n      ) {\n        return this._fullUpdate(\n          firstRow, firstColumn,\n          rowSizes, columnSizes\n        );\n      }\n\n      // collect the widgets to move\n      var children = this._getChildren();\n      var lineLength = this.getColumnSizes().length;\n      var widgetsToMove = [];\n      var widgetsToMoveIndexes = {};\n      for (var row=firstRow; row<=lastRow; row++)\n      {\n        widgetsToMove[row] = [];\n        for (var column=firstColumn; column<=lastColumn; column++)\n        {\n          if (\n            row >= overlap.firstRow &&\n            row <= overlap.lastRow &&\n            column >= overlap.firstColumn &&\n            column <= overlap.lastColumn\n          )\n          {\n            var x = column - this.getFirstColumn();\n            var y = row - this.getFirstRow();\n            var index = y*lineLength + x;\n            widgetsToMove[row][column] = children[index];\n            widgetsToMoveIndexes[index] = true;\n          }\n        }\n      }\n\n      var cellProvider = this._cellProvider;\n\n      // pool widgets\n      var children = this._getChildren().concat();\n      for (var i=0; i<children.length; i++)\n      {\n        if (!widgetsToMoveIndexes[i])\n        {\n          var child = children[i];\n          if (child.getUserData(\"cell.empty\")) {\n            this.__spacerPool.push(child);\n          } else {\n            this._activateNotEmptyChild(child);\n            cellProvider.poolCellWidget(child);\n          }\n        }\n      }\n\n\n      var top = 0;\n      var left = 0;\n      var visibleItems = [];\n\n      for (var y=0; y<rowSizes.length; y++)\n      {\n        for (var x=0; x<columnSizes.length; x++)\n        {\n          var row = firstRow + y;\n          var column = firstColumn + x;\n\n          var item =\n            widgetsToMove[row][column] ||\n            cellProvider.getCellWidget(row, column) ||\n            this._getSpacer();\n\n          visibleItems.push(item);\n\n          item.setUserBounds(left, top, columnSizes[x], rowSizes[y]);\n          item.setUserData(\"cell.row\", row);\n          item.setUserData(\"cell.column\", column);\n          this._add(item);\n\n          left += columnSizes[x];\n        }\n        top += rowSizes[y];\n        left = 0;\n      }\n      children.forEach(function(child){\n        if (visibleItems.indexOf(child) === -1) {\n          this._remove(child);\n        }\n      }.bind(this));\n\n      this.fireEvent(\"updated\");\n    }\n  },\n\n  destruct : function()\n  {\n    var children = this._getChildren();\n    for (var i=0; i<children.length; i++) {\n      children[i].dispose();\n    }\n\n    this._cellProvider = this.__spacerPool = null;\n  }\n});\n"
  ]
}