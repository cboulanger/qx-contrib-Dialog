{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-Dialog/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/ui/website/DatePicker.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "ui",
    "website",
    "Widget",
    "statics",
    "__validPositions",
    "_config",
    "format",
    "date",
    "toLocaleDateString",
    "readonly",
    "icon",
    "mode",
    "position",
    "datepicker",
    "DatePicker",
    "init",
    "construct",
    "selector",
    "context",
    "members",
    "_calendarId",
    "_iconId",
    "_uniqueId",
    "getCalendar",
    "calendarCollection",
    "qxWeb",
    "concat",
    "uniqueId",
    "Math",
    "round",
    "random",
    "__setReadOnly",
    "__setIcon",
    "__addInputListener",
    "calendarId",
    "calendar",
    "create",
    "on",
    "_onCalendarTap",
    "appendTo",
    "document",
    "body",
    "hide",
    "bodyElement",
    "getDocument",
    "_onBodyTap",
    "_calendarChangeValue",
    "undefined",
    "setValue",
    "render",
    "setEnabled",
    "getEnabled",
    "setConfig",
    "name",
    "config",
    "validPositions",
    "indexOf",
    "Error",
    "join",
    "_onTap",
    "e",
    "getStyle",
    "setStyle",
    "show",
    "placeTo",
    "getConfig",
    "stopPropagation",
    "target",
    "getTarget",
    "length",
    "isRendered",
    "tappedCol",
    "isChildOf",
    "formattedValue",
    "call",
    "collection",
    "setAttribute",
    "removeAttribute",
    "getNext",
    "off",
    "remove",
    "iconId",
    "setAttributes",
    "id",
    "src",
    "addClass",
    "getCssPrefix",
    "openingMode",
    "hasListener",
    "insertAfter",
    "dispose",
    "defer",
    "$attach"
  ],
  "mappings": "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",
  "file": "DatePicker.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2014 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Alexander Steitz (aback)\n\n************************************************************************ */\n\n/**\n * This is a date picker widget used to combine an input element with a calendar widget\n * to select a date. The calendar itself is opened as popup to save visual space.\n *\n * <h2>Markup</h2>\n * Each Date Picker widget is connected to an existing input element.\n *\n * <h2>CSS Classes</h2>\n * <table>\n *   <thead>\n *     <tr>\n *       <td>Class Name</td>\n *       <td>Applied to</td>\n *       <td>Description</td>\n *     </tr>\n *   </thead>\n *   <tbody>\n *     <tr>\n *       <td><code>qx-datepicker</code></td>\n *       <td>Input element</td>\n *       <td>Identifies the date picker widget</td>\n *     </tr>\n *     <tr>\n *       <td><code>qx-datepicker-icon</code></td>\n *       <td>Icon element</td>\n *       <td>Identifies the (if configured) image element to open the date picker</td>\n *     </tr>\n *   </tbody>\n * </table>\n *\n * @require(qx.module.Template)\n *\n * @group (Widget)\n */\nqx.Bootstrap.define('qx.ui.website.DatePicker', {\n  extend : qx.ui.website.Widget,\n\n  statics : {\n    /** List of valid positions to check against */\n    __validPositions : null,\n\n    /**\n     * *format*\n     *\n     * Function which is provided with a JavaScript Date object instance. You can provide\n     * an own format function to manipulate the value which is set to the associated input element.\n     *\n     * Default value:\n     * <pre>function(date) {\n        return date.toLocaleDateString();\n      }</pre>\n     *\n     * *readonly*\n     *\n     * Boolean value to control if the connected input element is read-only.\n     *\n     * Default value:\n     * <pre>true</pre>\n     *\n     * *icon*\n     *\n     * Path to an icon which will be placed next to the input element as additional opener. If configured\n     * a necessary <code>img</code> element is created and equipped with the <code>qx-datepicker-icon</code>\n     * CSS class to style it.\n     *\n     * Default value:\n     * <pre>null</pre>\n     *\n     * *mode*\n     *\n     * Which control should trigger showing the date picker.\n     * Possible values are <code>input</code>, <code>icon</code>, <code>both</code>.\n     *\n     * Default value:\n     * <pre>input</pre>\n     *\n     * *position*\n     *\n     * Position of the calendar popup from the point of view of the <code>INPUT</code> element.\n     * Possible values are\n     *\n     * * <code>top-left</code>\n     * * <code>top-center</code>\n     * * <code>top-right</code>\n     * * <code>bottom-left</code>\n     * * <code>bottom-center</code>\n     * * <code>bottom-right</code>\n     * * <code>left-top</code>\n     * * <code>left-middle</code>\n     * * <code>left-bottom</code>\n     * * <code>right-top</code>\n     * * <code>right-middle</code>\n     * * <code>right-bottom</code>\n     *\n     * Default value:\n     * <pre>bottom-left</pre>\n     */\n    _config : {\n      format : function(date) {\n        return date.toLocaleDateString();\n      },\n\n      readonly : true,\n\n      icon : null,\n\n      mode : 'input',\n\n      position : 'bottom-left'\n    },\n\n    /**\n     * Factory method which converts the current collection into a collection of\n     * Date Picker widgets. Therefore, an initialization process needs to be done which\n     * can be configured with some parameter.\n     *\n     * @param date {Date?null} The initial Date of the calendar.\n     * @return {qx.ui.website.DatePicker} A new date picker collection.\n     * @attach {qxWeb}\n     */\n    datepicker : function(date) {\n      var datepicker = new qx.ui.website.DatePicker(this);\n      datepicker.init(date);\n\n      return datepicker;\n    }\n  },\n\n  construct : function(selector, context) {\n    this.base(arguments, selector, context);\n  },\n\n  members : {\n    _calendarId: null,\n    _iconId: null,\n    _uniqueId: null,\n\n\n    /**\n     * Get the associated calendar widget\n     * @return {qx.ui.website.Calendar} calendar widget instance\n     */\n    getCalendar : function() {\n      var calendarCollection = qxWeb();\n      calendarCollection = calendarCollection.concat(qxWeb('div#' + this._calendarId));\n\n      return calendarCollection;\n    },\n\n    // overridden\n    /**\n     * Initializes the date picker widget\n     *\n     * @param date {Date} A JavaScript Date object to set the current date\n     * @return {Boolean} <code>true</code> if the widget has been initialized\n     */\n    init : function(date) {\n      if (!this.base(arguments)) {\n        return false;\n      }\n\n      var uniqueId = Math.round(Math.random() * 10000);\n      this._uniqueId = uniqueId;\n\n      this.__setReadOnly(this);\n      this.__setIcon(this);\n      this.__addInputListener(this);\n\n      var calendarId = 'datepicker-calendar-' + uniqueId;\n      var calendar = qxWeb.create('<div id=\"' + calendarId + '\"></div>').calendar();\n      calendar.on('tap', this._onCalendarTap);\n      calendar.appendTo(document.body).hide();\n\n      // create the connection between the date picker and the corresponding calendar widget\n      this._calendarId = calendarId;\n\n      // grab tap events at the body element to be able to hide the calender popup\n      // if the user taps outside\n      var bodyElement = qxWeb.getDocument(this).body;\n      qxWeb(bodyElement).on('tap', this._onBodyTap, this);\n\n      // react on date selection\n      calendar.on('changeValue', this._calendarChangeValue, this);\n\n      if (date !== undefined) {\n        calendar.setValue(date);\n      }\n\n      return true;\n    },\n\n    // overridden\n    render : function() {\n      this.getCalendar().render();\n\n      this.__setReadOnly(this);\n      this.__setIcon(this);\n      this.__addInputListener(this);\n\n      this.setEnabled(this.getEnabled());\n\n      return this;\n    },\n\n    // overridden\n    setConfig : function(name, config) {\n\n      if (name === 'position') {\n\n        var validPositions = qx.ui.website.DatePicker.__validPositions;\n        if (validPositions.indexOf(config) === -1) {\n          throw new Error('Wrong config value for \"position\"! ' +\n                          'Only the values \"' + validPositions.join('\", \"') + '\" are supported!');\n        }\n      }\n\n      this.base(arguments, name, config);\n      return this;\n    },\n\n\n    /**\n     * Listener which handles clicks/taps on the associated input element and\n     * opens / hides the calendar.\n     *\n     * @param e {Event} tap event\n     */\n    _onTap : function(e) {\n      if (!this.getEnabled()) {\n        return;\n      }\n\n      var calendar = this.getCalendar();\n\n      if (calendar.getStyle('display') == 'none') {\n        // set position to make sure the width of the DOM element is correct - otherwise the DOM\n        // element would be as wide as the parent (e.g. the body element). This would mess up the\n        // positioning with 'placeTo'\n        calendar.setStyle('position', 'absolute').show().placeTo(this, this.getConfig('position'));\n      } else {\n        calendar.hide();\n      }\n    },\n\n    /**\n     * Stop tap events from reaching the body so the calendar won't close\n     * @param e {Event} Tap event\n     */\n    _onCalendarTap : function(e) {\n      e.stopPropagation();\n    },\n\n    /**\n     * Listener to the body element to be able to hide the calendar if the user clicks\n     * or taps outside the calendar.\n     *\n     * @param e {Event} tap event\n     */\n    _onBodyTap : function(e) {\n\n      var target = qxWeb(e.getTarget());\n\n      // fast check for tap on the connected input field\n      if (this.length > 0 && target.length > 0 &&\n          this[0] == target[0]) {\n        return;\n      }\n\n      // fast check for tap on the configured icon\n      if (this.getConfig('icon') !== null) {\n        var icon = qxWeb('#' + this._iconId);\n        if (icon.length > 0 && target.length > 0 &&\n            icon[0] == target[0]) {\n          return;\n        }\n      }\n\n      // otherwise check if the target is a child of the (rendered) calendar\n      if (this.getCalendar().isRendered()) {\n        var tappedCol = qxWeb(e.getTarget());\n\n        if (tappedCol.isChildOf(this.getCalendar()) === false) {\n          this.getCalendar().hide();\n        }\n      }\n    },\n\n    /**\n     * Listens to value selection of the calendar, Whenever the user selected a day\n     * we write it back to the input element and hide the calendar.\n     *\n     * The format of the date can be controlled with the 'format' config function\n     *\n     * @param e {Event} selected date value\n     */\n    _calendarChangeValue : function(e) {\n      var formattedValue = this.getConfig('format').call(this, e);\n      this.setValue(formattedValue);\n      this.getCalendar().hide();\n    },\n\n\n    /**\n     * Helper method to set the readonly status on the input element\n     *\n     * @param collection {qxWeb} collection to work on\n     */\n    __setReadOnly : function(collection) {\n      if (collection.getConfig('readonly')) {\n        collection.setAttribute('readonly', 'readonly');\n      } else {\n        collection.removeAttribute('readonly');\n      }\n    },\n\n    /**\n     * Helper method to add / remove an icon next to the input element\n     *\n     * @param collection {qxWeb} collection to work on\n     */\n    __setIcon : function(collection) {\n      var icon;\n\n      if (collection.getConfig('icon') === null) {\n        icon = collection.getNext('img#' + collection._iconId);\n        if (icon.length === 1) {\n          icon.off('tap', this._onTap, collection);\n          icon.remove();\n        }\n      } else {\n        var iconId = 'datepicker-icon-' + collection._uniqueId;\n\n        // check if there is already an icon\n        if (collection._iconId == undefined) {\n          collection._iconId = iconId;\n\n          icon = qxWeb.create('<img>');\n\n          icon.setAttributes({\n            id: iconId,\n            src: collection.getConfig('icon')\n          });\n\n          icon.addClass(this.getCssPrefix() + '-icon');\n\n          var openingMode = collection.getConfig('mode');\n          if (openingMode === 'icon' || openingMode === 'both') {\n            if (!icon.hasListener('tap', this._onTap, collection)) {\n              icon.on('tap', this._onTap, collection);\n            }\n          }\n\n          icon.insertAfter(collection);\n        }\n      }\n    },\n\n    /**\n     * Helper method to add a listener to the connected input element\n     * if the configured mode is set.\n     *\n     * @param collection {qxWeb} collection to work on\n     */\n    __addInputListener : function(collection) {\n      if (collection.getConfig('mode') === 'icon') {\n        collection.off('tap', collection._onTap);\n      } else {\n        if(!collection.hasListener('tap', collection._onTap)) {\n          collection.on('tap', collection._onTap);\n        }\n      }\n    },\n\n    // overridden\n    dispose : function() {\n      this.removeAttribute('readonly');\n      this.getNext('img#' + this._iconId).remove();\n\n      this.off('tap', this._onTap);\n\n      var bodyElement = qxWeb.getDocument(this).body;\n      qxWeb(bodyElement).off('tap', this._onBodyTap, this);\n\n      this.getCalendar().off('changeValue', this._calendarChangeValue, this)\n      .off('tap', this._onCalendarTap);\n\n      var calendar = qxWeb('div#' + this._calendarId);\n      calendar.remove();\n      calendar.dispose();\n\n      return this.base(arguments);\n    }\n  },\n\n  defer : function(statics) {\n    qxWeb.$attach({datepicker : statics.datepicker});\n\n    statics.__validPositions = [ 'top-left', 'top-center', 'top-right',\n                                 'bottom-left', 'bottom-center', 'bottom-right',\n                                 'left-top', 'left-middle', 'left-bottom',\n                                 'right-top', 'right-middle', 'right-bottom' ];\n  }\n});\n"
  ]
}