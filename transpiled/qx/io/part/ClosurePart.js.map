{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-Dialog/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/io/part/ClosurePart.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "extend",
    "io",
    "part",
    "Part",
    "construct",
    "name",
    "packages",
    "loader",
    "call",
    "members",
    "__packagesToLoad",
    "preload",
    "callback",
    "self",
    "packagesLoaded",
    "that",
    "i",
    "_packages",
    "length",
    "pkg",
    "getReadyState",
    "loadClosure",
    "_loader",
    "notifyPackageResult",
    "load",
    "_checkCompleteLoading",
    "_readyState",
    "_appendPartListener",
    "pkgReadyState",
    "addPackageListener",
    "bind",
    "_onPackageLoad",
    "_markAsCompleted",
    "__executePackages",
    "execute",
    "ClosurePart"
  ],
  "mappings": "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",
  "file": "ClosurePart.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2009 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Fabian Jakobs (fjakobs)\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/**\n * Wrapper for a part as defined in the config file. This class knows about all\n * packages the part depends on and provides functionality to load the part.\n *\n * @internal\n */\nqx.Bootstrap.define(\"qx.io.part.ClosurePart\",\n{\n  extend : qx.io.part.Part,\n\n  /**\n   * @param name {String} Name of the part as defined in the config file at\n   *    compile time.\n   * @param packages {qx.io.part.Package[]} List of dependent packages\n   * @param loader {qx.Part} The loader of this part.\n   */\n  construct : function(name, packages, loader)\n  {\n    qx.io.part.Part.call(this, name, packages, loader);\n  },\n\n\n  members :\n  {\n    __packagesToLoad : 0,\n\n\n    // overridden\n    preload : function(callback, self)\n    {\n      // store how many packages are already preloaded\n      var packagesLoaded = 0;\n      var that = this;\n\n      for (var i = 0; i < this._packages.length; i++)\n      {\n        var pkg = this._packages[i];\n        if (pkg.getReadyState() == \"initialized\") {\n\n          pkg.loadClosure(function(pkg) {\n            packagesLoaded++;\n            that._loader.notifyPackageResult(pkg);\n            // everything loaded?\n            if (packagesLoaded >= that._packages.length && callback) {\n              callback.call(self);\n            }\n          }, this._loader);\n        }\n      }\n    },\n\n\n    /**\n     * Loads the closure part including all its packages. The loading will\n     * be done parallel. After all packages are available, the closures are\n     * executed in the correct order.\n     *\n     * @param callback {Function} The function to call after the loading.\n     * @param self {Object?} The context of the callback.\n     */\n    load : function(callback, self)\n    {\n      if (this._checkCompleteLoading(callback, self)) {\n        return;\n      };\n\n      this._readyState = \"loading\";\n\n      if (callback) {\n        this._appendPartListener(callback, self, this);\n      }\n\n      this.__packagesToLoad = this._packages.length;\n\n      for (var i = 0; i < this._packages.length; i++)\n      {\n        var pkg = this._packages[i];\n        var pkgReadyState = pkg.getReadyState();\n\n        // trigger loading\n        if (pkgReadyState == \"initialized\") {\n          pkg.loadClosure(this._loader.notifyPackageResult, this._loader);\n        }\n\n        // Listener for package changes\n        if (pkgReadyState == \"initialized\" || pkgReadyState == \"loading\")\n        {\n          this._loader.addPackageListener(\n            pkg,\n            qx.Bootstrap.bind(this._onPackageLoad, this, pkg)\n          );\n        }\n        else if (pkgReadyState == \"error\")\n        {\n          this._markAsCompleted(\"error\");\n          return;\n        }\n        else {\n          // \"complete\" and \"cached\"\n          this.__packagesToLoad--;\n        }\n      }\n\n      // execute closures in case everything is already loaded/cached\n      if (this.__packagesToLoad <= 0) {\n        this.__executePackages();\n      }\n    },\n\n\n    /**\n     * Executes the packages in their correct order and marks the part as\n     * complete after execution.\n     */\n    __executePackages : function()\n    {\n      for (var i = 0; i < this._packages.length; i++) {\n        this._packages[i].execute();\n      }\n      this._markAsCompleted(\"complete\");\n    },\n\n\n    /**\n     * Handler for every package load. It checks for errors and decreases the\n     * packages to load. If all packages has been loaded, it invokes the\n     * execution.\n     *\n     * @param pkg {qx.io.part.Package} The loaded package.\n     */\n    _onPackageLoad : function(pkg)\n    {\n      // if the part already has an error, ignore the callback\n      if (this._readyState == \"error\") {\n        return;\n      }\n\n      // one error package results in an error part\n      if (pkg.getReadyState() == \"error\") {\n        this._markAsCompleted(\"error\");\n        return;\n      }\n\n      // every package could be loaded -> execute the closures\n      this.__packagesToLoad--;\n      if (this.__packagesToLoad <= 0) {\n        this.__executePackages();\n      }\n    }\n  }\n});"
  ]
}