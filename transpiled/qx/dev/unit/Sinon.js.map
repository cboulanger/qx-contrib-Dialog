{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-Dialog/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/dev/unit/Sinon.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "statics",
    "getSinon",
    "dev",
    "unit",
    "Sinon",
    "sinon",
    "samsam",
    "formatio",
    "mod",
    "deps",
    "fn",
    "amd",
    "m",
    "module",
    "exports",
    "o",
    "Object",
    "prototype",
    "div",
    "document",
    "createElement",
    "isNaN",
    "value",
    "val",
    "getClass",
    "toString",
    "call",
    "split",
    "isArguments",
    "object",
    "length",
    "callee",
    "e",
    "isElement",
    "nodeType",
    "appendChild",
    "removeChild",
    "keys",
    "ks",
    "prop",
    "hasOwnProperty",
    "push",
    "isDate",
    "getTime",
    "valueOf",
    "isNegZero",
    "Infinity",
    "identical",
    "obj1",
    "obj2",
    "deepEqualCyclic",
    "objects1",
    "objects2",
    "paths1",
    "paths2",
    "compared",
    "isObject",
    "Boolean",
    "Date",
    "Number",
    "RegExp",
    "String",
    "getIndex",
    "objects",
    "obj",
    "i",
    "deepEqual",
    "path1",
    "path2",
    "type1",
    "type2",
    "isDate1",
    "isDate2",
    "class1",
    "class2",
    "keys1",
    "keys2",
    "key",
    "l",
    "value1",
    "value2",
    "isObject1",
    "isObject2",
    "index1",
    "index2",
    "newPath1",
    "newPath2",
    "JSON",
    "stringify",
    "match",
    "arrayContains",
    "array",
    "subset",
    "j",
    "k",
    "matcher",
    "test",
    "toLowerCase",
    "notNull",
    "indexOf",
    "Error",
    "require",
    "excludeConstructors",
    "quoteStrings",
    "specialObjects",
    "global",
    "window",
    "functionName",
    "func",
    "displayName",
    "name",
    "matches",
    "constructorName",
    "f",
    "constructor",
    "excludes",
    "isCircular",
    "ascii",
    "processed",
    "indent",
    "qs",
    "quote",
    "element",
    "pieces",
    "join",
    "properties",
    "sort",
    "str",
    "cons",
    "prefix",
    "is",
    "tagName",
    "attrs",
    "attributes",
    "attr",
    "pairs",
    "attrName",
    "item",
    "nodeName",
    "replace",
    "nodeValue",
    "formatted",
    "content",
    "innerHTML",
    "substr",
    "res",
    "Formatio",
    "options",
    "opt",
    "configure",
    "hasOwn",
    "isDOMNode",
    "success",
    "parentNode",
    "isFunction",
    "apply",
    "isReallyNaN",
    "mirrorProperties",
    "target",
    "source",
    "isRestorable",
    "restore",
    "wrapMethod",
    "property",
    "method",
    "TypeError",
    "wrappedMethod",
    "error",
    "calledBefore",
    "verb",
    "returns",
    "_stack",
    "stack",
    "owned",
    "extend",
    "arguments",
    "create",
    "proto",
    "F",
    "a",
    "b",
    "isMatcher",
    "ignoreCase",
    "multiline",
    "aString",
    "aLength",
    "bLength",
    "functionToString",
    "getCall",
    "callCount",
    "thisValue",
    "getConfig",
    "custom",
    "config",
    "defaults",
    "defaultConfig",
    "format",
    "injectIntoThis",
    "injectInto",
    "useFakeTimers",
    "useFakeServer",
    "timesInWords",
    "count",
    "calledInOrder",
    "spies",
    "called",
    "orderByFirstCall",
    "aCall",
    "bCall",
    "aId",
    "callId",
    "bId",
    "log",
    "logError",
    "label",
    "err",
    "msg",
    "message",
    "setTimeout",
    "typeOf",
    "undefined",
    "string",
    "substring",
    "createStubInstance",
    "stub",
    "isNode",
    "isAMD",
    "spy",
    "spyCall",
    "behavior",
    "mock",
    "collection",
    "assert",
    "sandbox",
    "testCase",
    "formatter",
    "util",
    "inspect",
    "commonJSModule",
    "assertType",
    "type",
    "actual",
    "isPrototypeOf",
    "matchObject",
    "expectation",
    "exp",
    "act",
    "or",
    "m2",
    "m1",
    "and",
    "any",
    "defined",
    "truthy",
    "falsy",
    "same",
    "instanceOf",
    "createPropertyMatcher",
    "propertyTest",
    "messagePrefix",
    "onlyProperty",
    "has",
    "bool",
    "number",
    "regexp",
    "date",
    "throwYieldError",
    "proxy",
    "text",
    "args",
    "slice",
    "Array",
    "callProto",
    "calledOn",
    "calledWith",
    "calledWithMatch",
    "calledWithExactly",
    "notCalledWith",
    "notCalledWithMatch",
    "returned",
    "returnValue",
    "threw",
    "exception",
    "calledWithNew",
    "other",
    "calledAfter",
    "callArg",
    "pos",
    "callArgOn",
    "callArgWith",
    "callArgOnWith",
    "concat",
    "yieldOn",
    "yieldTo",
    "yieldToOn",
    "callStr",
    "invokeCallback",
    "yield",
    "createSpyCall",
    "id",
    "proxyCall",
    "matchingFake",
    "fakes",
    "strict",
    "incrementCallCount",
    "notCalled",
    "calledOnce",
    "calledTwice",
    "calledThrice",
    "createCallProperties",
    "firstCall",
    "secondCall",
    "thirdCall",
    "lastCall",
    "vars",
    "createProxy",
    "p",
    "eval",
    "invoke",
    "uuid",
    "spyApi",
    "reset",
    "returnValues",
    "thisValues",
    "exceptions",
    "callIds",
    "_create",
    "matching",
    "thisCall",
    "getCalls",
    "calls",
    "spyFn",
    "withArgs",
    "original",
    "fake",
    "matchingAguments",
    "parent",
    "margs",
    "printf",
    "specifyer",
    "formatters",
    "parseInt",
    "delegateToCalls",
    "matchAny",
    "currentCall",
    "stringifiedCall",
    "nextTick",
    "process",
    "setImmediate",
    "callback",
    "throwsException",
    "getCallback",
    "callArgAt",
    "callArgProp",
    "getCallbackError",
    "callCallback",
    "callbackAsync",
    "callbackContext",
    "callbackArguments",
    "isPresent",
    "returnArgAt",
    "returnThis",
    "returnValueDefined",
    "context",
    "onCall",
    "index",
    "onFirstCall",
    "onSecondCall",
    "onThirdCall",
    "callsArg",
    "callsArgOn",
    "callsArgWith",
    "callsArgOnWith",
    "yields",
    "yieldsOn",
    "yieldsTo",
    "yieldsToOn",
    "returnsArg",
    "returnsThis",
    "syncFnName",
    "result",
    "wrapper",
    "getDefaultBehavior",
    "defaultBehavior",
    "getParentBehaviour",
    "getCurrentBehavior",
    "behaviors",
    "functionStub",
    "orig",
    "resetBehavior",
    "behaviorMethod",
    "each",
    "mockObject",
    "expects",
    "expectations",
    "proxies",
    "invokeMethod",
    "verify",
    "messages",
    "met",
    "fail",
    "pass",
    "allowsCall",
    "available",
    "exhausted",
    "unshift",
    "times",
    "_invoke",
    "callCountInWords",
    "expectedCallCountInWords",
    "min",
    "minCalls",
    "max",
    "maxCalls",
    "receivedMinCalls",
    "hasMinLimit",
    "receivedMaxCalls",
    "verifyMatcher",
    "possibleMatcher",
    "arg",
    "methodName",
    "verifyCallAllowed",
    "atLeast",
    "num",
    "limitsSet",
    "atMost",
    "never",
    "exactly",
    "once",
    "twice",
    "thrice",
    "failed",
    "expectedThis",
    "expectedArguments",
    "expectsExactArgCount",
    "withExactArgs",
    "on",
    "getFakes",
    "fakeCollection",
    "compact",
    "splice",
    "resolve",
    "verifyAndRestore",
    "add",
    "stubbedObj",
    "inject",
    "col",
    "timeoutResult",
    "addTimerReturnsObject",
    "clearTimeout",
    "addTimer",
    "recurring",
    "toId",
    "delay",
    "timeouts",
    "callAt",
    "now",
    "invokeArgs",
    "interval",
    "ref",
    "unref",
    "parseTime",
    "strings",
    "ms",
    "parsed",
    "Math",
    "pow",
    "createObject",
    "newObject",
    "clock",
    "timeout",
    "timerId",
    "setInterval",
    "clearInterval",
    "passThruArgs",
    "clearImmediate",
    "tick",
    "tickFrom",
    "tickTo",
    "previous",
    "timer",
    "firstTimerInRange",
    "firstException",
    "callTimer",
    "from",
    "to",
    "smallest",
    "originalTimer",
    "NativeDate",
    "ClockDate",
    "year",
    "month",
    "hour",
    "minute",
    "second",
    "mirrorDateProperties",
    "toSource",
    "parse",
    "UTC",
    "toUTCString",
    "methods",
    "hadOwnProperty",
    "DeferredCallManager",
    "getInstance",
    "refreshTimeout",
    "stubGlobal",
    "timers",
    "Event",
    "bubbles",
    "cancelable",
    "initEvent",
    "stopPropagation",
    "preventDefault",
    "defaultPrevented",
    "ProgressEvent",
    "progressEventRaw",
    "loaded",
    "total",
    "CustomEvent",
    "customData",
    "detail",
    "EventTarget",
    "addEventListener",
    "event",
    "listener",
    "eventListeners",
    "removeEventListener",
    "listeners",
    "dispatchEvent",
    "handleEvent",
    "supportsProgress",
    "supportsCustomEvent",
    "xhr",
    "XMLHttpRequest",
    "GlobalXMLHttpRequest",
    "GlobalActiveXObject",
    "ActiveXObject",
    "supportsActiveX",
    "supportsXHR",
    "workingXHR",
    "supportsCORS",
    "unsafeHeaders",
    "FakeXMLHttpRequest",
    "readyState",
    "UNSENT",
    "requestHeaders",
    "requestBody",
    "status",
    "statusText",
    "upload",
    "UploadProgress",
    "withCredentials",
    "events",
    "eventName",
    "onCreate",
    "verifyState",
    "OPENED",
    "sendFlag",
    "some",
    "filters",
    "addFilter",
    "IE6Re",
    "defake",
    "fakeXhr",
    "xhrArgs",
    "copyAttrs",
    "navigator",
    "userAgent",
    "stateChange",
    "HEADERS_RECEIVED",
    "LOADING",
    "DONE",
    "onreadystatechange",
    "handler",
    "useFilters",
    "verifyRequestOpened",
    "verifyRequestSent",
    "verifyHeadersReceived",
    "async",
    "verifyResponseBodyType",
    "body",
    "open",
    "url",
    "username",
    "password",
    "responseText",
    "responseXML",
    "filter",
    "readyStateChange",
    "state",
    "setRequestHeader",
    "header",
    "setResponseHeaders",
    "headers",
    "responseHeaders",
    "send",
    "data",
    "errorFlag",
    "onSend",
    "abort",
    "aborted",
    "onerror",
    "getResponseHeader",
    "h",
    "getAllResponseHeaders",
    "setResponseBody",
    "chunkSize",
    "parseXML",
    "respond",
    "statusCodes",
    "uploadProgress",
    "uploadError",
    "xmlDoc",
    "DOMParser",
    "parser",
    "parseFromString",
    "loadXML",
    "useFakeXMLHttpRequest",
    "keepOnCreate",
    "objId",
    "fakeServer",
    "responseArray",
    "response",
    "wloc",
    "location",
    "rCurrLoc",
    "protocol",
    "host",
    "matchOne",
    "reqMethod",
    "reqUrl",
    "rmeth",
    "matchMethod",
    "matchUrl",
    "request",
    "requestUrl",
    "getHTTPMethod",
    "ru",
    "exec",
    "server",
    "requests",
    "xhrObj",
    "addRequest",
    "handleRequest",
    "autoRespond",
    "responding",
    "autoRespondAfter",
    "fakeHTTPMethods",
    "queue",
    "processRequest",
    "respondWith",
    "responses",
    "shift",
    "Server",
    "fakeServerWithClock",
    "resetClock",
    "longestTimeout",
    "clockSetTimeout",
    "clockSetInterval",
    "returnVal",
    "exposeValue",
    "injectedKeys",
    "prepareSandboxFromConfig",
    "serverPrototype",
    "restoreContext",
    "exposed",
    "createTest",
    "setUp",
    "tearDown",
    "tests",
    "rPrefix",
    "testName",
    "verifyIsStub",
    "failAssertion",
    "failMethod",
    "mirrorPropAsAssertion",
    "exposedName",
    "toUpperCase",
    "failException",
    "assertion",
    "callOrder",
    "assertCallOrder",
    "expected",
    "assertCallCount",
    "expose",
    "includeFail",
    "self",
    "origSinon"
  ],
  "mappings": "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",
  "file": "Sinon.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2013 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tristan Koch (tristankoch)\n\n   ======================================================================\n\n   This class contains code based on the following work:\n\n   * Sinon.JS 1.9.1\n\n     Homepage:\n       http://sinonjs.org/\n\n     Documentation:\n       http://sinonjs.org/docs/\n\n     Discussion:\n       http://groups.google.com/group/sinonjs\n\n     Code:\n       https://github.com/cjohansen/Sinon.JS\n\n     Copyright:\n       (c) 2010-2014, Christian Johansen\n\n     License:\n       BSD: http://www.opensource.org/licenses/bsd-license.php\n\n************************************************************************ */\n\n/**\n * Exposes Sinon.JS to qooxdoo.\n *\n * This class exposes Sinon.JS (http://sinonjs.org/) and is not to be used\n * directly. Instead, you should include qx.dev.unit.MMock in your TestCase\n * and use the wrappers provided.\n *\n * @internal\n * @ignore(module, require, global, ProgressEvent, clearImmediate)\n * @lint ignoreDeprecated(eval)\n * @ignore(module.exports.*)\n *\n */\nqx.Bootstrap.define(\"qx.dev.unit.Sinon\",\n{\n  statics :\n  {\n    /**\n     * Get the Sinon.JS object.\n     *\n     * @signature function()\n     * @return {Object} The Sinon.JS object\n     *\n     */\n    getSinon: null\n  }\n});\n\n\n/**\n * @ignore(module, require, global, process.*, setImmediate)\n * @ignore(msSetImmediate.*)\n * @lint ignoreUnused(alen, requestMethod, index)\n * @lint ignoreNoLoopBlock()\n *\n * @lint ignoreJsdocKey(author, license, depend)\n */\n(function() {\n\n/**\n * Below is the original Sinon.JS code with some minor changes:\n *\n * - aliased \"throws\" as \"throwsException\"\n * - replaced references to this.sinon which do not make sense within a closure\n * - in failAssertion, \"assert.fail\" takes precedence over \"object.fail\"\n *\n */\n/**\n * Sinon.JS 1.9.1, 2014/04/03\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @author Contributors: https://github.com/cjohansen/Sinon.JS/blob/master/AUTHORS\n *\n * (The BSD License)\n *\n * Copyright (c) 2010-2014, Christian Johansen, christian@cjohansen.no\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n *     * Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright notice,\n *       this list of conditions and the following disclaimer in the documentation\n *       and/or other materials provided with the distribution.\n *     * Neither the name of Christian Johansen nor the names of his contributors\n *       may be used to endorse or promote products derived from this software\n *       without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nthis.sinon = (function () {\nvar samsam, formatio;\nfunction define(mod, deps, fn) { if (mod == \"samsam\") { samsam = deps(); } else { formatio = fn(samsam); } }\ndefine.amd = true;\n((typeof define === \"function\" && define.amd && function (m) { define(\"samsam\", m); }) ||\n (typeof module === \"object\" &&\n      function (m) { module.exports = m(); }) || // Node\n function (m) { this.samsam = m(); } // Browser globals\n)(function () {\n    var o = Object.prototype;\n    var div = typeof document !== \"undefined\" && document.createElement(\"div\");\n\n    function isNaN(value) {\n        // Unlike global isNaN, this avoids type coercion\n        // typeof check avoids IE host object issues, hat tip to\n        // lodash\n        var val = value; // JsLint thinks value !== value is \"weird\"\n        return typeof value === \"number\" && value !== val;\n    }\n\n    function getClass(value) {\n        // Returns the internal [[Class]] by calling Object.prototype.toString\n        // with the provided value as this. Return value is a string, naming the\n        // internal class, e.g. \"Array\"\n        return o.toString.call(value).split(/[ \\]]/)[1];\n    }\n\n    /**\n     * @param object {Object}\n     *\n     * Returns ``true`` if ``object`` is an ``arguments`` object,\n     * ``false`` otherwise.\n     */\n    function isArguments(object) {\n        if (typeof object !== \"object\" || typeof object.length !== \"number\" ||\n                getClass(object) === \"Array\") {\n            return false;\n        }\n        if (typeof object.callee == \"function\") { return true; }\n        try {\n            object[object.length] = 6;\n            delete object[object.length];\n        } catch (e) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * @param object {Object}\n     *\n     * Returns ``true`` if ``object`` is a DOM element node. Unlike\n     * Underscore.js/lodash, this function will return ``false`` if ``object``\n     * is an *element-like* object, i.e. a regular object with a ``nodeType``\n     * property that holds the value ``1``.\n     */\n    function isElement(object) {\n        if (!object || object.nodeType !== 1 || !div) { return false; }\n        try {\n            object.appendChild(div);\n            object.removeChild(div);\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * @param object {Object}\n     *\n     * Return an array of own property names.\n     */\n    function keys(object) {\n        var ks = [], prop;\n        for (prop in object) {\n            if (o.hasOwnProperty.call(object, prop)) { ks.push(prop); }\n        }\n        return ks;\n    }\n\n    /**\n     * @param value {Object}\n     *\n     * Returns true if the object is a ``Date``, or *date-like*. Duck typing\n     * of date objects work by checking that the object has a ``getTime``\n     * function whose return value equals the return value from the object's\n     * ``valueOf``.\n     */\n    function isDate(value) {\n        return typeof value.getTime == \"function\" &&\n            value.getTime() == value.valueOf();\n    }\n\n    /**\n     * @param value {Object}\n     *\n     * Returns ``true`` if ``value`` is ``-0``.\n     */\n    function isNegZero(value) {\n        return value === 0 && 1 / value === -Infinity;\n    }\n\n    /**\n     * @param obj1 {Object}\n     * @param obj2 {Object}\n     *\n     * Returns ``true`` if two objects are strictly equal. Compared to\n     * ``===`` there are two exceptions:\n     *\n     *   - NaN is considered equal to NaN\n     *   - -0 and +0 are not considered equal\n     */\n    function identical(obj1, obj2) {\n        if (obj1 === obj2 || (isNaN(obj1) && isNaN(obj2))) {\n            return obj1 !== 0 || isNegZero(obj1) === isNegZero(obj2);\n        }\n    }\n\n\n    /**\n     * @param obj1 {Object}\n     * @param obj2 {Object}\n     *\n     * Deep equal comparison. Two values are \"deep equal\" if:\n     *\n     *   - They are equal, according to samsam.identical\n     *   - They are both date objects representing the same time\n     *   - They are both arrays containing elements that are all deepEqual\n     *   - They are objects with the same set of properties, and each property\n     *     in ``obj1`` is deepEqual to the corresponding property in ``obj2``\n     *\n     * Supports cyclic objects.\n     */\n    function deepEqualCyclic(obj1, obj2) {\n\n        // used for cyclic comparison\n        // contain already visited objects\n        var objects1 = [],\n            objects2 = [],\n        // contain pathes (position in the object structure)\n        // of the already visited objects\n        // indexes same as in objects arrays\n            paths1 = [],\n            paths2 = [],\n        // contains combinations of already compared objects\n        // in the manner: { \"$1['ref']$2['ref']\": true }\n            compared = {};\n\n        /**\n         * used to check, if the value of a property is an object\n         * (cyclic logic is only needed for objects)\n         * only needed for cyclic logic\n         */\n        function isObject(value) {\n\n            if (typeof value === 'object' && value !== null &&\n                    !(value instanceof Boolean) &&\n                    !(value instanceof Date)    &&\n                    !(value instanceof Number)  &&\n                    !(value instanceof RegExp)  &&\n                    !(value instanceof String)) {\n\n                return true;\n            }\n\n            return false;\n        }\n\n        /**\n         * returns the index of the given object in the\n         * given objects array, -1 if not contained\n         * only needed for cyclic logic\n         */\n        function getIndex(objects, obj) {\n\n            var i;\n            for (i = 0; i < objects.length; i++) {\n                if (objects[i] === obj) {\n                    return i;\n                }\n            }\n\n            return -1;\n        }\n\n        // does the recursion for the deep equal check\n        return (function deepEqual(obj1, obj2, path1, path2) {\n            var type1 = typeof obj1;\n            var type2 = typeof obj2;\n\n            // == null also matches undefined\n            if (obj1 === obj2 ||\n                    isNaN(obj1) || isNaN(obj2) ||\n                    obj1 == null || obj2 == null ||\n                    type1 !== \"object\" || type2 !== \"object\") {\n\n                return identical(obj1, obj2);\n            }\n\n            // Elements are only equal if identical(expected, actual)\n            if (isElement(obj1) || isElement(obj2)) { return false; }\n\n            var isDate1 = isDate(obj1), isDate2 = isDate(obj2);\n            if (isDate1 || isDate2) {\n                if (!isDate1 || !isDate2 || obj1.getTime() !== obj2.getTime()) {\n                    return false;\n                }\n            }\n\n            if (obj1 instanceof RegExp && obj2 instanceof RegExp) {\n                if (obj1.toString() !== obj2.toString()) { return false; }\n            }\n\n            var class1 = getClass(obj1);\n            var class2 = getClass(obj2);\n            var keys1 = keys(obj1);\n            var keys2 = keys(obj2);\n\n            if (isArguments(obj1) || isArguments(obj2)) {\n                if (obj1.length !== obj2.length) { return false; }\n            } else {\n                if (type1 !== type2 || class1 !== class2 ||\n                        keys1.length !== keys2.length) {\n                    return false;\n                }\n            }\n\n            var key, i, l,\n                // following vars are used for the cyclic logic\n                value1, value2,\n                isObject1, isObject2,\n                index1, index2,\n                newPath1, newPath2;\n\n            for (i = 0, l = keys1.length; i < l; i++) {\n                key = keys1[i];\n                if (!o.hasOwnProperty.call(obj2, key)) {\n                    return false;\n                }\n\n                // Start of the cyclic logic\n\n                value1 = obj1[key];\n                value2 = obj2[key];\n\n                isObject1 = isObject(value1);\n                isObject2 = isObject(value2);\n\n                // determine, if the objects were already visited\n                // (it's faster to check for isObject first, than to\n                // get -1 from getIndex for non objects)\n                index1 = isObject1 ? getIndex(objects1, value1) : -1;\n                index2 = isObject2 ? getIndex(objects2, value2) : -1;\n\n                // determine the new pathes of the objects\n                // - for non cyclic objects the current path will be extended\n                //   by current property name\n                // - for cyclic objects the stored path is taken\n                newPath1 = index1 !== -1\n                    ? paths1[index1]\n                    : path1 + '[' + JSON.stringify(key) + ']';\n                newPath2 = index2 !== -1\n                    ? paths2[index2]\n                    : path2 + '[' + JSON.stringify(key) + ']';\n\n                // stop recursion if current objects are already compared\n                if (compared[newPath1 + newPath2]) {\n                    return true;\n                }\n\n                // remember the current objects and their pathes\n                if (index1 === -1 && isObject1) {\n                    objects1.push(value1);\n                    paths1.push(newPath1);\n                }\n                if (index2 === -1 && isObject2) {\n                    objects2.push(value2);\n                    paths2.push(newPath2);\n                }\n\n                // remember that the current objects are already compared\n                if (isObject1 && isObject2) {\n                    compared[newPath1 + newPath2] = true;\n                }\n\n                // End of cyclic logic\n\n                // neither value1 nor value2 is a cycle\n                // continue with next level\n                if (!deepEqual(value1, value2, newPath1, newPath2)) {\n                    return false;\n                }\n            }\n\n            return true;\n\n        }(obj1, obj2, '$1', '$2'));\n    }\n\n    var match;\n\n    function arrayContains(array, subset) {\n        if (subset.length === 0) { return true; }\n        var i, l, j, k;\n        for (i = 0, l = array.length; i < l; ++i) {\n            if (match(array[i], subset[0])) {\n                for (j = 0, k = subset.length; j < k; ++j) {\n                    if (!match(array[i + j], subset[j])) { return false; }\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @param object {Object}\n     * @param matcher {object}\n     *\n     * Compare arbitrary value ``object`` with matcher.\n     */\n    match = function match(object, matcher) {\n        if (matcher && typeof matcher.test === \"function\") {\n            return matcher.test(object);\n        }\n\n        if (typeof matcher === \"function\") {\n            return matcher(object) === true;\n        }\n\n        if (typeof matcher === \"string\") {\n            matcher = matcher.toLowerCase();\n            var notNull = typeof object === \"string\" || !!object;\n            return notNull &&\n                (String(object)).toLowerCase().indexOf(matcher) >= 0;\n        }\n\n        if (typeof matcher === \"number\") {\n            return matcher === object;\n        }\n\n        if (typeof matcher === \"boolean\") {\n            return matcher === object;\n        }\n\n        if (getClass(object) === \"Array\" && getClass(matcher) === \"Array\") {\n            return arrayContains(object, matcher);\n        }\n\n        if (matcher && typeof matcher === \"object\") {\n            var prop;\n            for (prop in matcher) {\n                if (!match(object[prop], matcher[prop])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        throw new Error(\"Matcher was not a string, a number, a \" +\n                        \"function, a boolean or an object\");\n    };\n\n    return {\n        isArguments: isArguments,\n        isElement: isElement,\n        isDate: isDate,\n        isNegZero: isNegZero,\n        identical: identical,\n        deepEqual: deepEqualCyclic,\n        match: match,\n        keys: keys\n    };\n});\n((typeof define === \"function\" && define.amd && function (m) {\n    define(\"formatio\", [\"samsam\"], m);\n}) || (typeof module === \"object\" && function (m) {\n    module.exports = m(require(\"samsam\"));\n}) || function (m) { this.formatio = m(this.samsam); }\n)(function (samsam) {\n\n    var formatio = {\n        excludeConstructors: [\"Object\", /^.$/],\n        quoteStrings: true\n    };\n\n    var specialObjects = [];\n    if (typeof global !== \"undefined\") {\n        specialObjects.push({ object: global, value: \"[object global]\" });\n    }\n    if (typeof document !== \"undefined\") {\n        specialObjects.push({\n            object: document,\n            value: \"[object HTMLDocument]\"\n        });\n    }\n    if (typeof window !== \"undefined\") {\n        specialObjects.push({ object: window, value: \"[object Window]\" });\n    }\n\n    function functionName(func) {\n        if (!func) { return \"\"; }\n        if (func.displayName) { return func.displayName; }\n        if (func.name) { return func.name; }\n        var matches = func.toString().match(/function\\s+([^\\(]+)/m);\n        return (matches && matches[1]) || \"\";\n    }\n\n    function constructorName(f, object) {\n        var name = functionName(object && object.constructor);\n        var excludes = f.excludeConstructors ||\n                formatio.excludeConstructors || [];\n\n        var i, l;\n        for (i = 0, l = excludes.length; i < l; ++i) {\n            if (typeof excludes[i] === \"string\" && excludes[i] === name) {\n                return \"\";\n            } else if (excludes[i].test && excludes[i].test(name)) {\n                return \"\";\n            }\n        }\n\n        return name;\n    }\n\n    function isCircular(object, objects) {\n        if (typeof object !== \"object\") { return false; }\n        var i, l;\n        for (i = 0, l = objects.length; i < l; ++i) {\n            if (objects[i] === object) { return true; }\n        }\n        return false;\n    }\n\n    function ascii(f, object, processed, indent) {\n        if (typeof object === \"string\") {\n            var qs = f.quoteStrings;\n            var quote = typeof qs !== \"boolean\" || qs;\n            return processed || quote ? '\"' + object + '\"' : object;\n        }\n\n        if (typeof object === \"function\" && !(object instanceof RegExp)) {\n            return ascii.func(object);\n        }\n\n        processed = processed || [];\n\n        if (isCircular(object, processed)) { return \"[Circular]\"; }\n\n        if (Object.prototype.toString.call(object) === \"[object Array]\") {\n            return ascii.array.call(f, object, processed);\n        }\n\n        if (!object) { return String((1/object) === -Infinity ? \"-0\" : object); }\n        if (samsam.isElement(object)) { return ascii.element(object); }\n\n        if (typeof object.toString === \"function\" &&\n                object.toString !== Object.prototype.toString) {\n            return object.toString();\n        }\n\n        var i, l;\n        for (i = 0, l = specialObjects.length; i < l; i++) {\n            if (object === specialObjects[i].object) {\n                return specialObjects[i].value;\n            }\n        }\n\n        return ascii.object.call(f, object, processed, indent);\n    }\n\n    ascii.func = function (func) {\n        return \"function \" + functionName(func) + \"() {}\";\n    };\n\n    ascii.array = function (array, processed) {\n        processed = processed || [];\n        processed.push(array);\n        var i, l, pieces = [];\n        for (i = 0, l = array.length; i < l; ++i) {\n            pieces.push(ascii(this, array[i], processed));\n        }\n        return \"[\" + pieces.join(\", \") + \"]\";\n    };\n\n    ascii.object = function (object, processed, indent) {\n        processed = processed || [];\n        processed.push(object);\n        indent = indent || 0;\n        var pieces = [], properties = samsam.keys(object).sort();\n        var length = 3;\n        var prop, str, obj, i, l;\n\n        for (i = 0, l = properties.length; i < l; ++i) {\n            prop = properties[i];\n            obj = object[prop];\n\n            if (isCircular(obj, processed)) {\n                str = \"[Circular]\";\n            } else {\n                str = ascii(this, obj, processed, indent + 2);\n            }\n\n            str = (/\\s/.test(prop) ? '\"' + prop + '\"' : prop) + \": \" + str;\n            length += str.length;\n            pieces.push(str);\n        }\n\n        var cons = constructorName(this, object);\n        var prefix = cons ? \"[\" + cons + \"] \" : \"\";\n        var is = \"\";\n        for (i = 0, l = indent; i < l; ++i) { is += \" \"; }\n\n        if (length + indent > 80) {\n            return prefix + \"{\\n  \" + is + pieces.join(\",\\n  \" + is) + \"\\n\" +\n                is + \"}\";\n        }\n        return prefix + \"{ \" + pieces.join(\", \") + \" }\";\n    };\n\n    ascii.element = function (element) {\n        var tagName = element.tagName.toLowerCase();\n        var attrs = element.attributes, attr, pairs = [], attrName, i, l, val;\n\n        for (i = 0, l = attrs.length; i < l; ++i) {\n            attr = attrs.item(i);\n            attrName = attr.nodeName.toLowerCase().replace(\"html:\", \"\");\n            val = attr.nodeValue;\n            if (attrName !== \"contenteditable\" || val !== \"inherit\") {\n                if (!!val) { pairs.push(attrName + \"=\\\"\" + val + \"\\\"\"); }\n            }\n        }\n\n        var formatted = \"<\" + tagName + (pairs.length > 0 ? \" \" : \"\");\n        var content = element.innerHTML;\n\n        if (content.length > 20) {\n            content = content.substr(0, 20) + \"[...]\";\n        }\n\n        var res = formatted + pairs.join(\" \") + \">\" + content +\n                \"</\" + tagName + \">\";\n\n        return res.replace(/ contentEditable=\"inherit\"/, \"\");\n    };\n\n    function Formatio(options) {\n        for (var opt in options) {\n            this[opt] = options[opt];\n        }\n    }\n\n    Formatio.prototype = {\n        functionName: functionName,\n\n        configure: function (options) {\n            return new Formatio(options);\n        },\n\n        constructorName: function (object) {\n            return constructorName(this, object);\n        },\n\n        ascii: function (object, processed, indent) {\n            return ascii(this, object, processed, indent);\n        }\n    };\n\n    return Formatio.prototype;\n});\n/*jslint eqeqeq: false, onevar: false, forin: true, nomen: false, regexp: false, plusplus: false*/\n/*global module, require, __dirname, document*/\n/**\n * Sinon core utilities. For internal use only.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nvar sinon = (function (formatio) {\n    var div = typeof document != \"undefined\" && document.createElement(\"div\");\n    var hasOwn = Object.prototype.hasOwnProperty;\n\n    function isDOMNode(obj) {\n        var success = false;\n\n        try {\n            obj.appendChild(div);\n            success = div.parentNode == obj;\n        } catch (e) {\n            return false;\n        } finally {\n            try {\n                obj.removeChild(div);\n            } catch (e) {\n                // Remove failed, not much we can do about that\n            }\n        }\n\n        return success;\n    }\n\n    function isElement(obj) {\n        return div && obj && obj.nodeType === 1 && isDOMNode(obj);\n    }\n\n    function isFunction(obj) {\n        return typeof obj === \"function\" || !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n\n    function isReallyNaN(val) {\n        return typeof val === 'number' && isNaN(val);\n    }\n\n    function mirrorProperties(target, source) {\n        for (var prop in source) {\n            if (!hasOwn.call(target, prop)) {\n                target[prop] = source[prop];\n            }\n        }\n    }\n\n    function isRestorable (obj) {\n        return typeof obj === \"function\" && typeof obj.restore === \"function\" && obj.restore.sinon;\n    }\n\n    var sinon = {\n        wrapMethod: function wrapMethod(object, property, method) {\n            if (!object) {\n                throw new TypeError(\"Should wrap property of object\");\n            }\n\n            if (typeof method != \"function\") {\n                throw new TypeError(\"Method wrapper should be function\");\n            }\n\n            var wrappedMethod = object[property],\n                error;\n\n            if (!isFunction(wrappedMethod)) {\n                error = new TypeError(\"Attempted to wrap \" + (typeof wrappedMethod) + \" property \" +\n                                    property + \" as function\");\n            }\n\n            if (wrappedMethod.restore && wrappedMethod.restore.sinon) {\n                error = new TypeError(\"Attempted to wrap \" + property + \" which is already wrapped\");\n            }\n\n            if (wrappedMethod.calledBefore) {\n                var verb = !!wrappedMethod.returns ? \"stubbed\" : \"spied on\";\n                error = new TypeError(\"Attempted to wrap \" + property + \" which is already \" + verb);\n            }\n\n            if (error) {\n                if (wrappedMethod._stack) {\n                    error.stack += '\\n--------------\\n' + wrappedMethod._stack;\n                }\n                throw error;\n            }\n\n            // IE 8 does not support hasOwnProperty on the window object and Firefox has a problem\n            // when using hasOwn.call on objects from other frames.\n            var owned = object.hasOwnProperty ? object.hasOwnProperty(property) : hasOwn.call(object, property);\n            object[property] = method;\n            method.displayName = property;\n            // Set up a stack trace which can be used later to find what line of\n            // code the original method was created on.\n            method._stack = (new Error('Stack Trace for original')).stack;\n\n            method.restore = function () {\n                // For prototype properties try to reset by delete first.\n                // If this fails (ex: localStorage on mobile safari) then force a reset\n                // via direct assignment.\n                if (!owned) {\n                    delete object[property];\n                }\n                if (object[property] === method) {\n                    object[property] = wrappedMethod;\n                }\n            };\n\n            method.restore.sinon = true;\n            mirrorProperties(method, wrappedMethod);\n\n            return method;\n        },\n\n        extend: function extend(target) {\n            for (var i = 1, l = arguments.length; i < l; i += 1) {\n                for (var prop in arguments[i]) {\n                    if (arguments[i].hasOwnProperty(prop)) {\n                        target[prop] = arguments[i][prop];\n                    }\n\n                    // DONT ENUM bug, only care about toString\n                    if (arguments[i].hasOwnProperty(\"toString\") &&\n                        arguments[i].toString != target.toString) {\n                        target.toString = arguments[i].toString;\n                    }\n                }\n            }\n\n            return target;\n        },\n\n        create: function create(proto) {\n            var F = function () {};\n            F.prototype = proto;\n            return new F();\n        },\n\n        deepEqual: function deepEqual(a, b) {\n            if (sinon.match && sinon.match.isMatcher(a)) {\n                return a.test(b);\n            }\n\n            if (typeof a != 'object' || typeof b != 'object') {\n                if (isReallyNaN(a) && isReallyNaN(b)) {\n                    return true;\n                } else {\n                    return a === b;\n                }\n            }\n\n            if (isElement(a) || isElement(b)) {\n                return a === b;\n            }\n\n            if (a === b) {\n                return true;\n            }\n\n            if ((a === null && b !== null) || (a !== null && b === null)) {\n                return false;\n            }\n\n            if (a instanceof RegExp && b instanceof RegExp) {\n              return (a.source === b.source) && (a.global === b.global) &&\n                (a.ignoreCase === b.ignoreCase) && (a.multiline === b.multiline);\n            }\n\n            var aString = Object.prototype.toString.call(a);\n            if (aString != Object.prototype.toString.call(b)) {\n                return false;\n            }\n\n            if (aString == \"[object Date]\") {\n                return a.valueOf() === b.valueOf();\n            }\n\n            var prop, aLength = 0, bLength = 0;\n\n            if (aString == \"[object Array]\" && a.length !== b.length) {\n                return false;\n            }\n\n            for (prop in a) {\n                aLength += 1;\n\n                if (!deepEqual(a[prop], b[prop])) {\n                    return false;\n                }\n            }\n\n            for (prop in b) {\n                bLength += 1;\n            }\n\n            return aLength == bLength;\n        },\n\n        functionName: function functionName(func) {\n            var name = func.displayName || func.name;\n\n            // Use function decomposition as a last resort to get function\n            // name. Does not rely on function decomposition to work - if it\n            // doesn't debugging will be slightly less informative\n            // (i.e. toString will say 'spy' rather than 'myFunc').\n            if (!name) {\n                var matches = func.toString().match(/function ([^\\s\\(]+)/);\n                name = matches && matches[1];\n            }\n\n            return name;\n        },\n\n        functionToString: function toString() {\n            if (this.getCall && this.callCount) {\n                var thisValue, prop, i = this.callCount;\n\n                while (i--) {\n                    thisValue = this.getCall(i).thisValue;\n\n                    for (prop in thisValue) {\n                        if (thisValue[prop] === this) {\n                            return prop;\n                        }\n                    }\n                }\n            }\n\n            return this.displayName || \"sinon fake\";\n        },\n\n        getConfig: function (custom) {\n            var config = {};\n            custom = custom || {};\n            var defaults = sinon.defaultConfig;\n\n            for (var prop in defaults) {\n                if (defaults.hasOwnProperty(prop)) {\n                    config[prop] = custom.hasOwnProperty(prop) ? custom[prop] : defaults[prop];\n                }\n            }\n\n            return config;\n        },\n\n        format: function (val) {\n            return \"\" + val;\n        },\n\n        defaultConfig: {\n            injectIntoThis: true,\n            injectInto: null,\n            properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n            useFakeTimers: true,\n            useFakeServer: true\n        },\n\n        timesInWords: function timesInWords(count) {\n            return count == 1 && \"once\" ||\n                count == 2 && \"twice\" ||\n                count == 3 && \"thrice\" ||\n                (count || 0) + \" times\";\n        },\n\n        calledInOrder: function (spies) {\n            for (var i = 1, l = spies.length; i < l; i++) {\n                if (!spies[i - 1].calledBefore(spies[i]) || !spies[i].called) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        orderByFirstCall: function (spies) {\n            return spies.sort(function (a, b) {\n                // uuid, won't ever be equal\n                var aCall = a.getCall(0);\n                var bCall = b.getCall(0);\n                var aId = aCall && aCall.callId || -1;\n                var bId = bCall && bCall.callId || -1;\n\n                return aId < bId ? -1 : 1;\n            });\n        },\n\n        log: function () {},\n\n        logError: function (label, err) {\n            var msg = label + \" threw exception: \";\n            sinon.log(msg + \"[\" + err.name + \"] \" + err.message);\n            if (err.stack) { sinon.log(err.stack); }\n\n            setTimeout(function () {\n                err.message = msg + err.message;\n                throw err;\n            }, 0);\n        },\n\n        typeOf: function (value) {\n            if (value === null) {\n                return \"null\";\n            }\n            else if (value === undefined) {\n                return \"undefined\";\n            }\n            var string = Object.prototype.toString.call(value);\n            return string.substring(8, string.length - 1).toLowerCase();\n        },\n\n        createStubInstance: function (constructor) {\n            if (typeof constructor !== \"function\") {\n                throw new TypeError(\"The constructor should be a function.\");\n            }\n            return sinon.stub(sinon.create(constructor.prototype));\n        },\n\n        restore: function (object) {\n            if (object !== null && typeof object === \"object\") {\n                for (var prop in object) {\n                    if (isRestorable(object[prop])) {\n                        object[prop].restore();\n                    }\n                }\n            }\n            else if (isRestorable(object)) {\n                object.restore();\n            }\n        }\n    };\n\n    var isNode = typeof module !== \"undefined\" && module.exports;\n    var isAMD = typeof define === 'function' && typeof define.amd === 'object' && define.amd;\n\n    if (isAMD) {\n        define(function(){\n            return sinon;\n        });\n    } else if (isNode) {\n        try {\n            formatio = require(\"formatio\");\n        } catch (e) {}\n        module.exports = sinon;\n        module.exports.spy = require(\"./sinon/spy\");\n        module.exports.spyCall = require(\"./sinon/call\");\n        module.exports.behavior = require(\"./sinon/behavior\");\n        module.exports.stub = require(\"./sinon/stub\");\n        module.exports.mock = require(\"./sinon/mock\");\n        module.exports.collection = require(\"./sinon/collection\");\n        module.exports.assert = require(\"./sinon/assert\");\n        module.exports.sandbox = require(\"./sinon/sandbox\");\n        module.exports.test = require(\"./sinon/test\");\n        module.exports.testCase = require(\"./sinon/test_case\");\n        module.exports.assert = require(\"./sinon/assert\");\n        module.exports.match = require(\"./sinon/match\");\n    }\n\n    if (formatio) {\n        var formatter = formatio.configure({ quoteStrings: false });\n        sinon.format = function () {\n            return formatter.ascii.apply(formatter, arguments);\n        };\n    } else if (isNode) {\n        try {\n            var util = require(\"util\");\n            sinon.format = function (value) {\n                return typeof value == \"object\" && value.toString === Object.prototype.toString ? util.inspect(value) : value;\n            };\n        } catch (e) {\n            /* Node, but no util module - would be very old, but better safe than\n             sorry */\n        }\n    }\n\n    return sinon;\n}(typeof formatio == \"object\" && formatio));\n\n/* @depend ../sinon.js */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n * Match functions\n *\n * @author Maximilian Antoni (mail@maxantoni.de)\n * @license BSD\n *\n * Copyright (c) 2012 Maximilian Antoni\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function assertType(value, type, name) {\n        var actual = sinon.typeOf(value);\n        if (actual !== type) {\n            throw new TypeError(\"Expected type of \" + name + \" to be \" +\n                type + \", but was \" + actual);\n        }\n    }\n\n    var matcher = {\n        toString: function () {\n            return this.message;\n        }\n    };\n\n    function isMatcher(object) {\n        return matcher.isPrototypeOf(object);\n    }\n\n    function matchObject(expectation, actual) {\n        if (actual === null || actual === undefined) {\n            return false;\n        }\n        for (var key in expectation) {\n            if (expectation.hasOwnProperty(key)) {\n                var exp = expectation[key];\n                var act = actual[key];\n                if (match.isMatcher(exp)) {\n                    if (!exp.test(act)) {\n                        return false;\n                    }\n                } else if (sinon.typeOf(exp) === \"object\") {\n                    if (!matchObject(exp, act)) {\n                        return false;\n                    }\n                } else if (!sinon.deepEqual(exp, act)) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    matcher.or = function (m2) {\n        if (!arguments.length) {\n            throw new TypeError(\"Matcher expected\");\n        } else if (!isMatcher(m2)) {\n            m2 = match(m2);\n        }\n        var m1 = this;\n        var or = sinon.create(matcher);\n        or.test = function (actual) {\n            return m1.test(actual) || m2.test(actual);\n        };\n        or.message = m1.message + \".or(\" + m2.message + \")\";\n        return or;\n    };\n\n    matcher.and = function (m2) {\n        if (!arguments.length) {\n            throw new TypeError(\"Matcher expected\");\n        } else if (!isMatcher(m2)) {\n            m2 = match(m2);\n        }\n        var m1 = this;\n        var and = sinon.create(matcher);\n        and.test = function (actual) {\n            return m1.test(actual) && m2.test(actual);\n        };\n        and.message = m1.message + \".and(\" + m2.message + \")\";\n        return and;\n    };\n\n    var match = function (expectation, message) {\n        var m = sinon.create(matcher);\n        var type = sinon.typeOf(expectation);\n        switch (type) {\n        case \"object\":\n            if (typeof expectation.test === \"function\") {\n                m.test = function (actual) {\n                    return expectation.test(actual) === true;\n                };\n                m.message = \"match(\" + sinon.functionName(expectation.test) + \")\";\n                return m;\n            }\n            var str = [];\n            for (var key in expectation) {\n                if (expectation.hasOwnProperty(key)) {\n                    str.push(key + \": \" + expectation[key]);\n                }\n            }\n            m.test = function (actual) {\n                return matchObject(expectation, actual);\n            };\n            m.message = \"match(\" + str.join(\", \") + \")\";\n            break;\n        case \"number\":\n            m.test = function (actual) {\n                return expectation == actual;\n            };\n            break;\n        case \"string\":\n            m.test = function (actual) {\n                if (typeof actual !== \"string\") {\n                    return false;\n                }\n                return actual.indexOf(expectation) !== -1;\n            };\n            m.message = \"match(\\\"\" + expectation + \"\\\")\";\n            break;\n        case \"regexp\":\n            m.test = function (actual) {\n                if (typeof actual !== \"string\") {\n                    return false;\n                }\n                return expectation.test(actual);\n            };\n            break;\n        case \"function\":\n            m.test = expectation;\n            if (message) {\n                m.message = message;\n            } else {\n                m.message = \"match(\" + sinon.functionName(expectation) + \")\";\n            }\n            break;\n        default:\n            m.test = function (actual) {\n              return sinon.deepEqual(expectation, actual);\n            };\n        }\n        if (!m.message) {\n            m.message = \"match(\" + expectation + \")\";\n        }\n        return m;\n    };\n\n    match.isMatcher = isMatcher;\n\n    match.any = match(function () {\n        return true;\n    }, \"any\");\n\n    match.defined = match(function (actual) {\n        return actual !== null && actual !== undefined;\n    }, \"defined\");\n\n    match.truthy = match(function (actual) {\n        return !!actual;\n    }, \"truthy\");\n\n    match.falsy = match(function (actual) {\n        return !actual;\n    }, \"falsy\");\n\n    match.same = function (expectation) {\n        return match(function (actual) {\n            return expectation === actual;\n        }, \"same(\" + expectation + \")\");\n    };\n\n    match.typeOf = function (type) {\n        assertType(type, \"string\", \"type\");\n        return match(function (actual) {\n            return sinon.typeOf(actual) === type;\n        }, \"typeOf(\\\"\" + type + \"\\\")\");\n    };\n\n    match.instanceOf = function (type) {\n        assertType(type, \"function\", \"type\");\n        return match(function (actual) {\n            return actual instanceof type;\n        }, \"instanceOf(\" + sinon.functionName(type) + \")\");\n    };\n\n    function createPropertyMatcher(propertyTest, messagePrefix) {\n        return function (property, value) {\n            assertType(property, \"string\", \"property\");\n            var onlyProperty = arguments.length === 1;\n            var message = messagePrefix + \"(\\\"\" + property + \"\\\"\";\n            if (!onlyProperty) {\n                message += \", \" + value;\n            }\n            message += \")\";\n            return match(function (actual) {\n                if (actual === undefined || actual === null ||\n                        !propertyTest(actual, property)) {\n                    return false;\n                }\n                return onlyProperty || sinon.deepEqual(value, actual[property]);\n            }, message);\n        };\n    }\n\n    match.has = createPropertyMatcher(function (actual, property) {\n        if (typeof actual === \"object\") {\n            return property in actual;\n        }\n        return actual[property] !== undefined;\n    }, \"has\");\n\n    match.hasOwn = createPropertyMatcher(function (actual, property) {\n        return actual.hasOwnProperty(property);\n    }, \"hasOwn\");\n\n    match.bool = match.typeOf(\"boolean\");\n    match.number = match.typeOf(\"number\");\n    match.string = match.typeOf(\"string\");\n    match.object = match.typeOf(\"object\");\n    match.func = match.typeOf(\"function\");\n    match.array = match.typeOf(\"array\");\n    match.regexp = match.typeOf(\"regexp\");\n    match.date = match.typeOf(\"date\");\n\n    if (commonJSModule) {\n        module.exports = match;\n    } else {\n        sinon.match = match;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n  * @depend ../sinon.js\n  * @depend match.js\n  */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n  * Spy calls\n  *\n  * @author Christian Johansen (christian@cjohansen.no)\n  * @author Maximilian Antoni (mail@maxantoni.de)\n  * @license BSD\n  *\n  * Copyright (c) 2010-2013 Christian Johansen\n  * Copyright (c) 2013 Maximilian Antoni\n  */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function throwYieldError(proxy, text, args) {\n        var msg = sinon.functionName(proxy) + text;\n        if (args.length) {\n            msg += \" Received [\" + slice.call(args).join(\", \") + \"]\";\n        }\n        throw new Error(msg);\n    }\n\n    var slice = Array.prototype.slice;\n\n    var callProto = {\n        calledOn: function calledOn(thisValue) {\n            if (sinon.match && sinon.match.isMatcher(thisValue)) {\n                return thisValue.test(this.thisValue);\n            }\n            return this.thisValue === thisValue;\n        },\n\n        calledWith: function calledWith() {\n            for (var i = 0, l = arguments.length; i < l; i += 1) {\n                if (!sinon.deepEqual(arguments[i], this.args[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        calledWithMatch: function calledWithMatch() {\n            for (var i = 0, l = arguments.length; i < l; i += 1) {\n                var actual = this.args[i];\n                var expectation = arguments[i];\n                if (!sinon.match || !sinon.match(expectation).test(actual)) {\n                    return false;\n                }\n            }\n            return true;\n        },\n\n        calledWithExactly: function calledWithExactly() {\n            return arguments.length == this.args.length &&\n                this.calledWith.apply(this, arguments);\n        },\n\n        notCalledWith: function notCalledWith() {\n            return !this.calledWith.apply(this, arguments);\n        },\n\n        notCalledWithMatch: function notCalledWithMatch() {\n            return !this.calledWithMatch.apply(this, arguments);\n        },\n\n        returned: function returned(value) {\n            return sinon.deepEqual(value, this.returnValue);\n        },\n\n        threw: function threw(error) {\n            if (typeof error === \"undefined\" || !this.exception) {\n                return !!this.exception;\n            }\n\n            return this.exception === error || this.exception.name === error;\n        },\n\n        calledWithNew: function calledWithNew() {\n            return this.proxy.prototype && this.thisValue instanceof this.proxy;\n        },\n\n        calledBefore: function (other) {\n            return this.callId < other.callId;\n        },\n\n        calledAfter: function (other) {\n            return this.callId > other.callId;\n        },\n\n        callArg: function (pos) {\n            this.args[pos]();\n        },\n\n        callArgOn: function (pos, thisValue) {\n            this.args[pos].apply(thisValue);\n        },\n\n        callArgWith: function (pos) {\n            this.callArgOnWith.apply(this, [pos, null].concat(slice.call(arguments, 1)));\n        },\n\n        callArgOnWith: function (pos, thisValue) {\n            var args = slice.call(arguments, 2);\n            this.args[pos].apply(thisValue, args);\n        },\n\n        \"yield\": function () {\n            this.yieldOn.apply(this, [null].concat(slice.call(arguments, 0)));\n        },\n\n        yieldOn: function (thisValue) {\n            var args = this.args;\n            for (var i = 0, l = args.length; i < l; ++i) {\n                if (typeof args[i] === \"function\") {\n                    args[i].apply(thisValue, slice.call(arguments, 1));\n                    return;\n                }\n            }\n            throwYieldError(this.proxy, \" cannot yield since no callback was passed.\", args);\n        },\n\n        yieldTo: function (prop) {\n            this.yieldToOn.apply(this, [prop, null].concat(slice.call(arguments, 1)));\n        },\n\n        yieldToOn: function (prop, thisValue) {\n            var args = this.args;\n            for (var i = 0, l = args.length; i < l; ++i) {\n                if (args[i] && typeof args[i][prop] === \"function\") {\n                    args[i][prop].apply(thisValue, slice.call(arguments, 2));\n                    return;\n                }\n            }\n            throwYieldError(this.proxy, \" cannot yield to '\" + prop +\n                \"' since no callback was passed.\", args);\n        },\n\n        toString: function () {\n            var callStr = this.proxy.toString() + \"(\";\n            var args = [];\n\n            for (var i = 0, l = this.args.length; i < l; ++i) {\n                args.push(sinon.format(this.args[i]));\n            }\n\n            callStr = callStr + args.join(\", \") + \")\";\n\n            if (typeof this.returnValue != \"undefined\") {\n                callStr += \" => \" + sinon.format(this.returnValue);\n            }\n\n            if (this.exception) {\n                callStr += \" !\" + this.exception.name;\n\n                if (this.exception.message) {\n                    callStr += \"(\" + this.exception.message + \")\";\n                }\n            }\n\n            return callStr;\n        }\n    };\n\n    callProto.invokeCallback = callProto.yield;\n\n    function createSpyCall(spy, thisValue, args, returnValue, exception, id) {\n        if (typeof id !== \"number\") {\n            throw new TypeError(\"Call id is not a number\");\n        }\n        var proxyCall = sinon.create(callProto);\n        proxyCall.proxy = spy;\n        proxyCall.thisValue = thisValue;\n        proxyCall.args = args;\n        proxyCall.returnValue = returnValue;\n        proxyCall.exception = exception;\n        proxyCall.callId = id;\n\n        return proxyCall;\n    }\n    createSpyCall.toString = callProto.toString; // used by mocks\n\n    if (commonJSModule) {\n        module.exports = createSpyCall;\n    } else {\n        sinon.spyCall = createSpyCall;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n\n/**\n  * @depend ../sinon.js\n  * @depend call.js\n  */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n  * Spy functions\n  *\n  * @author Christian Johansen (christian@cjohansen.no)\n  * @license BSD\n  *\n  * Copyright (c) 2010-2013 Christian Johansen\n  */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n    var push = Array.prototype.push;\n    var slice = Array.prototype.slice;\n    var callId = 0;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function spy(object, property) {\n        if (!property && typeof object == \"function\") {\n            return spy.create(object);\n        }\n\n        if (!object && !property) {\n            return spy.create(function () { });\n        }\n\n        var method = object[property];\n        return sinon.wrapMethod(object, property, spy.create(method));\n    }\n\n    function matchingFake(fakes, args, strict) {\n        if (!fakes) {\n            return;\n        }\n\n        for (var i = 0, l = fakes.length; i < l; i++) {\n            if (fakes[i].matches(args, strict)) {\n                return fakes[i];\n            }\n        }\n    }\n\n    function incrementCallCount() {\n        this.called = true;\n        this.callCount += 1;\n        this.notCalled = false;\n        this.calledOnce = this.callCount == 1;\n        this.calledTwice = this.callCount == 2;\n        this.calledThrice = this.callCount == 3;\n    }\n\n    function createCallProperties() {\n        this.firstCall = this.getCall(0);\n        this.secondCall = this.getCall(1);\n        this.thirdCall = this.getCall(2);\n        this.lastCall = this.getCall(this.callCount - 1);\n    }\n\n    var vars = \"a,b,c,d,e,f,g,h,i,j,k,l\";\n    function createProxy(func) {\n        // Retain the function length:\n        var p;\n        if (func.length) {\n            eval(\"p = (function proxy(\" + vars.substring(0, func.length * 2 - 1) +\n                \") { return p.invoke(func, this, slice.call(arguments)); });\");\n        }\n        else {\n            p = function proxy() {\n                return p.invoke(func, this, slice.call(arguments));\n            };\n        }\n        return p;\n    }\n\n    var uuid = 0;\n\n    // Public API\n    var spyApi = {\n        reset: function () {\n            this.called = false;\n            this.notCalled = true;\n            this.calledOnce = false;\n            this.calledTwice = false;\n            this.calledThrice = false;\n            this.callCount = 0;\n            this.firstCall = null;\n            this.secondCall = null;\n            this.thirdCall = null;\n            this.lastCall = null;\n            this.args = [];\n            this.returnValues = [];\n            this.thisValues = [];\n            this.exceptions = [];\n            this.callIds = [];\n            if (this.fakes) {\n                for (var i = 0; i < this.fakes.length; i++) {\n                    this.fakes[i].reset();\n                }\n            }\n        },\n\n        create: function create(func) {\n            var name;\n\n            if (typeof func != \"function\") {\n                func = function () { };\n            } else {\n                name = sinon.functionName(func);\n            }\n\n            var proxy = createProxy(func);\n\n            sinon.extend(proxy, spy);\n            delete proxy.create;\n            sinon.extend(proxy, func);\n\n            proxy.reset();\n            proxy.prototype = func.prototype;\n            proxy.displayName = name || \"spy\";\n            proxy.toString = sinon.functionToString;\n            proxy._create = sinon.spy.create;\n            proxy.id = \"spy#\" + uuid++;\n\n            return proxy;\n        },\n\n        invoke: function invoke(func, thisValue, args) {\n            var matching = matchingFake(this.fakes, args);\n            var exception, returnValue;\n\n            incrementCallCount.call(this);\n            push.call(this.thisValues, thisValue);\n            push.call(this.args, args);\n            push.call(this.callIds, callId++);\n\n            try {\n                if (matching) {\n                    returnValue = matching.invoke(func, thisValue, args);\n                } else {\n                    returnValue = (this.func || func).apply(thisValue, args);\n                }\n\n                var thisCall = this.getCall(this.callCount - 1);\n                if (thisCall.calledWithNew() && typeof returnValue !== 'object') {\n                    returnValue = thisValue;\n                }\n            } catch (e) {\n                exception = e;\n            }\n\n            push.call(this.exceptions, exception);\n            push.call(this.returnValues, returnValue);\n\n            createCallProperties.call(this);\n\n            if (exception !== undefined) {\n                throw exception;\n            }\n\n            return returnValue;\n        },\n\n        getCall: function getCall(i) {\n            if (i < 0 || i >= this.callCount) {\n                return null;\n            }\n\n            return sinon.spyCall(this, this.thisValues[i], this.args[i],\n                                    this.returnValues[i], this.exceptions[i],\n                                    this.callIds[i]);\n        },\n\n        getCalls: function () {\n            var calls = [];\n            var i;\n\n            for (i = 0; i < this.callCount; i++) {\n                calls.push(this.getCall(i));\n            }\n\n            return calls;\n        },\n\n        calledBefore: function calledBefore(spyFn) {\n            if (!this.called) {\n                return false;\n            }\n\n            if (!spyFn.called) {\n                return true;\n            }\n\n            return this.callIds[0] < spyFn.callIds[spyFn.callIds.length - 1];\n        },\n\n        calledAfter: function calledAfter(spyFn) {\n            if (!this.called || !spyFn.called) {\n                return false;\n            }\n\n            return this.callIds[this.callCount - 1] > spyFn.callIds[spyFn.callCount - 1];\n        },\n\n        withArgs: function () {\n            var args = slice.call(arguments);\n\n            if (this.fakes) {\n                var match = matchingFake(this.fakes, args, true);\n\n                if (match) {\n                    return match;\n                }\n            } else {\n                this.fakes = [];\n            }\n\n            var original = this;\n            var fake = this._create();\n            fake.matchingAguments = args;\n            fake.parent = this;\n            push.call(this.fakes, fake);\n\n            fake.withArgs = function () {\n                return original.withArgs.apply(original, arguments);\n            };\n\n            for (var i = 0; i < this.args.length; i++) {\n                if (fake.matches(this.args[i])) {\n                    incrementCallCount.call(fake);\n                    push.call(fake.thisValues, this.thisValues[i]);\n                    push.call(fake.args, this.args[i]);\n                    push.call(fake.returnValues, this.returnValues[i]);\n                    push.call(fake.exceptions, this.exceptions[i]);\n                    push.call(fake.callIds, this.callIds[i]);\n                }\n            }\n            createCallProperties.call(fake);\n\n            return fake;\n        },\n\n        matches: function (args, strict) {\n            var margs = this.matchingAguments;\n\n            if (margs.length <= args.length &&\n                sinon.deepEqual(margs, args.slice(0, margs.length))) {\n                return !strict || margs.length == args.length;\n            }\n        },\n\n        printf: function (format) {\n            var spy = this;\n            var args = slice.call(arguments, 1);\n            var formatter;\n\n            return (format || \"\").replace(/%(.)/g, function (match, specifyer) {\n                formatter = spyApi.formatters[specifyer];\n\n                if (typeof formatter == \"function\") {\n                    return formatter.call(null, spy, args);\n                } else if (!isNaN(parseInt(specifyer, 10))) {\n                    return sinon.format(args[specifyer - 1]);\n                }\n\n                return \"%\" + specifyer;\n            });\n        }\n    };\n\n    function delegateToCalls(method, matchAny, actual, notCalled) {\n        spyApi[method] = function () {\n            if (!this.called) {\n                if (notCalled) {\n                    return notCalled.apply(this, arguments);\n                }\n                return false;\n            }\n\n            var currentCall;\n            var matches = 0;\n\n            for (var i = 0, l = this.callCount; i < l; i += 1) {\n                currentCall = this.getCall(i);\n\n                if (currentCall[actual || method].apply(currentCall, arguments)) {\n                    matches += 1;\n\n                    if (matchAny) {\n                        return true;\n                    }\n                }\n            }\n\n            return matches === this.callCount;\n        };\n    }\n\n    delegateToCalls(\"calledOn\", true);\n    delegateToCalls(\"alwaysCalledOn\", false, \"calledOn\");\n    delegateToCalls(\"calledWith\", true);\n    delegateToCalls(\"calledWithMatch\", true);\n    delegateToCalls(\"alwaysCalledWith\", false, \"calledWith\");\n    delegateToCalls(\"alwaysCalledWithMatch\", false, \"calledWithMatch\");\n    delegateToCalls(\"calledWithExactly\", true);\n    delegateToCalls(\"alwaysCalledWithExactly\", false, \"calledWithExactly\");\n    delegateToCalls(\"neverCalledWith\", false, \"notCalledWith\",\n        function () { return true; });\n    delegateToCalls(\"neverCalledWithMatch\", false, \"notCalledWithMatch\",\n        function () { return true; });\n    delegateToCalls(\"threw\", true);\n    delegateToCalls(\"alwaysThrew\", false, \"threw\");\n    delegateToCalls(\"returned\", true);\n    delegateToCalls(\"alwaysReturned\", false, \"returned\");\n    delegateToCalls(\"calledWithNew\", true);\n    delegateToCalls(\"alwaysCalledWithNew\", false, \"calledWithNew\");\n    delegateToCalls(\"callArg\", false, \"callArgWith\", function () {\n        throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n    });\n    spyApi.callArgWith = spyApi.callArg;\n    delegateToCalls(\"callArgOn\", false, \"callArgOnWith\", function () {\n        throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n    });\n    spyApi.callArgOnWith = spyApi.callArgOn;\n    delegateToCalls(\"yield\", false, \"yield\", function () {\n        throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n    });\n    // \"invokeCallback\" is an alias for \"yield\" since \"yield\" is invalid in strict mode.\n    spyApi.invokeCallback = spyApi.yield;\n    delegateToCalls(\"yieldOn\", false, \"yieldOn\", function () {\n        throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n    });\n    delegateToCalls(\"yieldTo\", false, \"yieldTo\", function (property) {\n        throw new Error(this.toString() + \" cannot yield to '\" + property +\n            \"' since it was not yet invoked.\");\n    });\n    delegateToCalls(\"yieldToOn\", false, \"yieldToOn\", function (property) {\n        throw new Error(this.toString() + \" cannot yield to '\" + property +\n            \"' since it was not yet invoked.\");\n    });\n\n    spyApi.formatters = {\n        \"c\": function (spy) {\n            return sinon.timesInWords(spy.callCount);\n        },\n\n        \"n\": function (spy) {\n            return spy.toString();\n        },\n\n        \"C\": function (spy) {\n            var calls = [];\n\n            for (var i = 0, l = spy.callCount; i < l; ++i) {\n                var stringifiedCall = \"    \" + spy.getCall(i).toString();\n                if (/\\n/.test(calls[i - 1])) {\n                    stringifiedCall = \"\\n\" + stringifiedCall;\n                }\n                push.call(calls, stringifiedCall);\n            }\n\n            return calls.length > 0 ? \"\\n\" + calls.join(\"\\n\") : \"\";\n        },\n\n        \"t\": function (spy) {\n            var objects = [];\n\n            for (var i = 0, l = spy.callCount; i < l; ++i) {\n                push.call(objects, sinon.format(spy.thisValues[i]));\n            }\n\n            return objects.join(\", \");\n        },\n\n        \"*\": function (spy, args) {\n            var formatted = [];\n\n            for (var i = 0, l = args.length; i < l; ++i) {\n                push.call(formatted, sinon.format(args[i]));\n            }\n\n            return formatted.join(\", \");\n        }\n    };\n\n    sinon.extend(spy, spyApi);\n\n    spy.spyCall = sinon.spyCall;\n\n    if (commonJSModule) {\n        module.exports = spy;\n    } else {\n        sinon.spy = spy;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n */\n/*jslint eqeqeq: false, onevar: false*/\n/*global module, require, sinon, process, setImmediate, setTimeout*/\n/**\n * Stub behavior\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @author Tim Fischbach (mail@timfischbach.de)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    var slice = Array.prototype.slice;\n    var join = Array.prototype.join;\n    var proto;\n\n    var nextTick = (function () {\n        if (typeof process === \"object\" && typeof process.nextTick === \"function\") {\n            return process.nextTick;\n        } else if (typeof setImmediate === \"function\") {\n            return setImmediate;\n        } else {\n            return function (callback) {\n                setTimeout(callback, 0);\n            };\n        }\n    })();\n\n    function throwsException(error, message) {\n        if (typeof error == \"string\") {\n            this.exception = new Error(message || \"\");\n            this.exception.name = error;\n        } else if (!error) {\n            this.exception = new Error(\"Error\");\n        } else {\n            this.exception = error;\n        }\n\n        return this;\n    }\n\n    function getCallback(behavior, args) {\n        var callArgAt = behavior.callArgAt;\n\n        if (callArgAt < 0) {\n            var callArgProp = behavior.callArgProp;\n\n            for (var i = 0, l = args.length; i < l; ++i) {\n                if (!callArgProp && typeof args[i] == \"function\") {\n                    return args[i];\n                }\n\n                if (callArgProp && args[i] &&\n                    typeof args[i][callArgProp] == \"function\") {\n                    return args[i][callArgProp];\n                }\n            }\n\n            return null;\n        }\n\n        return args[callArgAt];\n    }\n\n    function getCallbackError(behavior, func, args) {\n        if (behavior.callArgAt < 0) {\n            var msg;\n\n            if (behavior.callArgProp) {\n                msg = sinon.functionName(behavior.stub) +\n                    \" expected to yield to '\" + behavior.callArgProp +\n                    \"', but no object with such a property was passed.\";\n            } else {\n                msg = sinon.functionName(behavior.stub) +\n                    \" expected to yield, but no callback was passed.\";\n            }\n\n            if (args.length > 0) {\n                msg += \" Received [\" + join.call(args, \", \") + \"]\";\n            }\n\n            return msg;\n        }\n\n        return \"argument at index \" + behavior.callArgAt + \" is not a function: \" + func;\n    }\n\n    function callCallback(behavior, args) {\n        if (typeof behavior.callArgAt == \"number\") {\n            var func = getCallback(behavior, args);\n\n            if (typeof func != \"function\") {\n                throw new TypeError(getCallbackError(behavior, func, args));\n            }\n\n            if (behavior.callbackAsync) {\n                nextTick(function() {\n                    func.apply(behavior.callbackContext, behavior.callbackArguments);\n                });\n            } else {\n                func.apply(behavior.callbackContext, behavior.callbackArguments);\n            }\n        }\n    }\n\n    proto = {\n        create: function(stub) {\n            var behavior = sinon.extend({}, sinon.behavior);\n            delete behavior.create;\n            behavior.stub = stub;\n\n            return behavior;\n        },\n\n        isPresent: function() {\n            return (typeof this.callArgAt == 'number' ||\n                    this.exception ||\n                    typeof this.returnArgAt == 'number' ||\n                    this.returnThis ||\n                    this.returnValueDefined);\n        },\n\n        invoke: function(context, args) {\n            callCallback(this, args);\n\n            if (this.exception) {\n                throw this.exception;\n            } else if (typeof this.returnArgAt == 'number') {\n                return args[this.returnArgAt];\n            } else if (this.returnThis) {\n                return context;\n            }\n\n            return this.returnValue;\n        },\n\n        onCall: function(index) {\n            return this.stub.onCall(index);\n        },\n\n        onFirstCall: function() {\n            return this.stub.onFirstCall();\n        },\n\n        onSecondCall: function() {\n            return this.stub.onSecondCall();\n        },\n\n        onThirdCall: function() {\n            return this.stub.onThirdCall();\n        },\n\n        withArgs: function(/* arguments */) {\n            throw new Error('Defining a stub by invoking \"stub.onCall(...).withArgs(...)\" is not supported. ' +\n                            'Use \"stub.withArgs(...).onCall(...)\" to define sequential behavior for calls with certain arguments.');\n        },\n\n        callsArg: function callsArg(pos) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n\n            this.callArgAt = pos;\n            this.callbackArguments = [];\n            this.callbackContext = undefined;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        callsArgOn: function callsArgOn(pos, context) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n            if (typeof context != \"object\") {\n                throw new TypeError(\"argument context is not an object\");\n            }\n\n            this.callArgAt = pos;\n            this.callbackArguments = [];\n            this.callbackContext = context;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        callsArgWith: function callsArgWith(pos) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n\n            this.callArgAt = pos;\n            this.callbackArguments = slice.call(arguments, 1);\n            this.callbackContext = undefined;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        callsArgOnWith: function callsArgWith(pos, context) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n            if (typeof context != \"object\") {\n                throw new TypeError(\"argument context is not an object\");\n            }\n\n            this.callArgAt = pos;\n            this.callbackArguments = slice.call(arguments, 2);\n            this.callbackContext = context;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        yields: function () {\n            this.callArgAt = -1;\n            this.callbackArguments = slice.call(arguments, 0);\n            this.callbackContext = undefined;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        yieldsOn: function (context) {\n            if (typeof context != \"object\") {\n                throw new TypeError(\"argument context is not an object\");\n            }\n\n            this.callArgAt = -1;\n            this.callbackArguments = slice.call(arguments, 1);\n            this.callbackContext = context;\n            this.callArgProp = undefined;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        yieldsTo: function (prop) {\n            this.callArgAt = -1;\n            this.callbackArguments = slice.call(arguments, 1);\n            this.callbackContext = undefined;\n            this.callArgProp = prop;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n        yieldsToOn: function (prop, context) {\n            if (typeof context != \"object\") {\n                throw new TypeError(\"argument context is not an object\");\n            }\n\n            this.callArgAt = -1;\n            this.callbackArguments = slice.call(arguments, 2);\n            this.callbackContext = context;\n            this.callArgProp = prop;\n            this.callbackAsync = false;\n\n            return this;\n        },\n\n\n        \"throws\": throwsException,\n        throwsException: throwsException,\n\n        returns: function returns(value) {\n            this.returnValue = value;\n            this.returnValueDefined = true;\n\n            return this;\n        },\n\n        returnsArg: function returnsArg(pos) {\n            if (typeof pos != \"number\") {\n                throw new TypeError(\"argument index is not number\");\n            }\n\n            this.returnArgAt = pos;\n\n            return this;\n        },\n\n        returnsThis: function returnsThis() {\n            this.returnThis = true;\n\n            return this;\n        }\n    };\n\n    // create asynchronous versions of callsArg* and yields* methods\n    for (var method in proto) {\n        // need to avoid creating anotherasync versions of the newly added async methods\n        if (proto.hasOwnProperty(method) &&\n            method.match(/^(callsArg|yields)/) &&\n            !method.match(/Async/)) {\n            proto[method + 'Async'] = (function (syncFnName) {\n                return function () {\n                    var result = this[syncFnName].apply(this, arguments);\n                    this.callbackAsync = true;\n                    return result;\n                };\n            })(method);\n        }\n    }\n\n    if (commonJSModule) {\n        module.exports = proto;\n    } else {\n        sinon.behavior = proto;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n/**\n * @depend ../sinon.js\n * @depend spy.js\n * @depend behavior.js\n */\n/*jslint eqeqeq: false, onevar: false*/\n/*global module, require, sinon*/\n/**\n * Stub functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function stub(object, property, func) {\n        if (!!func && typeof func != \"function\") {\n            throw new TypeError(\"Custom stub should be function\");\n        }\n\n        var wrapper;\n\n        if (func) {\n            wrapper = sinon.spy && sinon.spy.create ? sinon.spy.create(func) : func;\n        } else {\n            wrapper = stub.create();\n        }\n\n        if (!object && typeof property === \"undefined\") {\n            return sinon.stub.create();\n        }\n\n        if (typeof property === \"undefined\" && typeof object == \"object\") {\n            for (var prop in object) {\n                if (typeof object[prop] === \"function\") {\n                    stub(object, prop);\n                }\n            }\n\n            return object;\n        }\n\n        return sinon.wrapMethod(object, property, wrapper);\n    }\n\n    function getDefaultBehavior(stub) {\n        return stub.defaultBehavior || getParentBehaviour(stub) || sinon.behavior.create(stub);\n    }\n\n    function getParentBehaviour(stub) {\n        return (stub.parent && getCurrentBehavior(stub.parent));\n    }\n\n    function getCurrentBehavior(stub) {\n        var behavior = stub.behaviors[stub.callCount - 1];\n        return behavior && behavior.isPresent() ? behavior : getDefaultBehavior(stub);\n    }\n\n    var uuid = 0;\n\n    sinon.extend(stub, (function () {\n        var proto = {\n            create: function create() {\n                var functionStub = function () {\n                    return getCurrentBehavior(functionStub).invoke(this, arguments);\n                };\n\n                functionStub.id = \"stub#\" + uuid++;\n                var orig = functionStub;\n                functionStub = sinon.spy.create(functionStub);\n                functionStub.func = orig;\n\n                sinon.extend(functionStub, stub);\n                functionStub._create = sinon.stub.create;\n                functionStub.displayName = \"stub\";\n                functionStub.toString = sinon.functionToString;\n\n                functionStub.defaultBehavior = null;\n                functionStub.behaviors = [];\n\n                return functionStub;\n            },\n\n            resetBehavior: function () {\n                var i;\n\n                this.defaultBehavior = null;\n                this.behaviors = [];\n\n                delete this.returnValue;\n                delete this.returnArgAt;\n                this.returnThis = false;\n\n                if (this.fakes) {\n                    for (i = 0; i < this.fakes.length; i++) {\n                        this.fakes[i].resetBehavior();\n                    }\n                }\n            },\n\n            onCall: function(index) {\n                if (!this.behaviors[index]) {\n                    this.behaviors[index] = sinon.behavior.create(this);\n                }\n\n                return this.behaviors[index];\n            },\n\n            onFirstCall: function() {\n                return this.onCall(0);\n            },\n\n            onSecondCall: function() {\n                return this.onCall(1);\n            },\n\n            onThirdCall: function() {\n                return this.onCall(2);\n            }\n        };\n\n        for (var method in sinon.behavior) {\n            if (sinon.behavior.hasOwnProperty(method) &&\n                !proto.hasOwnProperty(method) &&\n                method != 'create' &&\n                method != 'withArgs' &&\n                method != 'invoke') {\n                proto[method] = (function(behaviorMethod) {\n                    return function() {\n                        this.defaultBehavior = this.defaultBehavior || sinon.behavior.create(this);\n                        this.defaultBehavior[behaviorMethod].apply(this.defaultBehavior, arguments);\n                        return this;\n                    };\n                }(method));\n            }\n        }\n\n        return proto;\n    }()));\n\n    if (commonJSModule) {\n        module.exports = stub;\n    } else {\n        sinon.stub = stub;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n * @depend stub.js\n */\n/*jslint eqeqeq: false, onevar: false, nomen: false*/\n/*global module, require, sinon*/\n/**\n * Mock functions.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n    var push = [].push;\n    var match;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    match = sinon.match;\n\n    if (!match && commonJSModule) {\n        match = require(\"./match\");\n    }\n\n    function mock(object) {\n        if (!object) {\n            return sinon.expectation.create(\"Anonymous mock\");\n        }\n\n        return mock.create(object);\n    }\n\n    sinon.mock = mock;\n\n    sinon.extend(mock, (function () {\n        function each(collection, callback) {\n            if (!collection) {\n                return;\n            }\n\n            for (var i = 0, l = collection.length; i < l; i += 1) {\n                callback(collection[i]);\n            }\n        }\n\n        return {\n            create: function create(object) {\n                if (!object) {\n                    throw new TypeError(\"object is null\");\n                }\n\n                var mockObject = sinon.extend({}, mock);\n                mockObject.object = object;\n                delete mockObject.create;\n\n                return mockObject;\n            },\n\n            expects: function expects(method) {\n                if (!method) {\n                    throw new TypeError(\"method is falsy\");\n                }\n\n                if (!this.expectations) {\n                    this.expectations = {};\n                    this.proxies = [];\n                }\n\n                if (!this.expectations[method]) {\n                    this.expectations[method] = [];\n                    var mockObject = this;\n\n                    sinon.wrapMethod(this.object, method, function () {\n                        return mockObject.invokeMethod(method, this, arguments);\n                    });\n\n                    push.call(this.proxies, method);\n                }\n\n                var expectation = sinon.expectation.create(method);\n                push.call(this.expectations[method], expectation);\n\n                return expectation;\n            },\n\n            restore: function restore() {\n                var object = this.object;\n\n                each(this.proxies, function (proxy) {\n                    if (typeof object[proxy].restore == \"function\") {\n                        object[proxy].restore();\n                    }\n                });\n            },\n\n            verify: function verify() {\n                var expectations = this.expectations || {};\n                var messages = [], met = [];\n\n                each(this.proxies, function (proxy) {\n                    each(expectations[proxy], function (expectation) {\n                        if (!expectation.met()) {\n                            push.call(messages, expectation.toString());\n                        } else {\n                            push.call(met, expectation.toString());\n                        }\n                    });\n                });\n\n                this.restore();\n\n                if (messages.length > 0) {\n                    sinon.expectation.fail(messages.concat(met).join(\"\\n\"));\n                } else {\n                    sinon.expectation.pass(messages.concat(met).join(\"\\n\"));\n                }\n\n                return true;\n            },\n\n            invokeMethod: function invokeMethod(method, thisValue, args) {\n                var expectations = this.expectations && this.expectations[method];\n                var length = expectations && expectations.length || 0, i;\n\n                for (i = 0; i < length; i += 1) {\n                    if (!expectations[i].met() &&\n                        expectations[i].allowsCall(thisValue, args)) {\n                        return expectations[i].apply(thisValue, args);\n                    }\n                }\n\n                var messages = [], available, exhausted = 0;\n\n                for (i = 0; i < length; i += 1) {\n                    if (expectations[i].allowsCall(thisValue, args)) {\n                        available = available || expectations[i];\n                    } else {\n                        exhausted += 1;\n                    }\n                    push.call(messages, \"    \" + expectations[i].toString());\n                }\n\n                if (exhausted === 0) {\n                    return available.apply(thisValue, args);\n                }\n\n                messages.unshift(\"Unexpected call: \" + sinon.spyCall.toString.call({\n                    proxy: method,\n                    args: args\n                }));\n\n                sinon.expectation.fail(messages.join(\"\\n\"));\n            }\n        };\n    }()));\n\n    var times = sinon.timesInWords;\n\n    sinon.expectation = (function () {\n        var slice = Array.prototype.slice;\n        var _invoke = sinon.spy.invoke;\n\n        function callCountInWords(callCount) {\n            if (callCount == 0) {\n                return \"never called\";\n            } else {\n                return \"called \" + times(callCount);\n            }\n        }\n\n        function expectedCallCountInWords(expectation) {\n            var min = expectation.minCalls;\n            var max = expectation.maxCalls;\n\n            if (typeof min == \"number\" && typeof max == \"number\") {\n                var str = times(min);\n\n                if (min != max) {\n                    str = \"at least \" + str + \" and at most \" + times(max);\n                }\n\n                return str;\n            }\n\n            if (typeof min == \"number\") {\n                return \"at least \" + times(min);\n            }\n\n            return \"at most \" + times(max);\n        }\n\n        function receivedMinCalls(expectation) {\n            var hasMinLimit = typeof expectation.minCalls == \"number\";\n            return !hasMinLimit || expectation.callCount >= expectation.minCalls;\n        }\n\n        function receivedMaxCalls(expectation) {\n            if (typeof expectation.maxCalls != \"number\") {\n                return false;\n            }\n\n            return expectation.callCount == expectation.maxCalls;\n        }\n\n        function verifyMatcher(possibleMatcher, arg){\n            if (match && match.isMatcher(possibleMatcher)) {\n                return possibleMatcher.test(arg);\n            } else {\n                return true;\n            }\n        }\n\n        return {\n            minCalls: 1,\n            maxCalls: 1,\n\n            create: function create(methodName) {\n                var expectation = sinon.extend(sinon.stub.create(), sinon.expectation);\n                delete expectation.create;\n                expectation.method = methodName;\n\n                return expectation;\n            },\n\n            invoke: function invoke(func, thisValue, args) {\n                this.verifyCallAllowed(thisValue, args);\n\n                return _invoke.apply(this, arguments);\n            },\n\n            atLeast: function atLeast(num) {\n                if (typeof num != \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not number\");\n                }\n\n                if (!this.limitsSet) {\n                    this.maxCalls = null;\n                    this.limitsSet = true;\n                }\n\n                this.minCalls = num;\n\n                return this;\n            },\n\n            atMost: function atMost(num) {\n                if (typeof num != \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not number\");\n                }\n\n                if (!this.limitsSet) {\n                    this.minCalls = null;\n                    this.limitsSet = true;\n                }\n\n                this.maxCalls = num;\n\n                return this;\n            },\n\n            never: function never() {\n                return this.exactly(0);\n            },\n\n            once: function once() {\n                return this.exactly(1);\n            },\n\n            twice: function twice() {\n                return this.exactly(2);\n            },\n\n            thrice: function thrice() {\n                return this.exactly(3);\n            },\n\n            exactly: function exactly(num) {\n                if (typeof num != \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not a number\");\n                }\n\n                this.atLeast(num);\n                return this.atMost(num);\n            },\n\n            met: function met() {\n                return !this.failed && receivedMinCalls(this);\n            },\n\n            verifyCallAllowed: function verifyCallAllowed(thisValue, args) {\n                if (receivedMaxCalls(this)) {\n                    this.failed = true;\n                    sinon.expectation.fail(this.method + \" already called \" + times(this.maxCalls));\n                }\n\n                if (\"expectedThis\" in this && this.expectedThis !== thisValue) {\n                    sinon.expectation.fail(this.method + \" called with \" + thisValue + \" as thisValue, expected \" +\n                        this.expectedThis);\n                }\n\n                if (!(\"expectedArguments\" in this)) {\n                    return;\n                }\n\n                if (!args) {\n                    sinon.expectation.fail(this.method + \" received no arguments, expected \" +\n                        sinon.format(this.expectedArguments));\n                }\n\n                if (args.length < this.expectedArguments.length) {\n                    sinon.expectation.fail(this.method + \" received too few arguments (\" + sinon.format(args) +\n                        \"), expected \" + sinon.format(this.expectedArguments));\n                }\n\n                if (this.expectsExactArgCount &&\n                    args.length != this.expectedArguments.length) {\n                    sinon.expectation.fail(this.method + \" received too many arguments (\" + sinon.format(args) +\n                        \"), expected \" + sinon.format(this.expectedArguments));\n                }\n\n                for (var i = 0, l = this.expectedArguments.length; i < l; i += 1) {\n\n                    if (!verifyMatcher(this.expectedArguments[i],args[i])) {\n                        sinon.expectation.fail(this.method + \" received wrong arguments \" + sinon.format(args) +\n                            \", didn't match \" + this.expectedArguments.toString());\n                    }\n\n                    if (!sinon.deepEqual(this.expectedArguments[i], args[i])) {\n                        sinon.expectation.fail(this.method + \" received wrong arguments \" + sinon.format(args) +\n                            \", expected \" + sinon.format(this.expectedArguments));\n                    }\n                }\n            },\n\n            allowsCall: function allowsCall(thisValue, args) {\n                if (this.met() && receivedMaxCalls(this)) {\n                    return false;\n                }\n\n                if (\"expectedThis\" in this && this.expectedThis !== thisValue) {\n                    return false;\n                }\n\n                if (!(\"expectedArguments\" in this)) {\n                    return true;\n                }\n\n                args = args || [];\n\n                if (args.length < this.expectedArguments.length) {\n                    return false;\n                }\n\n                if (this.expectsExactArgCount &&\n                    args.length != this.expectedArguments.length) {\n                    return false;\n                }\n\n                for (var i = 0, l = this.expectedArguments.length; i < l; i += 1) {\n                    if (!verifyMatcher(this.expectedArguments[i],args[i])) {\n                        return false;\n                    }\n\n                    if (!sinon.deepEqual(this.expectedArguments[i], args[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            withArgs: function withArgs() {\n                this.expectedArguments = slice.call(arguments);\n                return this;\n            },\n\n            withExactArgs: function withExactArgs() {\n                this.withArgs.apply(this, arguments);\n                this.expectsExactArgCount = true;\n                return this;\n            },\n\n            on: function on(thisValue) {\n                this.expectedThis = thisValue;\n                return this;\n            },\n\n            toString: function () {\n                var args = (this.expectedArguments || []).slice();\n\n                if (!this.expectsExactArgCount) {\n                    push.call(args, \"[...]\");\n                }\n\n                var callStr = sinon.spyCall.toString.call({\n                    proxy: this.method || \"anonymous mock expectation\",\n                    args: args\n                });\n\n                var message = callStr.replace(\", [...\", \"[, ...\") + \" \" +\n                    expectedCallCountInWords(this);\n\n                if (this.met()) {\n                    return \"Expectation met: \" + message;\n                }\n\n                return \"Expected \" + message + \" (\" +\n                    callCountInWords(this.callCount) + \")\";\n            },\n\n            verify: function verify() {\n                if (!this.met()) {\n                    sinon.expectation.fail(this.toString());\n                } else {\n                    sinon.expectation.pass(this.toString());\n                }\n\n                return true;\n            },\n\n            pass: function(message) {\n              sinon.assert.pass(message);\n            },\n            fail: function (message) {\n                var exception = new Error(message);\n                exception.name = \"ExpectationError\";\n\n                throw exception;\n            }\n        };\n    }());\n\n    if (commonJSModule) {\n        module.exports = mock;\n    } else {\n        sinon.mock = mock;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n * @depend stub.js\n * @depend mock.js\n */\n/*jslint eqeqeq: false, onevar: false, forin: true*/\n/*global module, require, sinon*/\n/**\n * Collections of stubs, spies and mocks.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n    var push = [].push;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function getFakes(fakeCollection) {\n        if (!fakeCollection.fakes) {\n            fakeCollection.fakes = [];\n        }\n\n        return fakeCollection.fakes;\n    }\n\n    function each(fakeCollection, method) {\n        var fakes = getFakes(fakeCollection);\n\n        for (var i = 0, l = fakes.length; i < l; i += 1) {\n            if (typeof fakes[i][method] == \"function\") {\n                fakes[i][method]();\n            }\n        }\n    }\n\n    function compact(fakeCollection) {\n        var fakes = getFakes(fakeCollection);\n        var i = 0;\n        while (i < fakes.length) {\n          fakes.splice(i, 1);\n        }\n    }\n\n    var collection = {\n        verify: function resolve() {\n            each(this, \"verify\");\n        },\n\n        restore: function restore() {\n            each(this, \"restore\");\n            compact(this);\n        },\n\n        verifyAndRestore: function verifyAndRestore() {\n            var exception;\n\n            try {\n                this.verify();\n            } catch (e) {\n                exception = e;\n            }\n\n            this.restore();\n\n            if (exception) {\n                throw exception;\n            }\n        },\n\n        add: function add(fake) {\n            push.call(getFakes(this), fake);\n            return fake;\n        },\n\n        spy: function spy() {\n            return this.add(sinon.spy.apply(sinon, arguments));\n        },\n\n        stub: function stub(object, property, value) {\n            if (property) {\n                var original = object[property];\n\n                if (typeof original != \"function\") {\n                    if (!hasOwnProperty.call(object, property)) {\n                        throw new TypeError(\"Cannot stub non-existent own property \" + property);\n                    }\n\n                    object[property] = value;\n\n                    return this.add({\n                        restore: function () {\n                            object[property] = original;\n                        }\n                    });\n                }\n            }\n            if (!property && !!object && typeof object == \"object\") {\n                var stubbedObj = sinon.stub.apply(sinon, arguments);\n\n                for (var prop in stubbedObj) {\n                    if (typeof stubbedObj[prop] === \"function\") {\n                        this.add(stubbedObj[prop]);\n                    }\n                }\n\n                return stubbedObj;\n            }\n\n            return this.add(sinon.stub.apply(sinon, arguments));\n        },\n\n        mock: function mock() {\n            return this.add(sinon.mock.apply(sinon, arguments));\n        },\n\n        inject: function inject(obj) {\n            var col = this;\n\n            obj.spy = function () {\n                return col.spy.apply(col, arguments);\n            };\n\n            obj.stub = function () {\n                return col.stub.apply(col, arguments);\n            };\n\n            obj.mock = function () {\n                return col.mock.apply(col, arguments);\n            };\n\n            return obj;\n        }\n    };\n\n    if (commonJSModule) {\n        module.exports = collection;\n    } else {\n        sinon.collection = collection;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/*jslint eqeqeq: false, plusplus: false, evil: true, onevar: false, browser: true, forin: false*/\n/*global module, require, window*/\n/**\n * Fake timer API\n * setTimeout\n * setInterval\n * clearTimeout\n * clearInterval\n * tick\n * reset\n * Date\n *\n * Inspired by jsUnitMockTimeOut from JsUnit\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    var sinon = {};\n}\n\n(function (global) {\n    // node expects setTimeout/setInterval to return a fn object w/ .ref()/.unref()\n    // browsers, a number.\n    // see https://github.com/cjohansen/Sinon.JS/pull/436\n    var timeoutResult = setTimeout(function() {}, 0);\n    var addTimerReturnsObject = typeof timeoutResult === 'object';\n    clearTimeout(timeoutResult);\n\n    var id = 1;\n\n    function addTimer(args, recurring) {\n        if (args.length === 0) {\n            throw new Error(\"Function requires at least 1 parameter\");\n        }\n\n        if (typeof args[0] === \"undefined\") {\n            throw new Error(\"Callback must be provided to timer calls\");\n        }\n\n        var toId = id++;\n        var delay = args[1] || 0;\n\n        if (!this.timeouts) {\n            this.timeouts = {};\n        }\n\n        this.timeouts[toId] = {\n            id: toId,\n            func: args[0],\n            callAt: this.now + delay,\n            invokeArgs: Array.prototype.slice.call(args, 2)\n        };\n\n        if (recurring === true) {\n            this.timeouts[toId].interval = delay;\n        }\n\n        if (addTimerReturnsObject) {\n            return {\n                id: toId,\n                ref: function() {},\n                unref: function() {}\n            };\n        }\n        else {\n            return toId;\n        }\n    }\n\n    function parseTime(str) {\n        if (!str) {\n            return 0;\n        }\n\n        var strings = str.split(\":\");\n        var l = strings.length, i = l;\n        var ms = 0, parsed;\n\n        if (l > 3 || !/^(\\d\\d:){0,2}\\d\\d?$/.test(str)) {\n            throw new Error(\"tick only understands numbers and 'h:m:s'\");\n        }\n\n        while (i--) {\n            parsed = parseInt(strings[i], 10);\n\n            if (parsed >= 60) {\n                throw new Error(\"Invalid time \" + str);\n            }\n\n            ms += parsed * Math.pow(60, (l - i - 1));\n        }\n\n        return ms * 1000;\n    }\n\n    function createObject(object) {\n        var newObject;\n\n        if (Object.create) {\n            newObject = Object.create(object);\n        } else {\n            var F = function () {};\n            F.prototype = object;\n            newObject = new F();\n        }\n\n        newObject.Date.clock = newObject;\n        return newObject;\n    }\n\n    sinon.clock = {\n        now: 0,\n\n        create: function create(now) {\n            var clock = createObject(this);\n\n            if (typeof now == \"number\") {\n                clock.now = now;\n            }\n\n            if (!!now && typeof now == \"object\") {\n                throw new TypeError(\"now should be milliseconds since UNIX epoch\");\n            }\n\n            return clock;\n        },\n\n        setTimeout: function setTimeout(callback, timeout) {\n            return addTimer.call(this, arguments, false);\n        },\n\n        clearTimeout: function clearTimeout(timerId) {\n            if (!this.timeouts) {\n                this.timeouts = [];\n            }\n\n            if (timerId in this.timeouts) {\n                delete this.timeouts[timerId];\n            }\n        },\n\n        setInterval: function setInterval(callback, timeout) {\n            return addTimer.call(this, arguments, true);\n        },\n\n        clearInterval: function clearInterval(timerId) {\n            this.clearTimeout(timerId);\n        },\n\n        setImmediate: function setImmediate(callback) {\n            var passThruArgs = Array.prototype.slice.call(arguments, 1);\n\n            return addTimer.call(this, [callback, 0].concat(passThruArgs), false);\n        },\n\n        clearImmediate: function clearImmediate(timerId) {\n            this.clearTimeout(timerId);\n        },\n\n        tick: function tick(ms) {\n            ms = typeof ms == \"number\" ? ms : parseTime(ms);\n            var tickFrom = this.now, tickTo = this.now + ms, previous = this.now;\n            var timer = this.firstTimerInRange(tickFrom, tickTo);\n\n            var firstException;\n            while (timer && tickFrom <= tickTo) {\n                if (this.timeouts[timer.id]) {\n                    tickFrom = this.now = timer.callAt;\n                    try {\n                      this.callTimer(timer);\n                    } catch (e) {\n                      firstException = firstException || e;\n                    }\n                }\n\n                timer = this.firstTimerInRange(previous, tickTo);\n                previous = tickFrom;\n            }\n\n            this.now = tickTo;\n\n            if (firstException) {\n              throw firstException;\n            }\n\n            return this.now;\n        },\n\n        firstTimerInRange: function (from, to) {\n            var timer, smallest = null, originalTimer;\n\n            for (var id in this.timeouts) {\n                if (this.timeouts.hasOwnProperty(id)) {\n                    if (this.timeouts[id].callAt < from || this.timeouts[id].callAt > to) {\n                        continue;\n                    }\n\n                    if (smallest === null || this.timeouts[id].callAt < smallest) {\n                        originalTimer = this.timeouts[id];\n                        smallest = this.timeouts[id].callAt;\n\n                        timer = {\n                            func: this.timeouts[id].func,\n                            callAt: this.timeouts[id].callAt,\n                            interval: this.timeouts[id].interval,\n                            id: this.timeouts[id].id,\n                            invokeArgs: this.timeouts[id].invokeArgs\n                        };\n                    }\n                }\n            }\n\n            return timer || null;\n        },\n\n        callTimer: function (timer) {\n            if (typeof timer.interval == \"number\") {\n                this.timeouts[timer.id].callAt += timer.interval;\n            } else {\n                delete this.timeouts[timer.id];\n            }\n\n            try {\n                if (typeof timer.func == \"function\") {\n                    timer.func.apply(null, timer.invokeArgs);\n                } else {\n                    eval(timer.func);\n                }\n            } catch (e) {\n              var exception = e;\n            }\n\n            if (!this.timeouts[timer.id]) {\n                if (exception) {\n                  throw exception;\n                }\n                return;\n            }\n\n            if (exception) {\n              throw exception;\n            }\n        },\n\n        reset: function reset() {\n            this.timeouts = {};\n        },\n\n        Date: (function () {\n            var NativeDate = Date;\n\n            function ClockDate(year, month, date, hour, minute, second, ms) {\n                // Defensive and verbose to avoid potential harm in passing\n                // explicit undefined when user does not pass argument\n                switch (arguments.length) {\n                case 0:\n                    return new NativeDate(ClockDate.clock.now);\n                case 1:\n                    return new NativeDate(year);\n                case 2:\n                    return new NativeDate(year, month);\n                case 3:\n                    return new NativeDate(year, month, date);\n                case 4:\n                    return new NativeDate(year, month, date, hour);\n                case 5:\n                    return new NativeDate(year, month, date, hour, minute);\n                case 6:\n                    return new NativeDate(year, month, date, hour, minute, second);\n                default:\n                    return new NativeDate(year, month, date, hour, minute, second, ms);\n                }\n            }\n\n            return mirrorDateProperties(ClockDate, NativeDate);\n        }())\n    };\n\n    function mirrorDateProperties(target, source) {\n        if (source.now) {\n            target.now = function now() {\n                return target.clock.now;\n            };\n        } else {\n            delete target.now;\n        }\n\n        if (source.toSource) {\n            target.toSource = function toSource() {\n                return source.toSource();\n            };\n        } else {\n            delete target.toSource;\n        }\n\n        target.toString = function toString() {\n            return source.toString();\n        };\n\n        target.prototype = source.prototype;\n        target.parse = source.parse;\n        target.UTC = source.UTC;\n        target.prototype.toUTCString = source.prototype.toUTCString;\n\n        for (var prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                target[prop] = source[prop];\n            }\n        }\n\n        return target;\n    }\n\n    var methods = [\"Date\", \"setTimeout\", \"setInterval\",\n                   \"clearTimeout\", \"clearInterval\"];\n\n    if (typeof global.setImmediate !== \"undefined\") {\n        methods.push(\"setImmediate\");\n    }\n\n    if (typeof global.clearImmediate !== \"undefined\") {\n        methods.push(\"clearImmediate\");\n    }\n\n    function restore() {\n        var method;\n\n        for (var i = 0, l = this.methods.length; i < l; i++) {\n            method = this.methods[i];\n\n            if (global[method].hadOwnProperty) {\n                global[method] = this[\"_\" + method];\n            } else {\n                try {\n                    delete global[method];\n                } catch (e) {}\n            }\n        }\n\n        // Prevent multiple executions which will completely remove these props\n        this.methods = [];\n      \n        qx.util.DeferredCallManager.getInstance().refreshTimeout();\n    }\n\n    function stubGlobal(method, clock) {\n        clock[method].hadOwnProperty = Object.prototype.hasOwnProperty.call(global, method);\n        clock[\"_\" + method] = global[method];\n\n        if (method == \"Date\") {\n            var date = mirrorDateProperties(clock[method], global[method]);\n            global[method] = date;\n        } else {\n            global[method] = function () {\n                return clock[method].apply(clock, arguments);\n            };\n\n            for (var prop in clock[method]) {\n                if (clock[method].hasOwnProperty(prop)) {\n                    global[method][prop] = clock[method][prop];\n                }\n            }\n        }\n\n        global[method].clock = clock;\n    }\n\n    sinon.useFakeTimers = function useFakeTimers(now) {\n        var clock = sinon.clock.create(now);\n        clock.restore = restore;\n        clock.methods = Array.prototype.slice.call(arguments,\n                                                   typeof now == \"number\" ? 1 : 0);\n\n        if (clock.methods.length === 0) {\n            clock.methods = methods;\n        }\n\n        for (var i = 0, l = clock.methods.length; i < l; i++) {\n            stubGlobal(clock.methods[i], clock);\n        }\n\n        return clock;\n    };\n}(typeof global != \"undefined\" && typeof global !== \"function\" ? global : this));\n\nsinon.timers = {\n    setTimeout: setTimeout,\n    clearTimeout: clearTimeout,\n    setImmediate: (typeof setImmediate !== \"undefined\" ? setImmediate : undefined),\n    clearImmediate: (typeof clearImmediate !== \"undefined\" ? clearImmediate: undefined),\n    setInterval: setInterval,\n    clearInterval: clearInterval,\n    Date: Date\n};\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = sinon;\n}\n\n/*jslint eqeqeq: false, onevar: false*/\n/*global sinon, module, require, ActiveXObject, XMLHttpRequest, DOMParser*/\n/**\n * Minimal Event interface implementation\n *\n * Original implementation by Sven Fuchs: https://gist.github.com/995028\n * Modifications and tests by Christian Johansen.\n *\n * @author Sven Fuchs (svenfuchs@artweb-design.de)\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2011 Sven Fuchs, Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    this.sinon = {};\n}\n\n(function () {\n    var push = [].push;\n\n    sinon.Event = function Event(type, bubbles, cancelable, target) {\n        this.initEvent(type, bubbles, cancelable, target);\n    };\n\n    sinon.Event.prototype = {\n        initEvent: function(type, bubbles, cancelable, target) {\n            this.type = type;\n            this.bubbles = bubbles;\n            this.cancelable = cancelable;\n            this.target = target;\n        },\n\n        stopPropagation: function () {},\n\n        preventDefault: function () {\n            this.defaultPrevented = true;\n        }\n    };\n\n    sinon.ProgressEvent = function ProgressEvent(type, progressEventRaw, target) {\n        this.initEvent(type, false, false, target);\n        this.loaded = progressEventRaw.loaded || null;\n        this.total = progressEventRaw.total || null;\n    };\n\n    sinon.ProgressEvent.prototype = new sinon.Event();\n\n    sinon.ProgressEvent.prototype.constructor =  sinon.ProgressEvent;\n\n    sinon.CustomEvent = function CustomEvent(type, customData, target) {\n        this.initEvent(type, false, false, target);\n        this.detail = customData.detail || null;\n    };\n\n    sinon.CustomEvent.prototype = new sinon.Event();\n\n    sinon.CustomEvent.prototype.constructor =  sinon.CustomEvent;\n\n    sinon.EventTarget = {\n        addEventListener: function addEventListener(event, listener) {\n            this.eventListeners = this.eventListeners || {};\n            this.eventListeners[event] = this.eventListeners[event] || [];\n            push.call(this.eventListeners[event], listener);\n        },\n\n        removeEventListener: function removeEventListener(event, listener) {\n            var listeners = this.eventListeners && this.eventListeners[event] || [];\n\n            for (var i = 0, l = listeners.length; i < l; ++i) {\n                if (listeners[i] == listener) {\n                    return listeners.splice(i, 1);\n                }\n            }\n        },\n\n        dispatchEvent: function dispatchEvent(event) {\n            var type = event.type;\n            var listeners = this.eventListeners && this.eventListeners[type] || [];\n\n            for (var i = 0; i < listeners.length; i++) {\n                if (typeof listeners[i] == \"function\") {\n                    listeners[i].call(this, event);\n                } else {\n                    listeners[i].handleEvent(event);\n                }\n            }\n\n            return !!event.defaultPrevented;\n        }\n    };\n}());\n\n/**\n * @depend ../../sinon.js\n * @depend event.js\n */\n/*jslint eqeqeq: false, onevar: false*/\n/*global sinon, module, require, ActiveXObject, XMLHttpRequest, DOMParser*/\n/**\n * Fake XMLHttpRequest object\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n// wrapper for global\n(function(global) {\n    if (typeof sinon === \"undefined\") {\n        global.sinon = {};\n    }\n\n    var supportsProgress = typeof ProgressEvent !== \"undefined\";\n    var supportsCustomEvent = typeof CustomEvent !== \"undefined\";\n    sinon.xhr = { XMLHttpRequest: global.XMLHttpRequest };\n    var xhr = sinon.xhr;\n    xhr.GlobalXMLHttpRequest = global.XMLHttpRequest;\n    xhr.GlobalActiveXObject = global.ActiveXObject;\n    xhr.supportsActiveX = typeof xhr.GlobalActiveXObject != \"undefined\";\n    xhr.supportsXHR = typeof xhr.GlobalXMLHttpRequest != \"undefined\";\n    xhr.workingXHR = xhr.supportsXHR ? xhr.GlobalXMLHttpRequest : xhr.supportsActiveX\n                                     ? function() { return new xhr.GlobalActiveXObject(\"MSXML2.XMLHTTP.3.0\") } : false;\n    xhr.supportsCORS = 'withCredentials' in (new sinon.xhr.GlobalXMLHttpRequest());\n\n    /*jsl:ignore*/\n    var unsafeHeaders = {\n        \"Accept-Charset\": true,\n        \"Accept-Encoding\": true,\n        \"Connection\": true,\n        \"Content-Length\": true,\n        \"Cookie\": true,\n        \"Cookie2\": true,\n        \"Content-Transfer-Encoding\": true,\n        \"Date\": true,\n        \"Expect\": true,\n        \"Host\": true,\n        \"Keep-Alive\": true,\n        \"Referer\": true,\n        \"TE\": true,\n        \"Trailer\": true,\n        \"Transfer-Encoding\": true,\n        \"Upgrade\": true,\n        \"User-Agent\": true,\n        \"Via\": true\n    };\n    /*jsl:end*/\n\n    function FakeXMLHttpRequest() {\n        this.readyState = FakeXMLHttpRequest.UNSENT;\n        this.requestHeaders = {};\n        this.requestBody = null;\n        this.status = 0;\n        this.statusText = \"\";\n        this.upload = new UploadProgress();\n        if (sinon.xhr.supportsCORS) {\n            this.withCredentials = false;\n        }\n\n\n        var xhr = this;\n        var events = [\"loadstart\", \"load\", \"abort\", \"loadend\"];\n\n        function addEventListener(eventName) {\n            xhr.addEventListener(eventName, function (event) {\n                var listener = xhr[\"on\" + eventName];\n\n                if (listener && typeof listener == \"function\") {\n                    listener.call(this, event);\n                }\n            });\n        }\n\n        for (var i = events.length - 1; i >= 0; i--) {\n            addEventListener(events[i]);\n        }\n\n        if (typeof FakeXMLHttpRequest.onCreate == \"function\") {\n            FakeXMLHttpRequest.onCreate(this);\n        }\n    }\n\n    // An upload object is created for each\n    // FakeXMLHttpRequest and allows upload\n    // events to be simulated using uploadProgress\n    // and uploadError.\n    function UploadProgress() {\n        this.eventListeners = {\n            \"progress\": [],\n            \"load\": [],\n            \"abort\": [],\n            \"error\": []\n        }\n    }\n\n    UploadProgress.prototype.addEventListener = function(event, listener) {\n        this.eventListeners[event].push(listener);\n    };\n\n    UploadProgress.prototype.removeEventListener = function(event, listener) {\n        var listeners = this.eventListeners[event] || [];\n\n        for (var i = 0, l = listeners.length; i < l; ++i) {\n            if (listeners[i] == listener) {\n                return listeners.splice(i, 1);\n            }\n        }\n    };\n\n    UploadProgress.prototype.dispatchEvent = function(event) {\n        var listeners = this.eventListeners[event.type] || [];\n\n        for (var i = 0, listener; (listener = listeners[i]) != null; i++) {\n            listener(event);\n        }\n    };\n\n    function verifyState(xhr) {\n        if (xhr.readyState !== FakeXMLHttpRequest.OPENED) {\n            throw new Error(\"INVALID_STATE_ERR\");\n        }\n\n        if (xhr.sendFlag) {\n            throw new Error(\"INVALID_STATE_ERR\");\n        }\n    }\n\n    // filtering to enable a white-list version of Sinon FakeXhr,\n    // where whitelisted requests are passed through to real XHR\n    function each(collection, callback) {\n        if (!collection) return;\n        for (var i = 0, l = collection.length; i < l; i += 1) {\n            callback(collection[i]);\n        }\n    }\n    function some(collection, callback) {\n        for (var index = 0; index < collection.length; index++) {\n            if(callback(collection[index]) === true) return true;\n        }\n        return false;\n    }\n    // largest arity in XHR is 5 - XHR#open\n    var apply = function(obj,method,args) {\n        switch(args.length) {\n        case 0: return obj[method]();\n        case 1: return obj[method](args[0]);\n        case 2: return obj[method](args[0],args[1]);\n        case 3: return obj[method](args[0],args[1],args[2]);\n        case 4: return obj[method](args[0],args[1],args[2],args[3]);\n        case 5: return obj[method](args[0],args[1],args[2],args[3],args[4]);\n        }\n    };\n\n    FakeXMLHttpRequest.filters = [];\n    FakeXMLHttpRequest.addFilter = function(fn) {\n        this.filters.push(fn)\n    };\n    var IE6Re = /MSIE 6/;\n    FakeXMLHttpRequest.defake = function(fakeXhr,xhrArgs) {\n        var xhr = new sinon.xhr.workingXHR();\n        each([\"open\",\"setRequestHeader\",\"send\",\"abort\",\"getResponseHeader\",\n              \"getAllResponseHeaders\",\"addEventListener\",\"overrideMimeType\",\"removeEventListener\"],\n             function(method) {\n                 fakeXhr[method] = function() {\n                   return apply(xhr,method,arguments);\n                 };\n             });\n\n        var copyAttrs = function(args) {\n            each(args, function(attr) {\n              try {\n                fakeXhr[attr] = xhr[attr]\n              } catch(e) {\n                if(!IE6Re.test(navigator.userAgent)) throw e;\n              }\n            });\n        };\n\n        var stateChange = function() {\n            fakeXhr.readyState = xhr.readyState;\n            if(xhr.readyState >= FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                copyAttrs([\"status\",\"statusText\"]);\n            }\n            if(xhr.readyState >= FakeXMLHttpRequest.LOADING) {\n                copyAttrs([\"responseText\"]);\n            }\n            if(xhr.readyState === FakeXMLHttpRequest.DONE) {\n                copyAttrs([\"responseXML\"]);\n            }\n            if(fakeXhr.onreadystatechange) fakeXhr.onreadystatechange.call(fakeXhr, { target: fakeXhr });\n        };\n        if(xhr.addEventListener) {\n          for(var event in fakeXhr.eventListeners) {\n              if(fakeXhr.eventListeners.hasOwnProperty(event)) {\n                  each(fakeXhr.eventListeners[event],function(handler) {\n                      xhr.addEventListener(event, handler);\n                  });\n              }\n          }\n          xhr.addEventListener(\"readystatechange\",stateChange);\n        } else {\n          xhr.onreadystatechange = stateChange;\n        }\n        apply(xhr,\"open\",xhrArgs);\n    };\n    FakeXMLHttpRequest.useFilters = false;\n\n    function verifyRequestOpened(xhr) {\n        if (xhr.readyState != FakeXMLHttpRequest.OPENED) {\n            throw new Error(\"INVALID_STATE_ERR - \" + xhr.readyState);\n        }\n    }\n\n    function verifyRequestSent(xhr) {\n        if (xhr.readyState == FakeXMLHttpRequest.DONE) {\n            throw new Error(\"Request done\");\n        }\n    }\n\n    function verifyHeadersReceived(xhr) {\n        if (xhr.async && xhr.readyState != FakeXMLHttpRequest.HEADERS_RECEIVED) {\n            throw new Error(\"No headers received\");\n        }\n    }\n\n    function verifyResponseBodyType(body) {\n        if (typeof body != \"string\") {\n            var error = new Error(\"Attempted to respond to fake XMLHttpRequest with \" +\n                                 body + \", which is not a string.\");\n            error.name = \"InvalidBodyException\";\n            throw error;\n        }\n    }\n\n    sinon.extend(FakeXMLHttpRequest.prototype, sinon.EventTarget, {\n        async: true,\n\n        open: function open(method, url, async, username, password) {\n            this.method = method;\n            this.url = url;\n            this.async = typeof async == \"boolean\" ? async : true;\n            this.username = username;\n            this.password = password;\n            this.responseText = null;\n            this.responseXML = null;\n            this.requestHeaders = {};\n            this.sendFlag = false;\n            if(sinon.FakeXMLHttpRequest.useFilters === true) {\n                var xhrArgs = arguments;\n                var defake = some(FakeXMLHttpRequest.filters,function(filter) {\n                    return filter.apply(this,xhrArgs)\n                });\n                if (defake) {\n                  return sinon.FakeXMLHttpRequest.defake(this,arguments);\n                }\n            }\n            this.readyStateChange(FakeXMLHttpRequest.OPENED);\n        },\n\n        readyStateChange: function readyStateChange(state) {\n            this.readyState = state;\n\n            if (typeof this.onreadystatechange == \"function\") {\n                try {\n                    this.onreadystatechange();\n                } catch (e) {\n                    sinon.logError(\"Fake XHR onreadystatechange handler\", e);\n                }\n            }\n\n            this.dispatchEvent(new sinon.Event(\"readystatechange\"));\n\n            switch (this.readyState) {\n                case FakeXMLHttpRequest.DONE:\n                    this.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                    this.dispatchEvent(new sinon.Event(\"loadend\", false, false, this));\n                    this.upload.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                    if (supportsProgress) {\n                        this.upload.dispatchEvent(new sinon.ProgressEvent('progress', {loaded: 100, total: 100}));\n                    }\n                    break;\n            }\n        },\n\n        setRequestHeader: function setRequestHeader(header, value) {\n            verifyState(this);\n\n            if (unsafeHeaders[header] || /^(Sec-|Proxy-)/.test(header)) {\n                throw new Error(\"Refused to set unsafe header \\\"\" + header + \"\\\"\");\n            }\n\n            if (this.requestHeaders[header]) {\n                this.requestHeaders[header] += \",\" + value;\n            } else {\n                this.requestHeaders[header] = value;\n            }\n        },\n\n        // Helps testing\n        setResponseHeaders: function setResponseHeaders(headers) {\n            verifyRequestOpened(this);\n            this.responseHeaders = {};\n\n            for (var header in headers) {\n                if (headers.hasOwnProperty(header)) {\n                    this.responseHeaders[header] = headers[header];\n                }\n            }\n\n            if (this.async) {\n                this.readyStateChange(FakeXMLHttpRequest.HEADERS_RECEIVED);\n            } else {\n                this.readyState = FakeXMLHttpRequest.HEADERS_RECEIVED;\n            }\n        },\n\n        // Currently treats ALL data as a DOMString (i.e. no Document)\n        send: function send(data) {\n            verifyState(this);\n\n            if (!/^(get|head)$/i.test(this.method)) {\n                if (this.requestHeaders[\"Content-Type\"]) {\n                    var value = this.requestHeaders[\"Content-Type\"].split(\";\");\n                    this.requestHeaders[\"Content-Type\"] = value[0] + \";charset=utf-8\";\n                } else {\n                    this.requestHeaders[\"Content-Type\"] = \"text/plain;charset=utf-8\";\n                }\n\n                this.requestBody = data;\n            }\n\n            this.errorFlag = false;\n            this.sendFlag = this.async;\n            this.readyStateChange(FakeXMLHttpRequest.OPENED);\n\n            if (typeof this.onSend == \"function\") {\n                this.onSend(this);\n            }\n\n            this.dispatchEvent(new sinon.Event(\"loadstart\", false, false, this));\n        },\n\n        abort: function abort() {\n            this.aborted = true;\n            this.responseText = null;\n            this.errorFlag = true;\n            this.requestHeaders = {};\n\n            if (this.readyState > sinon.FakeXMLHttpRequest.UNSENT && this.sendFlag) {\n                this.readyStateChange(sinon.FakeXMLHttpRequest.DONE);\n                this.sendFlag = false;\n            }\n\n            this.readyState = sinon.FakeXMLHttpRequest.UNSENT;\n\n            this.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n            this.upload.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n            if (typeof this.onerror === \"function\") {\n                this.onerror();\n            }\n        },\n\n        getResponseHeader: function getResponseHeader(header) {\n            if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                return null;\n            }\n\n            if (/^Set-Cookie2?$/i.test(header)) {\n                return null;\n            }\n\n            header = header.toLowerCase();\n\n            for (var h in this.responseHeaders) {\n                if (h.toLowerCase() == header) {\n                    return this.responseHeaders[h];\n                }\n            }\n\n            return null;\n        },\n\n        getAllResponseHeaders: function getAllResponseHeaders() {\n            if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                return \"\";\n            }\n\n            var headers = \"\";\n\n            for (var header in this.responseHeaders) {\n                if (this.responseHeaders.hasOwnProperty(header) &&\n                    !/^Set-Cookie2?$/i.test(header)) {\n                    headers += header + \": \" + this.responseHeaders[header] + \"\\r\\n\";\n                }\n            }\n\n            return headers;\n        },\n\n        setResponseBody: function setResponseBody(body) {\n            verifyRequestSent(this);\n            verifyHeadersReceived(this);\n            verifyResponseBodyType(body);\n\n            var chunkSize = this.chunkSize || 10;\n            var index = 0;\n            this.responseText = \"\";\n\n            do {\n                if (this.async) {\n                    this.readyStateChange(FakeXMLHttpRequest.LOADING);\n                }\n\n                this.responseText += body.substring(index, index + chunkSize);\n                index += chunkSize;\n            } while (index < body.length);\n\n            var type = this.getResponseHeader(\"Content-Type\");\n\n            if (this.responseText &&\n                (!type || /(text\\/xml)|(application\\/xml)|(\\+xml)/.test(type))) {\n                try {\n                    this.responseXML = FakeXMLHttpRequest.parseXML(this.responseText);\n                } catch (e) {\n                    // Unable to parse XML - no biggie\n                }\n            }\n\n            if (this.async) {\n                this.readyStateChange(FakeXMLHttpRequest.DONE);\n            } else {\n                this.readyState = FakeXMLHttpRequest.DONE;\n            }\n        },\n\n        respond: function respond(status, headers, body) {\n            this.status = typeof status == \"number\" ? status : 200;\n            this.statusText = FakeXMLHttpRequest.statusCodes[this.status];\n            this.setResponseHeaders(headers || {});\n            this.setResponseBody(body || \"\");\n        },\n\n        uploadProgress: function uploadProgress(progressEventRaw) {\n            if (supportsProgress) {\n                this.upload.dispatchEvent(new sinon.ProgressEvent(\"progress\", progressEventRaw));\n            }\n        },\n\n        uploadError: function uploadError(error) {\n            if (supportsCustomEvent) {\n                this.upload.dispatchEvent(new sinon.CustomEvent(\"error\", {\"detail\": error}));\n            }\n        }\n    });\n\n    sinon.extend(FakeXMLHttpRequest, {\n        UNSENT: 0,\n        OPENED: 1,\n        HEADERS_RECEIVED: 2,\n        LOADING: 3,\n        DONE: 4\n    });\n\n    // Borrowed from JSpec\n    FakeXMLHttpRequest.parseXML = function parseXML(text) {\n        var xmlDoc;\n\n        if (typeof DOMParser != \"undefined\") {\n            var parser = new DOMParser();\n            xmlDoc = parser.parseFromString(text, \"text/xml\");\n        } else {\n            xmlDoc = new ActiveXObject(\"Microsoft.XMLDOM\");\n            xmlDoc.async = \"false\";\n            xmlDoc.loadXML(text);\n        }\n\n        return xmlDoc;\n    };\n\n    FakeXMLHttpRequest.statusCodes = {\n        100: \"Continue\",\n        101: \"Switching Protocols\",\n        200: \"OK\",\n        201: \"Created\",\n        202: \"Accepted\",\n        203: \"Non-Authoritative Information\",\n        204: \"No Content\",\n        205: \"Reset Content\",\n        206: \"Partial Content\",\n        300: \"Multiple Choice\",\n        301: \"Moved Permanently\",\n        302: \"Found\",\n        303: \"See Other\",\n        304: \"Not Modified\",\n        305: \"Use Proxy\",\n        307: \"Temporary Redirect\",\n        400: \"Bad Request\",\n        401: \"Unauthorized\",\n        402: \"Payment Required\",\n        403: \"Forbidden\",\n        404: \"Not Found\",\n        405: \"Method Not Allowed\",\n        406: \"Not Acceptable\",\n        407: \"Proxy Authentication Required\",\n        408: \"Request Timeout\",\n        409: \"Conflict\",\n        410: \"Gone\",\n        411: \"Length Required\",\n        412: \"Precondition Failed\",\n        413: \"Request Entity Too Large\",\n        414: \"Request-URI Too Long\",\n        415: \"Unsupported Media Type\",\n        416: \"Requested Range Not Satisfiable\",\n        417: \"Expectation Failed\",\n        422: \"Unprocessable Entity\",\n        500: \"Internal Server Error\",\n        501: \"Not Implemented\",\n        502: \"Bad Gateway\",\n        503: \"Service Unavailable\",\n        504: \"Gateway Timeout\",\n        505: \"HTTP Version Not Supported\"\n    };\n\n    sinon.useFakeXMLHttpRequest = function () {\n        sinon.FakeXMLHttpRequest.restore = function restore(keepOnCreate) {\n            if (xhr.supportsXHR) {\n                global.XMLHttpRequest = xhr.GlobalXMLHttpRequest;\n            }\n\n            if (xhr.supportsActiveX) {\n                global.ActiveXObject = xhr.GlobalActiveXObject;\n            }\n\n            delete sinon.FakeXMLHttpRequest.restore;\n\n            if (keepOnCreate !== true) {\n                delete sinon.FakeXMLHttpRequest.onCreate;\n            }\n        };\n        if (xhr.supportsXHR) {\n            global.XMLHttpRequest = sinon.FakeXMLHttpRequest;\n        }\n\n        if (xhr.supportsActiveX) {\n            global.ActiveXObject = function ActiveXObject(objId) {\n                if (objId == \"Microsoft.XMLHTTP\" || /^Msxml2\\.XMLHTTP/i.test(objId)) {\n\n                    return new sinon.FakeXMLHttpRequest();\n                }\n\n                return new xhr.GlobalActiveXObject(objId);\n            };\n        }\n\n        return sinon.FakeXMLHttpRequest;\n    };\n\n    sinon.FakeXMLHttpRequest = FakeXMLHttpRequest;\n\n})(typeof global === \"object\" ? global : this);\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = sinon;\n}\n\n/**\n * @depend fake_xml_http_request.js\n */\n/*jslint eqeqeq: false, onevar: false, regexp: false, plusplus: false*/\n/*global module, require, window*/\n/**\n * The Sinon \"server\" mimics a web server that receives requests from\n * sinon.FakeXMLHttpRequest and provides an API to respond to those requests,\n * both synchronously and asynchronously. To respond synchronously, canned\n * answers have to be provided upfront.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nif (typeof sinon == \"undefined\") {\n    var sinon = {};\n}\n\nsinon.fakeServer = (function () {\n    var push = [].push;\n    function F() {}\n\n    function create(proto) {\n        F.prototype = proto;\n        return new F();\n    }\n\n    function responseArray(handler) {\n        var response = handler;\n\n        if (Object.prototype.toString.call(handler) != \"[object Array]\") {\n            response = [200, {}, handler];\n        }\n\n        if (typeof response[2] != \"string\") {\n            throw new TypeError(\"Fake server response body should be string, but was \" +\n                                typeof response[2]);\n        }\n\n        return response;\n    }\n\n    var wloc = typeof window !== \"undefined\" ? window.location : {};\n    var rCurrLoc = new RegExp(\"^\" + wloc.protocol + \"//\" + wloc.host);\n\n    function matchOne(response, reqMethod, reqUrl) {\n        var rmeth = response.method;\n        var matchMethod = !rmeth || rmeth.toLowerCase() == reqMethod.toLowerCase();\n        var url = response.url;\n        var matchUrl = !url || url == reqUrl || (typeof url.test == \"function\" && url.test(reqUrl));\n\n        return matchMethod && matchUrl;\n    }\n\n    function match(response, request) {\n        var requestUrl = request.url;\n\n        if (!/^https?:\\/\\//.test(requestUrl) || rCurrLoc.test(requestUrl)) {\n            requestUrl = requestUrl.replace(rCurrLoc, \"\");\n        }\n\n        if (matchOne(response, this.getHTTPMethod(request), requestUrl)) {\n            if (typeof response.response == \"function\") {\n                var ru = response.url;\n                var args = [request].concat(ru && typeof ru.exec == \"function\" ? ru.exec(requestUrl).slice(1) : []);\n                return response.response.apply(response, args);\n            }\n\n            return true;\n        }\n\n        return false;\n    }\n\n    function log(response, request) {\n        var str;\n\n        str =  \"Request:\\n\"  + sinon.format(request)  + \"\\n\\n\";\n        str += \"Response:\\n\" + sinon.format(response) + \"\\n\\n\";\n\n        sinon.log(str);\n    }\n\n    return {\n        create: function () {\n            var server = create(this);\n            this.xhr = sinon.useFakeXMLHttpRequest();\n            server.requests = [];\n\n            this.xhr.onCreate = function (xhrObj) {\n                server.addRequest(xhrObj);\n            };\n\n            return server;\n        },\n\n        addRequest: function addRequest(xhrObj) {\n            var server = this;\n            push.call(this.requests, xhrObj);\n\n            xhrObj.onSend = function () {\n                server.handleRequest(this);\n\n                if (server.autoRespond && !server.responding) {\n                    setTimeout(function () {\n                        server.responding = false;\n                        server.respond();\n                    }, server.autoRespondAfter || 10);\n\n                    server.responding = true;\n                }\n            };\n        },\n\n        getHTTPMethod: function getHTTPMethod(request) {\n            if (this.fakeHTTPMethods && /post/i.test(request.method)) {\n                var matches = (request.requestBody || \"\").match(/_method=([^\\b;]+)/);\n                return !!matches ? matches[1] : request.method;\n            }\n\n            return request.method;\n        },\n\n        handleRequest: function handleRequest(xhr) {\n            if (xhr.async) {\n                if (!this.queue) {\n                    this.queue = [];\n                }\n\n                push.call(this.queue, xhr);\n            } else {\n                this.processRequest(xhr);\n            }\n        },\n\n        respondWith: function respondWith(method, url, body) {\n            if (arguments.length == 1 && typeof method != \"function\") {\n                this.response = responseArray(method);\n                return;\n            }\n\n            if (!this.responses) { this.responses = []; }\n\n            if (arguments.length == 1) {\n                body = method;\n                url = method = null;\n            }\n\n            if (arguments.length == 2) {\n                body = url;\n                url = method;\n                method = null;\n            }\n\n            push.call(this.responses, {\n                method: method,\n                url: url,\n                response: typeof body == \"function\" ? body : responseArray(body)\n            });\n        },\n\n        respond: function respond() {\n            if (arguments.length > 0) this.respondWith.apply(this, arguments);\n            var queue = this.queue || [];\n            var requests = queue.splice(0, queue.length);\n            var request;\n\n            while(request = requests.shift()) {\n                this.processRequest(request);\n            }\n        },\n\n        processRequest: function processRequest(request) {\n            try {\n                if (request.aborted) {\n                    return;\n                }\n\n                var response = this.response || [404, {}, \"\"];\n\n                if (this.responses) {\n                    for (var l = this.responses.length, i = l - 1; i >= 0; i--) {\n                        if (match.call(this, this.responses[i], request)) {\n                            response = this.responses[i].response;\n                            break;\n                        }\n                    }\n                }\n\n                if (request.readyState != 4) {\n                    log(response, request);\n\n                    request.respond(response[0], response[1], response[2]);\n                }\n            } catch (e) {\n                sinon.logError(\"Fake server request processing\", e);\n            }\n        },\n\n        restore: function restore() {\n            return this.xhr.restore && this.xhr.restore.apply(this.xhr, arguments);\n        }\n    };\n}());\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = sinon;\n}\n\n/**\n * @depend fake_server.js\n * @depend fake_timers.js\n */\n/*jslint browser: true, eqeqeq: false, onevar: false*/\n/*global sinon*/\n/**\n * Add-on for sinon.fakeServer that automatically handles a fake timer along with\n * the FakeXMLHttpRequest. The direct inspiration for this add-on is jQuery\n * 1.3.x, which does not use xhr object's onreadystatehandler at all - instead,\n * it polls the object for completion with setInterval. Despite the direct\n * motivation, there is nothing jQuery-specific in this file, so it can be used\n * in any environment where the ajax implementation depends on setInterval or\n * setTimeout.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function () {\n    function Server() {}\n    Server.prototype = sinon.fakeServer;\n\n    sinon.fakeServerWithClock = new Server();\n\n    sinon.fakeServerWithClock.addRequest = function addRequest(xhr) {\n        if (xhr.async) {\n            if (typeof setTimeout.clock == \"object\") {\n                this.clock = setTimeout.clock;\n            } else {\n                this.clock = sinon.useFakeTimers();\n                this.resetClock = true;\n            }\n\n            if (!this.longestTimeout) {\n                var clockSetTimeout = this.clock.setTimeout;\n                var clockSetInterval = this.clock.setInterval;\n                var server = this;\n\n                this.clock.setTimeout = function (fn, timeout) {\n                    server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                    return clockSetTimeout.apply(this, arguments);\n                };\n\n                this.clock.setInterval = function (fn, timeout) {\n                    server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                    return clockSetInterval.apply(this, arguments);\n                };\n            }\n        }\n\n        return sinon.fakeServer.addRequest.call(this, xhr);\n    };\n\n    sinon.fakeServerWithClock.respond = function respond() {\n        var returnVal = sinon.fakeServer.respond.apply(this, arguments);\n\n        if (this.clock) {\n            this.clock.tick(this.longestTimeout || 0);\n            this.longestTimeout = 0;\n\n            if (this.resetClock) {\n                this.clock.restore();\n                this.resetClock = false;\n            }\n        }\n\n        return returnVal;\n    };\n\n    sinon.fakeServerWithClock.restore = function restore() {\n        if (this.clock) {\n            this.clock.restore();\n        }\n\n        return sinon.fakeServer.restore.apply(this, arguments);\n    };\n}());\n\n/**\n * @depend ../sinon.js\n * @depend collection.js\n * @depend util/fake_timers.js\n * @depend util/fake_server_with_clock.js\n */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global require, module*/\n/**\n * Manages fake collections as well as fake utilities such as Sinon's\n * timers and fake XHR implementation in one convenient object.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\nif (typeof module !== 'undefined' && module.exports) {\n    var sinon = require(\"../sinon\");\n    sinon.extend(sinon, require(\"./util/fake_timers\"));\n}\n\n(function () {\n    var push = [].push;\n\n    function exposeValue(sandbox, config, key, value) {\n        if (!value) {\n            return;\n        }\n\n        if (config.injectInto && !(key in config.injectInto)) {\n            config.injectInto[key] = value;\n            sandbox.injectedKeys.push(key);\n        } else {\n            push.call(sandbox.args, value);\n        }\n    }\n\n    function prepareSandboxFromConfig(config) {\n        var sandbox = sinon.create(sinon.sandbox);\n\n        if (config.useFakeServer) {\n            if (typeof config.useFakeServer == \"object\") {\n                sandbox.serverPrototype = config.useFakeServer;\n            }\n\n            sandbox.useFakeServer();\n        }\n\n        if (config.useFakeTimers) {\n            if (typeof config.useFakeTimers == \"object\") {\n                sandbox.useFakeTimers.apply(sandbox, config.useFakeTimers);\n            } else {\n                sandbox.useFakeTimers();\n            }\n        }\n\n        return sandbox;\n    }\n\n    sinon.sandbox = sinon.extend(sinon.create(sinon.collection), {\n        useFakeTimers: function useFakeTimers() {\n            this.clock = sinon.useFakeTimers.apply(sinon, arguments);\n\n            return this.add(this.clock);\n        },\n\n        serverPrototype: sinon.fakeServer,\n\n        useFakeServer: function useFakeServer() {\n            var proto = this.serverPrototype || sinon.fakeServer;\n\n            if (!proto || !proto.create) {\n                return null;\n            }\n\n            this.server = proto.create();\n            return this.add(this.server);\n        },\n\n        inject: function (obj) {\n            sinon.collection.inject.call(this, obj);\n\n            if (this.clock) {\n                obj.clock = this.clock;\n            }\n\n            if (this.server) {\n                obj.server = this.server;\n                obj.requests = this.server.requests;\n            }\n\n            return obj;\n        },\n\n        restore: function () {\n            sinon.collection.restore.apply(this, arguments);\n            this.restoreContext();\n        },\n\n        restoreContext: function () {\n            if (this.injectedKeys) {\n                for (var i = 0, j = this.injectedKeys.length; i < j; i++) {\n                    delete this.injectInto[this.injectedKeys[i]];\n                }\n                this.injectedKeys = [];\n            }\n        },\n\n        create: function (config) {\n            if (!config) {\n                return sinon.create(sinon.sandbox);\n            }\n\n            var sandbox = prepareSandboxFromConfig(config);\n            sandbox.args = sandbox.args || [];\n            sandbox.injectedKeys = [];\n            sandbox.injectInto = config.injectInto;\n            var prop, value, exposed = sandbox.inject({});\n\n            if (config.properties) {\n                for (var i = 0, l = config.properties.length; i < l; i++) {\n                    prop = config.properties[i];\n                    value = exposed[prop] || prop == \"sandbox\" && sandbox;\n                    exposeValue(sandbox, config, prop, value);\n                }\n            } else {\n                exposeValue(sandbox, config, \"sandbox\", value);\n            }\n\n            return sandbox;\n        }\n    });\n\n    sinon.sandbox.useFakeXMLHttpRequest = sinon.sandbox.useFakeServer;\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = sinon.sandbox;\n    }\n}());\n\n/**\n * @depend ../sinon.js\n * @depend stub.js\n * @depend mock.js\n * @depend sandbox.js\n */\n/*jslint eqeqeq: false, onevar: false, forin: true, plusplus: false*/\n/*global module, require, sinon*/\n/**\n * Test function, sandboxes fakes\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function test(callback) {\n        var type = typeof callback;\n\n        if (type != \"function\") {\n            throw new TypeError(\"sinon.test needs to wrap a test function, got \" + type);\n        }\n\n        return function () {\n            var config = sinon.getConfig(sinon.config);\n            config.injectInto = config.injectIntoThis && this || config.injectInto;\n            var sandbox = sinon.sandbox.create(config);\n            var exception, result;\n            var args = Array.prototype.slice.call(arguments).concat(sandbox.args);\n\n            try {\n                result = callback.apply(this, args);\n            } catch (e) {\n                exception = e;\n            }\n\n            if (typeof exception !== \"undefined\") {\n                sandbox.restore();\n                throw exception;\n            }\n            else {\n                sandbox.verifyAndRestore();\n            }\n\n            return result;\n        };\n    }\n\n    test.config = {\n        injectIntoThis: true,\n        injectInto: null,\n        properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n        useFakeTimers: true,\n        useFakeServer: true\n    };\n\n    if (commonJSModule) {\n        module.exports = test;\n    } else {\n        sinon.test = test;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n * @depend test.js\n */\n/*jslint eqeqeq: false, onevar: false, eqeqeq: false*/\n/*global module, require, sinon*/\n/**\n * Test case, sandboxes all test functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon) {\n    var commonJSModule = typeof module !== 'undefined' && module.exports;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon || !Object.prototype.hasOwnProperty) {\n        return;\n    }\n\n    function createTest(property, setUp, tearDown) {\n        return function () {\n            if (setUp) {\n                setUp.apply(this, arguments);\n            }\n\n            var exception, result;\n\n            try {\n                result = property.apply(this, arguments);\n            } catch (e) {\n                exception = e;\n            }\n\n            if (tearDown) {\n                tearDown.apply(this, arguments);\n            }\n\n            if (exception) {\n                throw exception;\n            }\n\n            return result;\n        };\n    }\n\n    function testCase(tests, prefix) {\n        /*jsl:ignore*/\n        if (!tests || typeof tests != \"object\") {\n            throw new TypeError(\"sinon.testCase needs an object with test functions\");\n        }\n        /*jsl:end*/\n\n        prefix = prefix || \"test\";\n        var rPrefix = new RegExp(\"^\" + prefix);\n        var methods = {}, testName, property, method;\n        var setUp = tests.setUp;\n        var tearDown = tests.tearDown;\n\n        for (testName in tests) {\n            if (tests.hasOwnProperty(testName)) {\n                property = tests[testName];\n\n                if (/^(setUp|tearDown)$/.test(testName)) {\n                    continue;\n                }\n\n                if (typeof property == \"function\" && rPrefix.test(testName)) {\n                    method = property;\n\n                    if (setUp || tearDown) {\n                        method = createTest(property, setUp, tearDown);\n                    }\n\n                    methods[testName] = sinon.test(method);\n                } else {\n                    methods[testName] = tests[testName];\n                }\n            }\n        }\n\n        return methods;\n    }\n\n    if (commonJSModule) {\n        module.exports = testCase;\n    } else {\n        sinon.testCase = testCase;\n    }\n}(typeof sinon == \"object\" && sinon || null));\n\n/**\n * @depend ../sinon.js\n * @depend stub.js\n */\n/*jslint eqeqeq: false, onevar: false, nomen: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n * Assertions matching the test spy retrieval interface.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n\n(function (sinon, global) {\n    var commonJSModule = typeof module !== \"undefined\" && module.exports;\n    var slice = Array.prototype.slice;\n    var assert;\n\n    if (!sinon && commonJSModule) {\n        sinon = require(\"../sinon\");\n    }\n\n    if (!sinon) {\n        return;\n    }\n\n    function verifyIsStub() {\n        var method;\n\n        for (var i = 0, l = arguments.length; i < l; ++i) {\n            method = arguments[i];\n\n            if (!method) {\n                assert.fail(\"fake is not a spy\");\n            }\n\n            if (typeof method != \"function\") {\n                assert.fail(method + \" is not a function\");\n            }\n\n            if (typeof method.getCall != \"function\") {\n                assert.fail(method + \" is not stubbed\");\n            }\n        }\n    }\n\n    function failAssertion(object, msg) {\n        object = object || global;\n        var failMethod = object.fail || assert.fail;\n        failMethod.call(object, msg);\n    }\n\n    function mirrorPropAsAssertion(name, method, message) {\n        if (arguments.length == 2) {\n            message = method;\n            method = name;\n        }\n\n        assert[name] = function (fake) {\n            verifyIsStub(fake);\n\n            var args = slice.call(arguments, 1);\n            var failed = false;\n\n            if (typeof method == \"function\") {\n                failed = !method(fake);\n            } else {\n                failed = typeof fake[method] == \"function\" ?\n                    !fake[method].apply(fake, args) : !fake[method];\n            }\n\n            if (failed) {\n                failAssertion(this, fake.printf.apply(fake, [message].concat(args)));\n            } else {\n                assert.pass(name);\n            }\n        };\n    }\n\n    function exposedName(prefix, prop) {\n        return !prefix || /^fail/.test(prop) ? prop :\n            prefix + prop.slice(0, 1).toUpperCase() + prop.slice(1);\n    }\n\n    assert = {\n        failException: \"AssertError\",\n\n        fail: function fail(message) {\n            var error = new Error(message);\n            error.name = this.failException || assert.failException;\n\n            throw error;\n        },\n\n        pass: function pass(assertion) {},\n\n        callOrder: function assertCallOrder() {\n            verifyIsStub.apply(null, arguments);\n            var expected = \"\", actual = \"\";\n\n            if (!sinon.calledInOrder(arguments)) {\n                try {\n                    expected = [].join.call(arguments, \", \");\n                    var calls = slice.call(arguments);\n                    var i = calls.length;\n                    while (i) {\n                        if (!calls[--i].called) {\n                            calls.splice(i, 1);\n                        }\n                    }\n                    actual = sinon.orderByFirstCall(calls).join(\", \");\n                } catch (e) {\n                    // If this fails, we'll just fall back to the blank string\n                }\n\n                failAssertion(this, \"expected \" + expected + \" to be \" +\n                              \"called in order but were called as \" + actual);\n            } else {\n                assert.pass(\"callOrder\");\n            }\n        },\n\n        callCount: function assertCallCount(method, count) {\n            verifyIsStub(method);\n\n            if (method.callCount != count) {\n                var msg = \"expected %n to be called \" + sinon.timesInWords(count) +\n                    \" but was called %c%C\";\n                failAssertion(this, method.printf(msg));\n            } else {\n                assert.pass(\"callCount\");\n            }\n        },\n\n        expose: function expose(target, options) {\n            if (!target) {\n                throw new TypeError(\"target is null or undefined\");\n            }\n\n            var o = options || {};\n            var prefix = typeof o.prefix == \"undefined\" && \"assert\" || o.prefix;\n            var includeFail = typeof o.includeFail == \"undefined\" || !!o.includeFail;\n\n            for (var method in this) {\n                if (method != \"export\" && (includeFail || !/^(fail)/.test(method))) {\n                    target[exposedName(prefix, method)] = this[method];\n                }\n            }\n\n            return target;\n        },\n\n        match: function match(actual, expectation) {\n            var matcher = sinon.match(expectation);\n            if (matcher.test(actual)) {\n                assert.pass(\"match\");\n            } else {\n                var formatted = [\n                    \"expected value to match\",\n                    \"    expected = \" + sinon.format(expectation),\n                    \"    actual = \" + sinon.format(actual)\n                ]\n                failAssertion(this, formatted.join(\"\\n\"));\n            }\n        }\n    };\n\n    mirrorPropAsAssertion(\"called\", \"expected %n to have been called at least once but was never called\");\n    mirrorPropAsAssertion(\"notCalled\", function (spy) { return !spy.called; },\n                          \"expected %n to not have been called but was called %c%C\");\n    mirrorPropAsAssertion(\"calledOnce\", \"expected %n to be called once but was called %c%C\");\n    mirrorPropAsAssertion(\"calledTwice\", \"expected %n to be called twice but was called %c%C\");\n    mirrorPropAsAssertion(\"calledThrice\", \"expected %n to be called thrice but was called %c%C\");\n    mirrorPropAsAssertion(\"calledOn\", \"expected %n to be called with %1 as this but was called with %t\");\n    mirrorPropAsAssertion(\"alwaysCalledOn\", \"expected %n to always be called with %1 as this but was called with %t\");\n    mirrorPropAsAssertion(\"calledWithNew\", \"expected %n to be called with new\");\n    mirrorPropAsAssertion(\"alwaysCalledWithNew\", \"expected %n to always be called with new\");\n    mirrorPropAsAssertion(\"calledWith\", \"expected %n to be called with arguments %*%C\");\n    mirrorPropAsAssertion(\"calledWithMatch\", \"expected %n to be called with match %*%C\");\n    mirrorPropAsAssertion(\"alwaysCalledWith\", \"expected %n to always be called with arguments %*%C\");\n    mirrorPropAsAssertion(\"alwaysCalledWithMatch\", \"expected %n to always be called with match %*%C\");\n    mirrorPropAsAssertion(\"calledWithExactly\", \"expected %n to be called with exact arguments %*%C\");\n    mirrorPropAsAssertion(\"alwaysCalledWithExactly\", \"expected %n to always be called with exact arguments %*%C\");\n    mirrorPropAsAssertion(\"neverCalledWith\", \"expected %n to never be called with arguments %*%C\");\n    mirrorPropAsAssertion(\"neverCalledWithMatch\", \"expected %n to never be called with match %*%C\");\n    mirrorPropAsAssertion(\"threw\", \"%n did not throw exception%C\");\n    mirrorPropAsAssertion(\"alwaysThrew\", \"%n did not always throw exception%C\");\n\n    if (commonJSModule) {\n        module.exports = assert;\n    } else {\n        sinon.assert = assert;\n    }\n}(typeof sinon == \"object\" && sinon || null, typeof window != \"undefined\" ? window : (typeof self != \"undefined\") ? self : global));\n\nreturn sinon;}.call(typeof window != 'undefined' && window || {}));\n/**\n * End of original code.\n */\n\n  // Every assertion in Sinon.JS fails by calling this method.\n  //\n  // (In fact, in vanilla Sinon.JS 1.0.0. this is not really the case,\n  //  because the \"fail\" method of the TestCase takes precedence over\n  // \"fail\" method of Sinon.JS)\n  //\n  // Instead of throwing an exception directly, delegate to the\n  // \"fail\" method of the TestCase. In Testrunner2, this means\n  // that the wrapped fail method is called and ensures that\n  // the entire body of each test function is executed.\n  //\n  this.sinon.assert.fail = function(msg) {\n    this.fail(msg, true);\n  };\n\n  // HTTP Status 207 is missing in map to resolve code to status text\n  this.sinon.FakeXMLHttpRequest.statusCodes[207] = \"Multi-Status\";\n\n\n  var origSinon = this.sinon;\n\n  // Expose to qooxdoo\n  var Sinon = qx.dev.unit.Sinon;\n  Sinon.getSinon = function() {\n    return origSinon;\n  };\n\n\n}).call(window);\n"
  ]
}