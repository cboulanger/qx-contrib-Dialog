{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-Dialog/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/core/Property.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "define",
    "statics",
    "__gatherDependency",
    "event",
    "type",
    "Data",
    "dispatch",
    "Direct",
    "Promise",
    "__checks",
    "__dereference",
    "$$inherit",
    "$$store",
    "runtime",
    "user",
    "theme",
    "inherit",
    "init",
    "useinit",
    "$$method",
    "get",
    "getAsync",
    "set",
    "setImpl",
    "setAsync",
    "reset",
    "refresh",
    "setRuntime",
    "resetRuntime",
    "setThemed",
    "resetThemed",
    "$$allowedKeys",
    "name",
    "dereference",
    "inheritable",
    "nullable",
    "themeable",
    "refine",
    "apply",
    "check",
    "transform",
    "async",
    "deferredInit",
    "validate",
    "isEqual",
    "$$allowedGroupKeys",
    "group",
    "mode",
    "$$inheritable",
    "__executeOptimizedRefresh",
    "clazz",
    "inheritables",
    "__getInheritablesOfClass",
    "length",
    "refresher",
    "__createRefresher",
    "prototype",
    "$$refreshInheritables",
    "properties",
    "$$properties",
    "push",
    "superclass",
    "code",
    "i",
    "l",
    "Function",
    "join",
    "attachRefreshInheritables",
    "core",
    "Property",
    "attachMethods",
    "config",
    "__attachGroupMethods",
    "__attachPropertyMethods",
    "upname",
    "firstUp",
    "members",
    "debug",
    "setter",
    "resetter",
    "styler",
    "unstyler",
    "argHandler",
    "shorthand",
    "a",
    "Error",
    "undefined",
    "__shouldBeDereferenced",
    "classname",
    "match",
    "allNames",
    "forEach",
    "conflictingClass",
    "tmp",
    "Object",
    "log",
    "Logger",
    "warn",
    "method",
    "store",
    "getName",
    "hasOwnProperty",
    "error",
    "$$install",
    "__installOptimizedGetter",
    "arguments",
    "setName",
    "__installOptimizedSetter",
    "executeOptimizedSetter",
    "value",
    "$$propertyMethod",
    "__errors",
    "obj",
    "id",
    "property",
    "variant",
    "constructor",
    "msg",
    "__unwrapFunctionFromCode",
    "instance",
    "args",
    "fn",
    "__installFunctionFromCode",
    "call",
    "ex",
    "setDisplayName",
    "executeOptimizedGetter",
    "__compileGetter",
    "__compileSetter",
    "lang",
    "String",
    "incomingValue",
    "hasCallback",
    "__getStore",
    "__emitIsEqualFunction",
    "__emitSetterPreConditions",
    "__emitOldValue",
    "__emitIncomingValueTransformation",
    "__emitOldNewComparison",
    "__emitIncomingValueValidation",
    "__emitStoreValue",
    "__emitStoreComputedValue",
    "__emitStoreInheritedPropertyValue",
    "__emitNormalizeUndefinedValues",
    "__emitCallCallback",
    "_getChildren",
    "unshift",
    "resetValue",
    "Class",
    "isDefined",
    "Interface",
    "Array"
  ],
  "mappings": "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",
  "file": "Property.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Martin Wittemann (martinwittemann)\n\n************************************************************************ */\n\n/**\n * Internal class for handling of dynamic properties. Should only be used\n * through the methods provided by {@link qx.Class}.\n *\n * For a complete documentation of properties take a look at\n * http://manual.qooxdoo.org/${qxversion}/pages/core.html#properties.\n *\n *\n * *Normal properties*\n *\n * The <code>properties</code> key in the class definition map of {@link qx.Class#define}\n * is used to generate the properties.\n *\n * Valid keys of a property definition are:\n *\n * <table>\n *   <tr><th>Name</th><th>Type</th><th>Description</th></tr>\n *   <tr><th>check</th><td>Array, String, Function</td><td>\n *     The check is used to check the type the incoming value of a property. This will only\n *     be executed in the source version. The build version will not contain the checks.\n *     The check can be:\n *     <ul>\n *       <li>a custom check function. The function takes the incoming value as a parameter and must\n *           return a boolean value to indicate whether the values is valid.\n *       </li>\n *       <li>inline check code as a string e.g. <code>\"value &gt; 0 && value &lt; 100\"</code></li>\n *       <li>a class name e.g. <code>qx.ui.form.Button</code></li>\n *       <li>a name of an interface the value must implement</li>\n *       <li>an array of all valid values</li>\n *       <li>one of the predefined checks: Boolean, String, Number, Integer, Float, Double,\n *           Object, Array, Map, Class, Mixin, Interface, Theme, Error, RegExp, Function,\n *           Date, Node, Element, Document, Window, Event\n *       </li>\n *     <ul>\n *   </td></tr>\n *   <tr><th>init</th><td>var</td><td>\n *     Sets the default/initial value of the property. If no property value is set or the property\n *     gets reset, the getter will return the <code>init</code> value.\n *   </td></tr>\n *   <tr><th>apply</th><td>String</td><td>\n *     On change of the property value the method of the specified name will be called. The signature of\n *     the method is <code>function(newValue, oldValue, propertyName)</code>. It is conventional to name\n *     the callback <code>_apply</code> + <i>PropertyName</i>, with the property name camel-cased (e.g.\n *     \"<i>_applyFooBar</i>\" for a property <i>fooBar</i>).\n *   </td></tr>\n *   <tr><th>event</th><td>String</td><td>\n *     On change of the property value an event with the given name will be dispatched. The event type is\n *     {@link qx.event.type.Data}.\n *   </td></tr>\n *   <tr><th>themeable</th><td>Boolean</td><td>\n *     Whether this property can be set using themes.\n *   </td></tr>\n *   <tr><th>inheritable</th><td>Boolean</td><td>\n *     Whether the property value should be inheritable. If the property does not have an user defined or an\n *     init value, the property will try to get the value from the parent of the current object.\n *   </td></tr>\n *   <tr><th>nullable</th><td>Boolean</td><td>\n *     Whether <code>null</code> is an allowed value of the property. This is complementary to the check\n *     defined using the <code>check</code> key.\n *   </td></tr>\n *   <tr><th>refine</th><td>Boolean</td><td>\n *     Whether the property definition is a refinement of a property in one of the super classes of the class.\n *     Only the <code>init</code> value can be changed using refine.\n *   </td></tr>\n *   <tr><th>transform</th><td>String</td><td>\n *     On setting of the property value the method of the specified name will\n *     be called. The signature of the method is <code>function(value, oldValue)</code>.\n *     The parameter <code>value</code> is the value passed to the setter, the\n *     parameter <code>oldValue</code> is the current value, or undefined if no value\n *     has been set previously.\n *     The function must return the modified or unmodified value.\n *     Transformation occurs before the check function, so both may be\n *     specified if desired.  Alternatively, the transform function may throw\n *     an error if the value passed to it is invalid.\n *   </td></tr>\n *   <tr><th>validate</th><td>Function, String</td><td>\n *     On setting of the property value the method of the specified name will\n *     be called. The signature of the method is <code>function(value)</code>.\n *     The parameter <code>value</code> is the value passed to the setter.\n *     If the validation fails, an <code>qx.core.ValidationError</code> should\n *     be thrown by the validation function. Otherwise, just do nothing in the\n *     function.<br>\n *     If a string is given, the string should hold a reference to a member\n *     method.<br>\n *     <code>\"<i>methodname</i>\"</code> for example\n *     <code>\"__validateProperty\"</code><br>\n *     There are some default validators in the {@link qx.util.Validate} class.\n *     See this documentation for usage examples.\n *   </td></tr>\n *   <tr><th>dereference</th><td>Boolean</td><td>\n *     By default, the references to the values (current, init, ...) of the\n *     property will be stored as references on the object. When disposing\n *     this object, the references will not be deleted. Setting the\n *     dereference key to true tells the property system to delete all\n *     connections made by this property on dispose. This can be necessary for\n *     disconnecting DOM objects to allow the garbage collector to work\n *     properly.\n *   </td></tr>\n *   <tr><th>deferredInit</th><td>Boolean</td><td>\n *     Allow for a deferred initialization for reference types. Defaults to false.\n *   </td></tr>\n *   <tr><th>isEqual</th><td>Function, String</td><td>\n *     On setting of the property value the method of the specified name will\n *     be called to test if two values are equal. These checks for equality are\n *     performed by the Property-System to decide whether further actions (like\n *     e.g. calling applier methods or firing of events) are needed.\n *     The signature of the method is <code>function(valueA, valueB)</code>.\n *     <br/>\n *     The <i>isEqual</i>-value can be:\n *     <ul>\n *       <li>a custom check function.\n *           The function takes two values as parameter and must return a\n *           boolean value to indicate whether the values are considered\n *           equal e.g. <code>function (a, b) { return Object.is(a, b); }</code>.</li>\n *       <li>inline check code as a string\n *           which will be invoked with two parameters <code>a</code> and\n *           <code>b</code> and results in a boolean value to indicate whether\n *           the values are equal e.g. <code>\"a.length() == b.length()\"</code>.</li>\n *       <li>reference to a member method as string\n *           <code>\"<i>methodname</i>\"</code> which will be invoked with two\n *           parameters and returns a boolean value indicating whether the two\n *           values are considered equal for example <code>\"__areTheSame\"</code>.</li>\n *     </ul>\n *     The default implementation (if this key is undefined) will check the\n *     equality by using the <i>identity</i> operator (===) as if defined like\n *     <code>\"a===b\"</code>.\n *   </td></tr>\n * </table>\n *\n * *Property groups*\n *\n * Property groups are defined in a similar way but support a different set of keys:\n *\n * <table>\n *   <tr><th>Name</th><th>Type</th><th>Description</th></tr>\n *   <tr><th>group</th><td>String[]</td><td>\n *     A list of property names which should be set using the property group.\n *   </td></tr>\n *   <tr><th>mode</th><td>String</td><td>\n *     If mode is set to <code>\"shorthand\"</code>, the properties can be set using a CSS like shorthand mode.\n *   </td></tr>\n *   <tr><th>themeable</th><td>Boolean</td><td>\n *     Whether this property can be set using themes.\n *   </td></tr>\n * </table>\n *\n * @internal\n * @ignore(qx.Interface)\n */\nqx.Bootstrap.define(\"qx.core.Property\",\n{\n  statics :\n  {\n    /**\n     * This is a method which does nothing than gathering dependencies for the\n     * module system. Calling this method is useless because it does nothing.\n     */\n    __gatherDependency : function() {\n      if (qx.core.Environment.get(\"module.events\")) {\n        qx.event.type.Data;\n        qx.event.dispatch.Direct;\n      }\n      if (qx.core.Environment.get(\"qx.promise\")) {\n        qx.Promise;\n      }\n    },\n\n\n    /**\n     * Built-in checks\n     * The keys could be used in the check of the properties\n     */\n    __checks :\n    {\n      \"Boolean\"   : 'qx.core.Assert.assertBoolean(value, msg) || true',\n      \"String\"    : 'qx.core.Assert.assertString(value, msg) || true',\n\n      \"Number\"    : 'qx.core.Assert.assertNumber(value, msg) || true',\n      \"Integer\"   : 'qx.core.Assert.assertInteger(value, msg) || true',\n      \"PositiveNumber\" : 'qx.core.Assert.assertPositiveNumber(value, msg) || true',\n      \"PositiveInteger\" : 'qx.core.Assert.assertPositiveInteger(value, msg) || true',\n\n      \"Error\"     : 'qx.core.Assert.assertInstance(value, Error, msg) || true',\n      \"RegExp\"    : 'qx.core.Assert.assertInstance(value, RegExp, msg) || true',\n\n      \"Object\"    : 'qx.core.Assert.assertObject(value, msg) || true',\n      \"Array\"     : 'qx.core.Assert.assertArray(value, msg) || true',\n      \"Map\"       : 'qx.core.Assert.assertMap(value, msg) || true',\n\n      \"Function\"  : 'qx.core.Assert.assertFunction(value, msg) || true',\n      \"Date\"      : 'qx.core.Assert.assertInstance(value, Date, msg) || true',\n      \"Node\"      : 'value !== null && value.nodeType !== undefined',\n      \"Element\"   : 'value !== null && value.nodeType === 1 && value.attributes',\n      \"Document\"  : 'value !== null && value.nodeType === 9 && value.documentElement',\n      \"Window\"    : 'value !== null && value.document',\n      \"Event\"     : 'value !== null && value.type !== undefined',\n\n      \"Class\"     : 'value !== null && value.$$type === \"Class\"',\n      \"Mixin\"     : 'value !== null && value.$$type === \"Mixin\"',\n      \"Interface\" : 'value !== null && value.$$type === \"Interface\"',\n      \"Theme\"     : 'value !== null && value.$$type === \"Theme\"',\n\n      \"Color\"     : 'qx.lang.Type.isString(value) && qx.util.ColorUtil.isValidPropertyValue(value)',\n      \"Decorator\" : 'value !== null && qx.theme.manager.Decoration.getInstance().isValidPropertyValue(value)',\n      \"Font\"      : 'value !== null && qx.theme.manager.Font.getInstance().isDynamic(value)'\n    },\n\n\n    /**\n     * Contains types from {@link #__checks} list which need to be dereferenced\n     */\n    __dereference :\n    {\n      \"Node\"      : true,\n      \"Element\"   : true,\n      \"Document\"  : true,\n      \"Window\"    : true,\n      \"Event\"     : true\n    },\n\n\n    /**\n     * Inherit value, used to override defaults etc. to force inheritance\n     * even if property value is not undefined (through multi-values)\n     *\n     * @internal\n     */\n    $$inherit : \"inherit\",\n\n\n    /**\n     * Caching field names for each property created\n     *\n     * @internal\n     */\n    $$store :\n    {\n      runtime : {},\n      user    : {},\n      theme   : {},\n      inherit : {},\n      init    : {},\n      useinit : {}\n    },\n\n\n    /**\n     * Caching function names for each property created\n     *\n     * @internal\n     */\n    $$method :\n    {\n      get          : {},\n      getAsync     : {},\n      set          : {},\n      setImpl      : {},\n      setAsync     : {},\n      reset        : {},\n      init         : {},\n      refresh      : {},\n      setRuntime   : {},\n      resetRuntime : {},\n      setThemed    : {},\n      resetThemed  : {}\n    },\n\n\n    /**\n     * Supported keys for property definitions\n     *\n     * @internal\n     */\n    $$allowedKeys :\n    {\n      \"@\"          : \"object\",   // Anything\n      name         : \"string\",   // String\n      dereference  : \"boolean\",  // Boolean\n      inheritable  : \"boolean\",  // Boolean\n      nullable     : \"boolean\",  // Boolean\n      themeable    : \"boolean\",  // Boolean\n      refine       : \"boolean\",  // Boolean\n      init         : null,       // var\n      apply        : \"string\",   // String\n      event        : \"string\",   // String\n      check        : null,       // Array, String, Function\n      transform    : \"string\",   // String\n      async        : \"boolean\",  // Boolean\n      deferredInit : \"boolean\",  // Boolean\n      validate     : null,       // String, Function\n      isEqual      : null        // String, Function\n    },\n\n\n    /**\n     * Supported keys for property group definitions\n     *\n     * @internal\n     */\n    $$allowedGroupKeys :\n    {\n      \"@\"       : \"object\",   // Anything\n      name      : \"string\",   // String\n      group     : \"object\",   // Array\n      mode      : \"string\",   // String\n      themeable : \"boolean\"   // Boolean\n    },\n\n\n    /** Contains names of inheritable properties, filled by {@link qx.Class.define} */\n    $$inheritable : {},\n\n\n    /**\n     * Generate optimized refresh method and  attach it to the class' prototype\n     *\n     * @param clazz {Class} clazz to which the refresher should be added\n     */\n    __executeOptimizedRefresh : function(clazz)\n    {\n      var inheritables = this.__getInheritablesOfClass(clazz);\n\n      if (!inheritables.length) {\n        var refresher = function () {};\n      } else {\n        refresher = this.__createRefresher(inheritables);\n      }\n\n      clazz.prototype.$$refreshInheritables = refresher;\n    },\n\n\n    /**\n     * Get the names of all inheritable properties of the given class\n     *\n     * @param clazz {Class} class to get the inheritable properties of\n     * @return {String[]} List of property names\n     */\n    __getInheritablesOfClass : function(clazz)\n    {\n      var inheritable = [];\n\n      while(clazz)\n      {\n        var properties = clazz.$$properties;\n\n        if (properties)\n        {\n          for (var name in this.$$inheritable)\n          {\n            // Whether the property is available in this class\n            // and whether it is inheritable in this class as well\n            if (properties[name] && properties[name].inheritable)\n            {\n              inheritable.push(name);\n            }\n          }\n        }\n\n        clazz = clazz.superclass;\n      }\n\n      return inheritable;\n    },\n\n\n    /**\n     * Assemble the refresher code and return the generated function\n     *\n     * @param inheritables {String[]} list of inheritable properties\n     * @return {Function} refresher function\n     */\n    __createRefresher : function(inheritables)\n    {\n      var inherit = this.$$store.inherit;\n      var init = this.$$store.init;\n      var refresh = this.$$method.refresh;\n\n      var code = [\n        \"var parent = this.getLayoutParent();\",\n        \"if (!parent) return;\"\n      ];\n\n      for (var i=0, l=inheritables.length; i<l; i++)\n      {\n        var name = inheritables[i];\n        code.push(\n          \"var value = parent.\", inherit[name],\";\",\n          \"if (value===undefined) value = parent.\", init[name], \";\",\n          \"this.\", refresh[name], \"(value);\"\n        );\n      }\n\n      return new Function(code.join(\"\"));\n    },\n\n\n    /**\n     * Attach $$refreshInheritables method stub to the given class\n     *\n     * @param clazz {Class} clazz to which the refresher should be added\n     */\n    attachRefreshInheritables : function(clazz)\n    {\n      clazz.prototype.$$refreshInheritables = function()\n      {\n        qx.core.Property.__executeOptimizedRefresh(clazz);\n        return this.$$refreshInheritables();\n      };\n    },\n\n\n    /**\n     * Attach one property to class\n     *\n     * @param clazz {Class} Class to attach properties to\n     * @param name {String} Name of property\n     * @param config {Map} Configuration map of property\n     */\n    attachMethods : function(clazz, name, config)\n    {\n      // Divide groups from \"normal\" properties\n      config.group ?\n        this.__attachGroupMethods(clazz, config, name) :\n        this.__attachPropertyMethods(clazz, config, name);\n    },\n\n\n    /**\n     * Attach group methods\n     *\n     * @param clazz {Class} Class to attach properties to\n     * @param config {Map} Property configuration\n     * @param name {String} Name of the property\n     */\n    __attachGroupMethods : function(clazz, config, name)\n    {\n      var upname = qx.Bootstrap.firstUp(name);\n      var members = clazz.prototype;\n      var themeable = config.themeable === true;\n\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (qx.core.Environment.get(\"qx.debug.property.level\") > 1) {\n          qx.Bootstrap.debug(\"Generating property group: \" + name);\n        }\n      }\n\n      var setter = [];\n      var resetter = [];\n\n      if (themeable)\n      {\n        var styler = [];\n        var unstyler = [];\n      }\n\n      var argHandler = \"var a=arguments[0] instanceof Array?arguments[0]:arguments;\";\n\n      setter.push(argHandler);\n\n      if (themeable) {\n        styler.push(argHandler);\n      }\n\n      if (config.mode == \"shorthand\")\n      {\n        var shorthand = \"a=qx.lang.Array.fromShortHand(qx.lang.Array.fromArguments(a));\";\n        setter.push(shorthand);\n\n        if (themeable) {\n          styler.push(shorthand);\n        }\n      }\n\n      for (var i=0, a=config.group, l=a.length; i<l; i++)\n      {\n        if (qx.core.Environment.get(\"qx.debug\"))\n        {\n          if (!this.$$method.set[a[i]]||!this.$$method.reset[a[i]]) {\n            throw new Error(\"Cannot create property group '\" + name + \"' including non-existing property '\" + a[i] + \"'!\");\n          }\n        }\n\n        setter.push(\"this.\", this.$$method.set[a[i]], \"(a[\", i, \"]);\");\n        resetter.push(\"this.\", this.$$method.reset[a[i]], \"();\");\n\n        if (themeable)\n        {\n          if (qx.core.Environment.get(\"qx.debug\"))\n          {\n            if (!this.$$method.setThemed[a[i]]) {\n              throw new Error(\"Cannot add the non themable property '\" + a[i] + \"' to the themable property group '\"+ name +\"'\");\n            }\n          }\n\n          styler.push(\"this.\", this.$$method.setThemed[a[i]], \"(a[\", i, \"]);\");\n          unstyler.push(\"this.\", this.$$method.resetThemed[a[i]], \"();\");\n        }\n      }\n\n      // Attach setter\n      this.$$method.set[name] = \"set\" + upname;\n      members[this.$$method.set[name]] = new Function(setter.join(\"\"));\n\n      // Attach resetter\n      this.$$method.reset[name] = \"reset\" + upname;\n      members[this.$$method.reset[name]] = new Function(resetter.join(\"\"));\n\n      if (themeable)\n      {\n        // Attach styler\n        this.$$method.setThemed[name] = \"setThemed\" + upname;\n        members[this.$$method.setThemed[name]] = new Function(styler.join(\"\"));\n\n        // Attach unstyler\n        this.$$method.resetThemed[name] = \"resetThemed\" + upname;\n        members[this.$$method.resetThemed[name]] = new Function(unstyler.join(\"\"));\n      }\n    },\n\n\n    /**\n     * Attach property methods\n     *\n     * @param clazz {Class} Class to attach properties to\n     * @param config {Map} Property configuration\n     * @param name {String} Name of the property\n     */\n    __attachPropertyMethods : function(clazz, config, name)\n    {\n      var upname = qx.Bootstrap.firstUp(name);\n      var members = clazz.prototype;\n\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (qx.core.Environment.get(\"qx.debug.property.level\") > 1) {\n          qx.Bootstrap.debug(\"Generating property wrappers: \" + name);\n        }\n      }\n\n      // Fill dispose value\n      if (config.dereference === undefined && typeof config.check === \"string\") {\n        config.dereference = this.__shouldBeDereferenced(config.check);\n      }\n\n      if (!qx.core.Environment.get(\"qx.promise\")) {\n        if (config.async) {\n          this.warn(\"Asynchronous property \" + clazz.classname +\".\" + name + \" is switched to synchronous because qx.promise==false\");\n          config.async = false;\n        }\n        if (config.check == \"qx.Promise\") {\n          this.error(\"Cannot implement check for property \" + clazz.classname +\".\" + name + \" because qx.promise==false\");\n          delete config.check;\n        }\n      }\n      \n      // Check for method name conflicts\n      if (qx.core.Environment.get(\"qx.debug\")) {\n      \t// Exclude qx.data.model.* because that's from marshalling and will cause conflicts to be reported\n      \tif (clazz.classname && !clazz.classname.match(/^qx.data.model/)) {\n\t\t      var allNames = [ \"get\" + upname, \"set\" + upname, \"reset\" + upname, \"setRuntime\" + upname, \"resetRuntime\" + upname ];\n\t\t      if (config.async) {\n\t\t      \tallNames.push(\"get\" + upname + \"Async\");\n\t\t      \tallNames.push(\"set\" + upname + \"Async\");\n\t\t      }\n\t\t      if (config.inheritable || config.apply || config.event || config.deferredInit) {\n\t\t      \tallNames.push(\"init\" + upname);\n\t\t      }\n\t\t      if (config.inheritable) {\n\t\t      \tallNames.push(\"refresh\" + upname);\n\t\t      }\n\t\t      if (config.themeable) {\n\t\t      \tallNames.push(\"getThemed\" + upname);\n\t\t      \tallNames.push(\"setThemed\" + upname);\n\t\t      \tallNames.push(\"resetThemed\" + upname);\n\t\t      }\n\t\t      if (config.check === \"Boolean\") {\n\t\t      \tallNames.push(\"is\" + upname);\n\t\t      \tallNames.push(\"toggle\" + upname);\n\t\t      }\n          allNames.forEach(function(name) {\n            if (clazz.superclass.prototype[name] !== undefined) {\n              var conflictingClass = null;\n              for (var tmp = clazz.superclass; tmp && tmp != qx.core.Object; tmp = tmp.superclass) {\n                if (tmp.superclass.prototype[name] === undefined) {\n                  conflictingClass = tmp;\n                  break;\n                }\n              }\n              if (conflictingClass) {\n                qx.log.Logger.warn(\"Conflicting property method \" + clazz.classname + \".\" + name + \" with \" + conflictingClass.classname);\n              }\n            }\n          });\n      \t}\n      }\n\n      var method = this.$$method;\n      var store = this.$$store;\n\n      store.runtime[name] = \"$$runtime_\" + name;\n      store.user[name] = \"$$user_\" + name;\n      store.theme[name] = \"$$theme_\" + name;\n      store.init[name] = \"$$init_\" + name;\n      store.inherit[name] = \"$$inherit_\" + name;\n      store.useinit[name] = \"$$useinit_\" + name;\n\n      var getName = method.get[name] = \"get\" + upname;\n      members[method.get[name]] = new Function(\n          \"this.\" + getName + \".$$install && this.\" + getName + \".$$install();\" +\n          \"return this.\" + getName + \".apply(this, arguments);\"); \n      if (config.async) {\n        \n      \tif (qx.core.Environment.get(\"qx.debug\")) {\n      \t\tif (members.hasOwnProperty(getName + \"Async\")) {\n      \t\t\tthis.error(\"Asynchronous property \" + clazz.classname +\".\" + name + \" is replacing \" + getName + \"Async() method in same class\");\n      \t\t} else if (members[getName + \"Async\"] !== undefined) {\n      \t\t\tthis.warn(\"Asynchronous property \" + clazz.classname +\".\" + name + \" is overriding \" + getName + \"Async() method\");\n      \t\t}\n      \t}\n\t      method.getAsync[name] = getName + \"Async\";\n\t      members[method.getAsync[name]] = new Function(\n\t          \"this.\" + getName + \".$$install && this.\" + getName + \".$$install.call(this);\" +\n\t          \"return this.\" + getName + \"Async.apply(this, arguments);\");\n      }\n      members[method.get[name]].$$install = function() {\n        qx.core.Property.__installOptimizedGetter(clazz, name, \"get\", arguments);\n        if (config.async) {\n        \tqx.core.Property.__installOptimizedGetter(clazz, name, \"getAsync\", arguments);\n        }\n      };\n\n      var setName = method.set[name] = \"set\" + upname;\n      members[setName] = new Function(\n          \"this.\" + setName + \".$$install && this.\" + setName + \".$$install.call(this);\" +\n          \"return this.\" + setName + \".apply(this, arguments);\");\n      method.setAsync[name] = \"set\" + upname + \"Async\";\n      if (config.async) {\n      \tif (qx.core.Environment.get(\"qx.debug\")) {\n      \t\tif (members.hasOwnProperty(setName + \"Async\")) {\n      \t\t\tthis.error(\"Asynchronous property \" + clazz.classname +\".\" + name + \" is replacing \" + setName + \"Async() method in same class\");\n      \t\t} else if (members[setName + \"Async\"] !== undefined) {\n      \t\t\tthis.warn(\"Asynchronous property \" + clazz.classname +\".\" + name + \" is overriding \" + setName + \"Async() method\");\n      \t\t}\n      \t}\n        members[setName + \"Async\"] = new Function(\n            \"this.\" + setName + \".$$install && this.\" + setName + \".$$install.call(this);\" +\n            \"return this.\" + setName + \"Async.apply(this, arguments);\");\n      }\n      method.setImpl[name] = \"$$set\" + upname + \"Impl\";\n      members[setName].$$install = function() {\n        qx.core.Property.__installOptimizedSetter(clazz, name, \"set\");\n        qx.core.Property.__installOptimizedSetter(clazz, name, \"setImpl\");\n        if (config.async) {\n          qx.core.Property.__installOptimizedSetter(clazz, name, \"setAsync\");\n        }\n      };\n\n      method.reset[name] = \"reset\" + upname;\n      members[method.reset[name]] = function() {\n        return qx.core.Property.executeOptimizedSetter(this, clazz, name, \"reset\");\n      };\n      members[method.reset[name]].$$install = function() {\n        qx.core.Property.__installOptimizedSetter(clazz, name, \"reset\");\n      };\n\n      if (config.inheritable || config.apply || config.event || config.deferredInit)\n      {\n        method.init[name] = \"init\" + upname;\n        members[method.init[name]] = function(value) {\n          return qx.core.Property.executeOptimizedSetter(this, clazz, name, \"init\", arguments);\n        };\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          members[method.init[name]].$$propertyMethod = true;\n        }\n      }\n\n      if (config.inheritable)\n      {\n        method.refresh[name] = \"refresh\" + upname;\n        members[method.refresh[name]] = function(value) {\n          return qx.core.Property.executeOptimizedSetter(this, clazz, name, \"refresh\", arguments);\n        };\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          members[method.refresh[name]].$$propertyMethod = true;\n        }\n      }\n\n      method.setRuntime[name] = \"setRuntime\" + upname;\n      members[method.setRuntime[name]] = function(value) {\n        return qx.core.Property.executeOptimizedSetter(this, clazz, name, \"setRuntime\", arguments);\n      };\n\n      method.resetRuntime[name] = \"resetRuntime\" + upname;\n      members[method.resetRuntime[name]] = function() {\n        return qx.core.Property.executeOptimizedSetter(this, clazz, name, \"resetRuntime\");\n      };\n\n      if (config.themeable)\n      {\n        method.setThemed[name] = \"setThemed\" + upname;\n        members[method.setThemed[name]] = function(value) {\n          return qx.core.Property.executeOptimizedSetter(this, clazz, name, \"setThemed\", arguments);\n        };\n\n        method.resetThemed[name] = \"resetThemed\" + upname;\n        members[method.resetThemed[name]] = function() {\n          return qx.core.Property.executeOptimizedSetter(this, clazz, name, \"resetThemed\");\n        };\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          members[method.setThemed[name]].$$propertyMethod = true;\n          members[method.resetThemed[name]].$$propertyMethod = true;\n        }\n      }\n\n      if (config.check === \"Boolean\")\n      {\n        members[\"toggle\" + upname] = new Function(\"return this.\" + method.set[name] + \"(!this.\" + method.get[name] + \"())\");\n        members[\"is\" + upname] = new Function(\"return this.\" + method.get[name] + \"()\");\n\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          members[\"toggle\" + upname].$$propertyMethod = true;\n          members[\"is\" + upname].$$propertyMethod = true;\n        }\n      }\n\n      // attach a flag to make generated property methods\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        members[method.get[name]].$$propertyMethod = true;\n        members[method.set[name]].$$propertyMethod = true;\n        members[method.reset[name]].$$propertyMethod = true;\n        members[method.setRuntime[name]].$$propertyMethod = true;\n        members[method.resetRuntime[name]].$$propertyMethod = true;\n      }\n    },\n\n\n    /**\n     * Returns if the reference for the given property check should be removed\n     * on dispose.\n     *\n     * @param check {var} The check of the property definition.\n     * @return {Boolean} If the dereference key should be set.\n     */\n    __shouldBeDereferenced :  function(check) {\n      return !!this.__dereference[check];\n    },\n\n\n    /** @type {Map} Internal data field for error messages used by {@link #error} */\n    __errors :\n    {\n      0 : 'Could not change or apply init value after constructing phase!',\n      1 : 'Requires exactly one argument!',\n      2 : 'Undefined value is not allowed!',\n      3 : 'Does not allow any arguments!',\n      4 : 'Null value is not allowed!',\n      5 : 'Is invalid!'\n    },\n\n\n    /**\n     * Error method used by the property system to report errors.\n     *\n     * @param obj {qx.core.Object} Any qooxdoo object\n     * @param id {Integer} Numeric error identifier\n     * @param property {String} Name of the property\n     * @param variant {String} Name of the method variant e.g. \"set\", \"reset\", ...\n     * @param value {var} Incoming value\n     */\n    error : function(obj, id, property, variant, value)\n    {\n      var classname = obj.constructor.classname;\n      var msg = \"Error in property \" + property + \" of class \" + classname +\n        \" in method \" + this.$$method[variant][property] + \" with incoming value '\" + value + \"': \";\n\n      throw new Error(msg + (this.__errors[id] || \"Unknown reason: \" + id));\n    },\n\n\n    /**\n     * Compiles a string builder object to a function, executes the function and\n     * returns the return value.\n     *\n     * @param instance {Object} Instance which have called the original method\n     * @param members {Object} Prototype members map where the new function should be stored\n     * @param name {String} Name of the property\n     * @param variant {String} Function variant e.g. get, set, reset, ...\n     * @param code {Array} Array which contains the code\n     * @param args {arguments} Incoming arguments of wrapper method\n     * @return {var} Return value of the generated function\n     */\n    __unwrapFunctionFromCode : function(instance, members, name, variant, code, args)\n    {\n    \tvar fn = this.__installFunctionFromCode(instance.constructor, name, variant, code, args);\n\n      // Executing new function\n      if (args === undefined) {\n        return fn.call(instance);\n      } else if (qx.core.Environment.get(\"qx.debug\")) {\n        return fn.apply(instance, args);\n      } else {\n        return fn.call(instance, args[0]);\n      }\n    },\n\n    \n    /**\n     * Takes a string builder object, converts it into a function, and installs it as\n     * a property accessor\n     *\n     * @param clazz {Class} Class to install the method into\n     * @param name {String} Name of the property\n     * @param variant {String} Function variant e.g. get, set, reset, ...\n     * @param code {Array} Array which contains the code\n     * @param args {arguments} Incoming arguments of wrapper method\n     * @return {var} Return value of the generated function\n     */\n    __installFunctionFromCode : function(clazz, name, variant, code, args)\n    {\n      var store = this.$$method[variant][name];\n\n      // Output generate code\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (qx.core.Environment.get(\"qx.debug.property.level\") > 1) {\n          qx.Bootstrap.debug(\"Code[\" + this.$$method[variant][name] + \"]: \" + code.join(\"\"));\n        }\n\n        // Overriding temporary wrapper\n        try{\n          clazz.prototype[store] =  new Function(\"value\", code.join(\"\"));\n        } catch(ex) {\n          throw new Error(\"Malformed generated code to unwrap method: \" + this.$$method[variant][name] + \"\\n\" + code.join(\"\"));\n        }\n      }\n      else\n      {\n        clazz.prototype[store] =  new Function(\"value\", code.join(\"\"));\n      }\n\n      // Enable profiling code\n      if (qx.core.Environment.get(\"qx.aspects\")) {\n        clazz.prototype[store] = qx.core.Aspect.wrap(clazz.classname + \".\" + store, clazz.prototype[store], \"property\");\n      }\n\n      qx.Bootstrap.setDisplayName(clazz.prototype[store], clazz.classname + \".prototype\", store);\n      return clazz.prototype[store];\n    },\n\n\n    /**\n     * Generates the optimized getter, installs it into the class prototype, and executes it\n     * Supported variants: get\n     *\n     * @param instance {Object} the instance which calls the method\n     * @param clazz {Class} the class which originally defined the property\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     * @return {var} Execute return value of apply generated function, generally the incoming value\n     */\n    executeOptimizedGetter : function(instance, clazz, name, variant)\n    {\n      var code = this.__compileGetter(clazz, name, variant);\n      var members = clazz.prototype;\n      return this.__unwrapFunctionFromCode(instance, members, name, variant, code);\n    },\n    \n    \n    /**\n     * Installs a getter into the class prototype, without executing it\n     * Supported variants: get\n     *\n     * @param clazz {Class} the class which originally defined the property\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     */\n    __installOptimizedGetter : function(clazz, name, variant)\n    {\n      var code = this.__compileGetter(clazz, name, variant);\n      this.__installFunctionFromCode(clazz, name, variant, code);\n    },\n    \n    \n    /**\n     * Compiles a getter into a string builder array\n     * Supported variants: get\n     *\n     * @param clazz {Class} the class which originally defined the property\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     * @return {String[]} the string builder array\n     */\n    __compileGetter: function(clazz, name, variant)\n    {\n      var config = clazz.$$properties[name];\n      var code = [];\n      var store = this.$$store;\n      \n      if (variant == \"getAsync\") {\n      \tcode.push(\"return qx.Promise.resolve(this.\" + this.$$method.get[name] + \"());\");\n      \treturn code;\n      }\n\n      code.push('if(this.', store.runtime[name], '!==undefined)');\n      code.push('return this.', store.runtime[name], ';');\n\n      if (config.inheritable)\n      {\n        code.push('else if(this.', store.inherit[name], '!==undefined)');\n        code.push('return this.', store.inherit[name], ';');\n        code.push('else ');\n      }\n\n      code.push('if(this.', store.user[name], '!==undefined)');\n      code.push('return this.', store.user[name], ';');\n\n      if (config.themeable)\n      {\n        code.push('else if(this.', store.theme[name], '!==undefined)');\n        code.push('return this.', store.theme[name], ';');\n      }\n\n      if (config.deferredInit && config.init === undefined)\n      {\n        code.push('else if(this.', store.init[name], '!==undefined)');\n        code.push('return this.', store.init[name], ';');\n      }\n\n      code.push('else ');\n\n      if (config.init !== undefined)\n      {\n        if (config.inheritable)\n        {\n          code.push('var init=this.', store.init[name], ';');\n\n          if (config.nullable) {\n            code.push('if(init==qx.core.Property.$$inherit)init=null;');\n          }\n\n          code.push('return init;');\n        }\n        else\n        {\n          code.push('return this.', store.init[name], ';');\n        }\n      }\n      else if (config.inheritable || config.nullable) {\n        code.push('return null;');\n      } else {\n        code.push('throw new Error(\"Property ', name, ' of an instance of ', clazz.classname, ' is not (yet) ready!\");');\n      }\n\n      return code;\n    },\n\n\n    /**\n     * Generates the optimized setter\n     * Supported variants: set, reset, init, refresh, style, unstyle\n     *\n     * @param instance {Object} the instance which calls the method\n     * @param clazz {Class} the class which originally defined the property\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     * @param args {arguments} Incoming arguments of wrapper method\n     * @return {var} Execute return value of apply generated function, generally the incoming value\n     */\n    executeOptimizedSetter : function(instance, clazz, name, variant, args)\n    {\n    \tvar code = this.__compileSetter(clazz, name, variant);\n      var members = clazz.prototype;\n      return this.__unwrapFunctionFromCode(instance, members, name, variant, code, args);\n    },\n    \n    \n    /**\n     * Installs a setter into the class prototype, without executing it\n     * Supported variants: set\n     *\n     * @param clazz {Class} the class which originally defined the property\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     * @return {var} Return value of the generated function\n     */\n    __installOptimizedSetter : function(clazz, name, variant)\n    {\n    \tvar code = this.__compileSetter(clazz, name, variant);\n      return this.__installFunctionFromCode(clazz, name, variant, code);\n    },\n    \n    \n    /**\n     * Compiles a setter into a string builder array\n     * Supported variants: set, setThemed, setRuntime, init\n     *\n     * @param instance {Object} the instance which calls the method\n     * @param clazz {Class} the class which originally defined the property\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     * @return {String[]} the string builder array\n     */\n    __compileSetter: function(clazz, name, variant) {\n      var config = clazz.$$properties[name];\n      var members = clazz.prototype;\n      var code = [];\n      \n      var upname = qx.lang.String.firstUp(name);\n      if (variant == \"setAsync\") {\n        code.push('return qx.Promise.resolve(this.$$set' + upname + \"Impl.apply(this, arguments));\");\n        return code;\n        \n      } else if (variant == \"set\") {\n        code.push(\n            'this.$$set' + upname + \"Impl.apply(this, arguments);\",\n            'return value;');\n        return code;\n        \n      }\n      \n      var incomingValue = \n        variant === \"setImpl\" ||\n        variant === \"setThemed\" || \n        variant === \"setRuntime\" || \n        (variant === \"init\" && config.init === undefined);\n      var hasCallback = config.apply || config.event || config.inheritable;\n\n\n      var store = this.__getStore(variant, name);\n\n      this.__emitIsEqualFunction(code, clazz, config, name);\n\n      this.__emitSetterPreConditions(code, config, name, variant, incomingValue);\n      \n      if (incomingValue || hasCallback) {\n        this.__emitOldValue(code, config, name);\n      }\n\n      if (incomingValue) {\n        this.__emitIncomingValueTransformation(code, clazz, config, name);\n      }\n\n      if (hasCallback) {\n        this.__emitOldNewComparison(code, incomingValue, store, variant);\n      }\n\n      if (config.inheritable) {\n        code.push('var inherit=prop.$$inherit;');\n      }\n\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (incomingValue) {\n          this.__emitIncomingValueValidation(code, config, clazz, name, variant);\n        }\n      }\n\n      if (!hasCallback) {\n        this.__emitStoreValue(code, name, variant, incomingValue);\n      } else {\n        this.__emitStoreComputedValue(code, config, name, variant, incomingValue);\n      }\n\n      if (config.inheritable) {\n        this.__emitStoreInheritedPropertyValue(code, config, name, variant);\n      } else if (hasCallback) {\n        this.__emitNormalizeUndefinedValues(code, config, name, variant);\n      }\n\n      if (hasCallback)\n      {\n        // Emit callback and event firing; Refreshing children (5th parameter) requires the parent/children interface\n        this.__emitCallCallback(code, config, name, variant, !!(config.inheritable && members._getChildren));\n      }\n\n      // Return value\n      if (incomingValue) {\n        code.unshift('function set(value){');\n        code.push('}');\n        if (qx.core.Environment.get(\"qx.promise\") && (!config.check || config.check != \"qx.Promise\")) {\n          code.push(\n              'var promise;',\n              'if (value instanceof qx.Promise) ',\n                'promise = value.then(set.bind(this));',\n              'else ',\n                'promise = set.apply(this, arguments);');\n          if (variant == \"setImpl\") {\n            code.push(\"return promise;\");\n          } else {\n            code.push('return value;');\n          }\n        } else {\n          code.push(\n              'set.apply(this, arguments);',\n              'return value;');\n        }\n      }\n      \n      return code;\n    },\n\n\n    /**\n     * Get the object to store the value for the given variant\n     *\n     * @param variant {String} Method variant.\n     * @param name {String} name of the property\n     *\n     * @return {Object} the value store\n     */\n    __getStore : function(variant, name)\n    {\n      if (variant === \"setRuntime\" || variant === \"resetRuntime\") {\n        var store = this.$$store.runtime[name];\n      } else if (variant === \"setThemed\" || variant === \"resetThemed\") {\n        store = this.$$store.theme[name];\n      } else if (variant === \"init\") {\n        store = this.$$store.init[name];\n      } else {\n        store = this.$$store.user[name];\n      }\n\n      return store;\n    },\n\n\n    /**\n     * Emit code for the equality check evaluation\n     *\n     * @param code {String[]} String array to append the code to\n     * @param clazz {Class} the class which originally defined the property\n     * @param config {Object} The property configuration map\n     * @param name {String} name of the property\n     */\n    __emitIsEqualFunction : function (code, clazz, config, name)\n    {\n      code.push('var equ=');\n\n      if (typeof config.isEqual === \"function\")\n      {\n        code.push('function(a,b){return !!', clazz.classname, '.$$properties.',\n                  name, '.isEqual.call(this,a,b);};');\n      }\n      else if (typeof config.isEqual === \"string\")\n      {\n        var members = clazz.prototype;\n        // Name of member?\n        if (members[config.isEqual]!==undefined)\n        {\n          code.push('this.', config.isEqual, ';');\n        }\n        else // 'inline' code\n        {\n          code.push('function(a,b){return !!(', config.isEqual, ');};');\n        }\n      }\n      else if (typeof config.isEqual === \"undefined\")\n      {\n        code.push('function(a,b){return a===b;};');\n      }\n      else\n      {\n        throw new Error( \"Invalid type for 'isEqual' attribute \" +\n          \"of property '\" + name + \"' in class '\" + clazz.classname + \"'\" );\n      }\n    },\n\n\n    /**\n     * Emit code to check the arguments preconditions\n     *\n     * @param code {String[]} String array to append the code to\n     * @param config {Object} The property configuration map\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     * @param incomingValue {Boolean} Whether the setter has an incoming value\n     */\n    __emitSetterPreConditions : function(code, config, name, variant, incomingValue)\n    {\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        code.push('var prop=qx.core.Property;');\n\n        if (variant === \"init\") {\n          code.push('if(this.$$initialized)prop.error(this,0,\"', name, '\",\"', variant, '\",value);');\n        }\n\n        if (variant === \"refresh\")\n        {\n          // do nothing\n          // refresh() is internal => no arguments test\n          // also note that refresh() supports \"undefined\" values\n        }\n        else if (incomingValue)\n        {\n          // Check argument length\n          code.push('if(arguments.length!==1)prop.error(this,1,\"', name, '\",\"', variant, '\",value);');\n\n          // Undefined check\n          code.push('if(value===undefined)prop.error(this,2,\"', name, '\",\"', variant, '\",value);');\n        }\n        else\n        {\n          // Check argument length\n          code.push('if(arguments.length!==0)prop.error(this,3,\"', name, '\",\"', variant, '\",value);');\n        }\n      }\n      else\n      {\n        if (!config.nullable || config.check || config.inheritable) {\n          code.push('var prop=qx.core.Property;');\n        }\n\n        // Undefined check\n        if (variant === \"setImpl\") {\n          code.push('if(value===undefined)prop.error(this,2,\"', name, '\",\"', variant, '\",value);');\n        }\n      }\n    },\n\n\n    /**\n     * Emit code to apply the \"validate\" and \"transform\" config keys.\n     *\n     * @param code {String[]} String array to append the code to\n     * @param clazz {Class} the class which originally defined the property\n     * @param config {Object} The property configuration map\n     * @param name {String} name of the property\n     */\n    __emitIncomingValueTransformation : function(code, clazz, config, name)\n    {\n      // Call user-provided transform method, if one is provided.  Transform\n      // method should either throw an error or return the new value.\n      if (config.transform) {\n        code.push('value=this.', config.transform, '(value, old);');\n      }\n\n      // Call user-provided validate method, if one is provided.  Validate\n      // method should either throw an error or do nothing.\n      if (config.validate) {\n        // if it is a string\n        if (typeof config.validate === \"string\") {\n          code.push('this.', config.validate, '(value);');\n        // if its a function otherwise\n        } else if (config.validate instanceof Function) {\n          code.push(clazz.classname, '.$$properties.', name);\n          code.push('.validate.call(this, value);');\n        }\n      }\n    },\n\n\n    /**\n     * Emit code, which returns if the incoming value equals the current value.\n     *\n     * @param code {String[]} String array to append the code to\n     * @param incomingValue {Boolean} Whether the setter has an incoming value\n     * @param store {Object} The data store to use for the incoming value\n     * @param variant {String} Method variant.\n     */\n    __emitOldNewComparison : function(code, incomingValue, store, variant)\n    {\n      var resetValue = (\n        variant === \"reset\" ||\n        variant === \"resetThemed\" ||\n        variant === \"resetRuntime\"\n      );\n\n      if (incomingValue) {\n        code.push('if(equ.call(this,this.',store,',value))return value;');\n      } else if (resetValue) {\n        code.push('if(this.', store, '===undefined)return;');\n      }\n    },\n\n\n    /**\n     * Emit code, which performs validation of the incoming value according to\n     * the \"nullable\", \"check\" and \"inheritable\" config keys.\n     *\n     * @signature function(code, config, clazz, name, variant)\n     * @param code {String[]} String array to append the code to\n     * @param config {Object} The property configuration map\n     * @param clazz {Class} the class which originally defined the property\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     */\n    __emitIncomingValueValidation : qx.core.Environment.select(\"qx.debug\",\n    {\n      \"true\" : function(code, config, clazz, name, variant)\n      {\n        // Null check\n        if (!config.nullable) {\n          code.push('if(value===null)prop.error(this,4,\"', name, '\",\"', variant, '\",value);');\n        }\n\n        // Processing check definition\n        if (config.check !== undefined)\n        {\n          code.push('var msg = \"Invalid incoming value for property \\''+name+'\\' of class \\'' + clazz.classname + '\\'\";');\n\n          // Accept \"null\"\n          if (config.nullable) {\n            code.push('if(value!==null)');\n          }\n\n          // Inheritable properties always accept \"inherit\" as value\n          if (config.inheritable) {\n            code.push('if(value!==inherit)');\n          }\n\n          code.push('if(');\n\n          if (this.__checks[config.check] !== undefined)\n          {\n            code.push('!(', this.__checks[config.check], ')');\n          }\n          else if (qx.Class.isDefined(config.check))\n          {\n            code.push('qx.core.Assert.assertInstance(value, qx.Class.getByName(\"', config.check, '\"), msg)');\n          }\n          else if (qx.Interface && qx.Interface.isDefined(config.check))\n          {\n            code.push('qx.core.Assert.assertInterface(value, qx.Interface.getByName(\"', config.check, '\"), msg)');\n          }\n          else if (typeof config.check === \"function\")\n          {\n            code.push('!', clazz.classname, '.$$properties.', name);\n            code.push('.check.call(this, value)');\n          }\n          else if (typeof config.check === \"string\")\n          {\n            code.push('!(', config.check, ')');\n          }\n          else if (config.check instanceof Array)\n          {\n            code.push('qx.core.Assert.assertInArray(value, ', clazz.classname, '.$$properties.', name, '.check, msg)');\n          }\n          else\n          {\n            throw new Error(\"Could not add check to property \" + name + \" of class \" + clazz.classname);\n          }\n\n          code.push(')prop.error(this,5,\"', name, '\",\"', variant, '\",value);');\n        }\n      },\n\n      \"false\" : undefined\n    }),\n\n\n    /**\n     * Emit code to store the incoming value\n     *\n     * @param code {String[]} String array to append the code to\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     * @param incomingValue {Boolean} Whether the setter has an incoming value\n     */\n    __emitStoreValue : function(code, name, variant, incomingValue)\n    {\n      if (variant === \"setRuntime\")\n      {\n        code.push('this.', this.$$store.runtime[name], '=value;');\n      }\n      else if (variant === \"resetRuntime\")\n      {\n        code.push('if(this.', this.$$store.runtime[name], '!==undefined)');\n        code.push('delete this.', this.$$store.runtime[name], ';');\n      }\n      else if (variant === \"setImpl\")\n      {\n        code.push('this.', this.$$store.user[name], '=value;');\n      }\n      else if (variant === \"reset\")\n      {\n        code.push('if(this.', this.$$store.user[name], '!==undefined)');\n        code.push('delete this.', this.$$store.user[name], ';');\n      }\n      else if (variant === \"setThemed\")\n      {\n        code.push('this.', this.$$store.theme[name], '=value;');\n      }\n      else if (variant === \"resetThemed\")\n      {\n        code.push('if(this.', this.$$store.theme[name], '!==undefined)');\n        code.push('delete this.', this.$$store.theme[name], ';');\n      }\n      else if (variant === \"init\" && incomingValue)\n      {\n        code.push('this.', this.$$store.init[name], '=value;');\n      }\n    },\n\n\n    /**\n     * Emit code to store the incoming value and compute the \"old\" and \"computed\"\n     * values.\n     *\n     * @param code {String[]} String array to append the code to\n     * @param config {Object} The property configuration map\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     * @param incomingValue {Boolean} Whether the setter has an incoming value\n     */\n    __emitStoreComputedValue : function(code, config, name, variant, incomingValue)\n    {\n      code.push('var computed;');\n\n\n      // OLD = RUNTIME VALUE\n      code.push('if(this.', this.$$store.runtime[name], '!==undefined){');\n\n      if (variant === \"setRuntime\")\n      {\n        // Replace it with new value\n        code.push('computed=this.', this.$$store.runtime[name], '=value;');\n      }\n      else if (variant === \"resetRuntime\")\n      {\n        // Delete field\n        code.push('delete this.', this.$$store.runtime[name], ';');\n\n        // Complex computation of new value\n        code.push('if(this.', this.$$store.user[name], '!==undefined)');\n        code.push('computed=this.', this.$$store.user[name], ';');\n        code.push('else if(this.', this.$$store.theme[name], '!==undefined)');\n        code.push('computed=this.', this.$$store.theme[name], ';');\n        code.push('else if(this.', this.$$store.init[name], '!==undefined){');\n        code.push('computed=this.', this.$$store.init[name], ';');\n        code.push('this.', this.$$store.useinit[name], '=true;');\n        code.push('}');\n      }\n      else\n      {\n        // Use runtime value as it has higher priority\n        code.push('computed=this.', this.$$store.runtime[name], ';');\n\n        // Store incoming value\n        if (variant === \"setImpl\")\n        {\n          code.push('this.', this.$$store.user[name], '=value;');\n        }\n        else if (variant === \"reset\")\n        {\n          code.push('delete this.', this.$$store.user[name], ';');\n        }\n        else if (variant === \"setThemed\")\n        {\n          code.push('this.', this.$$store.theme[name], '=value;');\n        }\n        else if (variant === \"resetThemed\")\n        {\n          code.push('delete this.', this.$$store.theme[name], ';');\n        }\n        else if (variant === \"init\" && incomingValue)\n        {\n          code.push('this.', this.$$store.init[name], '=value;');\n        }\n      }\n\n      code.push('}');\n\n\n      // OLD = USER VALUE\n      code.push('else if(this.', this.$$store.user[name], '!==undefined){');\n\n      if (variant === \"setImpl\")\n      {\n        // Replace it with new value\n        code.push('computed=this.', this.$$store.user[name], '=value;');\n      }\n      else if (variant === \"reset\")\n      {\n        // Delete field\n        code.push('delete this.', this.$$store.user[name], ';');\n\n        // Complex computation of new value\n        code.push('if(this.', this.$$store.runtime[name], '!==undefined)');\n        code.push('computed=this.', this.$$store.runtime[name], ';');\n        code.push('if(this.', this.$$store.theme[name], '!==undefined)');\n        code.push('computed=this.', this.$$store.theme[name], ';');\n        code.push('else if(this.', this.$$store.init[name], '!==undefined){');\n        code.push('computed=this.', this.$$store.init[name], ';');\n        code.push('this.', this.$$store.useinit[name], '=true;');\n        code.push('}');\n      }\n      else\n      {\n        if (variant === \"setRuntime\")\n        {\n          // Use runtime value where it has higher priority\n          code.push('computed=this.', this.$$store.runtime[name], '=value;');\n        }\n        else if (config.inheritable)\n        {\n          // Use user value where it has higher priority\n          code.push('computed=this.', this.$$store.user[name], ';');\n        }\n        else\n        {\n          // Use user value where it has higher priority\n          code.push('computed=this.', this.$$store.user[name], ';');\n        }\n\n        // Store incoming value\n        if (variant === \"setThemed\")\n        {\n          code.push('this.', this.$$store.theme[name], '=value;');\n        }\n        else if (variant === \"resetThemed\")\n        {\n          code.push('delete this.', this.$$store.theme[name], ';');\n        }\n        else if (variant === \"init\" && incomingValue)\n        {\n          code.push('this.', this.$$store.init[name], '=value;');\n        }\n      }\n\n      code.push('}');\n\n\n      // OLD = THEMED VALUE\n      if (config.themeable)\n      {\n        code.push('else if(this.', this.$$store.theme[name], '!==undefined){');\n\n        if (variant === \"setRuntime\")\n        {\n          code.push('computed=this.', this.$$store.runtime[name], '=value;');\n        }\n\n        else if (variant === \"setImpl\")\n        {\n          code.push('computed=this.', this.$$store.user[name], '=value;');\n        }\n\n        // reset() is impossible, because the user has higher priority than\n        // the themed value, so the themed value has no chance to ever get used,\n        // when there is an user value, too.\n\n        else if (variant === \"setThemed\")\n        {\n          code.push('computed=this.', this.$$store.theme[name], '=value;');\n        }\n        else if (variant === \"resetThemed\")\n        {\n          // Delete entry\n          code.push('delete this.', this.$$store.theme[name], ';');\n\n          // Fallback to init value\n          code.push('if(this.', this.$$store.init[name], '!==undefined){');\n            code.push('computed=this.', this.$$store.init[name], ';');\n            code.push('this.', this.$$store.useinit[name], '=true;');\n          code.push('}');\n        }\n        else if (variant === \"init\")\n        {\n          if (incomingValue) {\n            code.push('this.', this.$$store.init[name], '=value;');\n          }\n\n          code.push('computed=this.', this.$$store.theme[name], ';');\n        }\n        else if (variant === \"refresh\")\n        {\n          code.push('computed=this.', this.$$store.theme[name], ';');\n        }\n\n        code.push('}');\n      }\n\n\n      // OLD = INIT VALUE\n      code.push('else if(this.', this.$$store.useinit[name], '){');\n\n      if (variant === \"init\")\n      {\n        if (incomingValue) {\n          code.push('computed=this.', this.$$store.init[name], '=value;');\n        } else {\n          code.push('computed=this.', this.$$store.init[name], ';');\n        }\n\n        // useinit flag is already initialized\n      }\n\n      // reset(), resetRuntime() and resetStyle() are impossible, because the user and themed values have a\n      // higher priority than the init value, so the init value has no chance to ever get used,\n      // when there is an user or themed value, too.\n\n      else if (variant === \"setImpl\" || variant === \"setRuntime\" || variant === \"setThemed\" || variant === \"refresh\")\n      {\n        code.push('delete this.', this.$$store.useinit[name], ';');\n\n        if (variant === \"setRuntime\") {\n          code.push('computed=this.', this.$$store.runtime[name], '=value;');\n        } else if (variant === \"setImpl\") {\n          code.push('computed=this.', this.$$store.user[name], '=value;');\n        } else if (variant === \"setThemed\") {\n          code.push('computed=this.', this.$$store.theme[name], '=value;');\n        } else if (variant === \"refresh\") {\n          code.push('computed=this.', this.$$store.init[name], ';');\n        }\n      }\n\n      code.push('}');\n\n\n      // OLD = NONE\n\n      // reset(), resetRuntime() and resetStyle() are impossible because otherwise there\n      // is already an old value\n      if (variant === \"setImpl\" || variant === \"setRuntime\" || variant === \"setThemed\" || variant === \"init\")\n      {\n        code.push('else{');\n\n        if (variant === \"setRuntime\")\n        {\n          code.push('computed=this.', this.$$store.runtime[name], '=value;');\n        }\n\n        else if (variant === \"setImpl\")\n        {\n          code.push('computed=this.', this.$$store.user[name], '=value;');\n        }\n\n        else if (variant === \"setThemed\")\n        {\n          code.push('computed=this.', this.$$store.theme[name], '=value;');\n        }\n\n        else if (variant === \"init\")\n        {\n          if (incomingValue) {\n            code.push('computed=this.', this.$$store.init[name], '=value;');\n          } else {\n            code.push('computed=this.', this.$$store.init[name], ';');\n          }\n\n          code.push('this.', this.$$store.useinit[name], '=true;');\n        }\n\n        // refresh() will work with the undefined value, later\n        code.push('}');\n      }\n    },\n\n\n    /**\n     * Emit code to compute the \"old\" value.\n     *\n     * @param code {String[]} String array to append the code to\n     * @param config {Object} The property configuration map\n     * @param name {String} name of the property\n     */\n    __emitOldValue : function(code, config, name)\n    {\n      if (config.inheritable) {\n        code.push('var old=this.', this.$$store.inherit[name], ';');\n      } else {\n        code.push('var old;');\n      }\n\n      // OLD = RUNTIME VALUE\n      code.push('if(this.', this.$$store.runtime[name], '!==undefined){');\n      code.push('old=this.', this.$$store.runtime[name], ';');\n      code.push('}');\n\n      // OLD = USER VALUE\n      if (!config.inheritable) {\n        code.push('else if(this.', this.$$store.user[name], '!==undefined){');\n        code.push('old=this.', this.$$store.user[name], ';');\n        code.push('}');\n        \n        // OLD = THEMED VALUE\n        if (config.themeable) {\n          code.push('else if(this.', this.$$store.theme[name], '!==undefined){');\n          code.push('old=this.', this.$$store.theme[name], ';');\n          code.push('}');\n        }\n        \n        // OLD = INIT VALUE\n        code.push('else if(this.', this.$$store.useinit[name], '){');\n        code.push('old=this.', this.$$store.init[name], ';');\n        code.push('}');\n      }\n    },\n\n\n    /**\n     * Emit code to store the value of an inheritable property\n     *\n     * @param code {String[]} String array to append the code to\n     * @param config {Object} The property configuration map\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     */\n    __emitStoreInheritedPropertyValue : function(code, config, name, variant)\n    {\n      code.push('if(computed===undefined||computed===inherit){');\n\n      if (variant === \"refresh\") {\n        code.push('computed=value;');\n      } else {\n        code.push('var pa=this.getLayoutParent();if(pa)computed=pa.', this.$$store.inherit[name], ';');\n      }\n\n      // Fallback to init value if inheritance was unsuccessful\n      code.push('if((computed===undefined||computed===inherit)&&');\n      code.push('this.', this.$$store.init[name], '!==undefined&&');\n      code.push('this.', this.$$store.init[name], '!==inherit){');\n        code.push('computed=this.', this.$$store.init[name], ';');\n        code.push('this.', this.$$store.useinit[name], '=true;');\n      code.push('}else{');\n      code.push('delete this.', this.$$store.useinit[name], ';}');\n\n      code.push('}');\n\n      // Compare old/new computed value\n      code.push('if(equ.call(this,old,computed))return value;');\n\n      // Note: At this point computed can be \"inherit\" or \"undefined\".\n\n      // Normalize \"inherit\" to undefined and delete inherited value\n      code.push('if(computed===inherit){');\n      code.push('computed=undefined;delete this.', this.$$store.inherit[name], ';');\n      code.push('}');\n\n      // Only delete inherited value\n      code.push('else if(computed===undefined)');\n      code.push('delete this.', this.$$store.inherit[name], ';');\n\n      // Store inherited value\n      code.push('else this.', this.$$store.inherit[name], '=computed;');\n\n      // Protect against normalization\n      code.push('var backup=computed;');\n\n      // After storage finally normalize computed and old value\n      if (config.init !== undefined && variant !== \"init\") {\n        code.push('if(old===undefined)old=this.', this.$$store.init[name], \";\");\n      } else {\n        code.push('if(old===undefined)old=null;');\n      }\n      code.push('if(computed===undefined||computed==inherit)computed=null;');\n    },\n\n\n    /**\n     * Emit code to normalize the old and incoming values from undefined to\n     * <code>null</code>.\n     *\n     * @param code {String[]} String array to append the code to\n     * @param config {Object} The property configuration map\n     * @param name {String} name of the property\n     * @param variant {String} Method variant.\n     */\n    __emitNormalizeUndefinedValues : function(code, config, name, variant)\n    {\n      // Properties which are not inheritable have no possibility to get\n      // undefined at this position. (Hint: set(), setRuntime() and setThemed() only allow non undefined values)\n      if (variant !== \"setImpl\" && variant !== \"setRuntime\" && variant !== \"setThemed\") {\n        code.push('if(computed===undefined)computed=null;');\n      }\n\n      // Compare old/new computed value\n      code.push('if(equ.call(this,old,computed))return value;');\n\n      // Normalize old value\n      if (config.init !== undefined && variant !== \"init\") {\n        code.push('if(old===undefined)old=this.', this.$$store.init[name], \";\");\n      } else {\n        code.push('if(old===undefined)old=null;');\n      }\n    },\n\n\n    /**\n     * Emit code to call the apply method and fire the change event\n     *\n     * @param code {String[]} String array to append the code to\n     * @param config {Object} The property configuration map\n     * @param name {String} name of the property\n     * @param variant {String} variant of the method e.g. setThemed\n     * @param refresh {Boolean} if true, emit code to update the inherited values of child objects\n     */\n    __emitCallCallback : function(code, config, name, variant, refresh)\n    {\n      // Execute user configured setter\n      code.push('var promise;');\n      if (config.apply) {\n        code.push('promise = this.', config.apply, '(computed, old, \"', name, '\", \"', variant, '\");');\n      }\n      \n      if (config.async) {\n        code.push(\n        \t\t\"function fire() {\",\n              \"var promiseData = qx.Promise.resolve(computed);\",\n              \"var promise = promiseData;\"\n        \t\t);\n        \n        // Fire event\n        if (config.event) {\n          code.push(\n              \"var reg=qx.event.Registration;\",\n              \"if(reg.hasListener(this, '\", config.event, \"')) {\",\n                \"promise = reg.fireEventAsync(this, '\", config.event, \"', qx.event.type.Data, [computed, old]\", \");\",\n                \"promise = promise.then(function() { return computed; });\",\n              \"}\",\n              \"if(reg.hasListener(this, '\", config.event, \"Async'))\",\n                \"promise = promise.then(function() {\",\n                    \"return reg.fireEventAsync(this, '\", config.event, \"Async', qx.event.type.Data, [promiseData, old]\", \");\",\n                  \"}, this);\"\n              );\n        }\n        \n        // Emit code to update the inherited values of child objects\n        if (refresh) {\n          code.push(\n            'var a=this._getChildren();',\n            'if(a)',\n              'for(var i=0,l=a.length;i<l;i++){',\n                'if(a[i].', this.$$method.refresh[name], ')',\n                  'a[i].', this.$$method.refresh[name], '(backup);',\n              '}');\n        }\n        \n        code.push(\n            \"return promise;\",\n          \"}\");\n      } else {\n        code.push(\n          \"function fire() {\",\n          \"  var tracker={};\");\n            \n        // Fire event\n        if (config.event) {\n          code.push(\n              \"var reg=qx.event.Registration;\",\n              \n              \"if(reg.hasListener(this, '\", config.event, \"'))\",\n                \"qx.event.Utils.track(tracker, reg.fireEvent(this, '\", config.event, \"', qx.event.type.Data, [computed, old]\", \"));\");\n          if (qx.core.Environment.get(\"qx.promise\")) {\n            code.push(\n                \"if(reg.hasListener(this, '\", config.event, \"Async'))\",\n                  \"qx.event.Utils.then(tracker, function() {\\n\" +\n                  \"  return reg.fireEventAsync(this, '\", config.event, \"Async', qx.event.type.Data, [qx.Promise.resolve(computed), old]\", \");\\n\" +\n                  \"});\"\n                );\n          }\n        }\n        // Emit code to update the inherited values of child objects\n        if (refresh) {\n          code.push(\n            'var a=this._getChildren();',\n            'if(a)',\n              'for(var i=0,l=a.length;i<l;i++){',\n                'if(a[i].', this.$$method.refresh[name], ')',\n                  'a[i].', this.$$method.refresh[name], '(backup);',\n              '}');\n        }\n        \n        code.push(\n            \"if (tracker.promise)\\n\",\n            \"  return tracker.promise.then(function() { return computed; });\",\n            \"return computed;\",\n          \"}\");\n      }\n      \n      if (qx.core.Environment.get(\"qx.promise\")) {\n        code.push(\n            \"if(promise instanceof qx.Promise) \" +\n              \"return promise.then(fire, this); \"\n          );\n      }\n      code.push(\n        \"return fire.call(this);\"\n      );\n    }\n  }\n});\n"
  ]
}