{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/qx-contrib-Dialog/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/util/format/DateFormat.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "util",
    "format",
    "IFormat",
    "construct",
    "locale",
    "__initialLocale",
    "__locale",
    "__format",
    "toString",
    "DateFormat",
    "ISO_MASKS",
    "__UTC",
    "Date",
    "getDateFormat",
    "getLocale",
    "getDateTimeFormat",
    "statics",
    "getDateInstance",
    "_dateInstance",
    "getDateTimeInstance",
    "_dateTimeInstance",
    "ASSUME_YEAR_2000_THRESHOLD",
    "isoDate",
    "isoTime",
    "isoDateTime",
    "isoUtcDateTime",
    "AM_MARKER",
    "PM_MARKER",
    "members",
    "__parseFeed",
    "__parseRules",
    "__formatTree",
    "__fillNumber",
    "number",
    "minSize",
    "str",
    "length",
    "__getDayInYear",
    "date",
    "helpDate",
    "getTime",
    "day",
    "getDate",
    "getMonth",
    "setDate",
    "__thursdayOfSameWeek",
    "getDay",
    "__getWeekInYear",
    "thursdayDate",
    "weekYear",
    "getFullYear",
    "thursdayWeek1",
    "Math",
    "floor",
    "__getWeekInMonth",
    "__getWeekYear",
    "__isLeapYear",
    "year",
    "februaryDate",
    "__getMonthAndDayFromDayOfYear",
    "dayOfYear",
    "month",
    "dayCounter",
    "i",
    "tempDate",
    "days",
    "__getYearFromWeekYearAndMonth",
    "dayOfMonth",
    "setLocale",
    "value",
    "Error",
    "resetLocale",
    "undefined",
    "Manager",
    "getInstance",
    "isNaN",
    "log",
    "Logger",
    "error",
    "getUTCFullYear",
    "getUTCMonth",
    "getUTCDate",
    "getUTCHours",
    "getUTCMinutes",
    "getUTCSeconds",
    "getUTCMilliseconds",
    "fullYear",
    "dayOfWeek",
    "hours",
    "getHours",
    "minutes",
    "getMinutes",
    "seconds",
    "getSeconds",
    "ms",
    "getMilliseconds",
    "timezoneOffset",
    "getTimezoneOffset",
    "timezoneSign",
    "timezoneHours",
    "abs",
    "timezoneMinutes",
    "__initFormatTree",
    "output",
    "currAtom",
    "type",
    "text",
    "wildcardChar",
    "character",
    "wildcardSize",
    "size",
    "replacement",
    "j",
    "replace",
    "indexOf",
    "parseInt",
    "getDayName",
    "startOfWeek",
    "getWeekStart",
    "localeDayOfWeek",
    "getMonthName",
    "getAmMarker",
    "getPmMarker",
    "substr",
    "parse",
    "dateStr",
    "__initParseFeed",
    "hit",
    "regex",
    "exec",
    "dateValues",
    "era",
    "quarter",
    "hour",
    "ispm",
    "weekDay",
    "weekOfMonth",
    "weekOfYear",
    "min",
    "sec",
    "currGroup",
    "applyWeekYearAfterRule",
    "applyDayOfYearAfterRule",
    "usedRules",
    "rule",
    "field",
    "manipulator",
    "pattern",
    "yearRuleApplied",
    "k",
    "dayRuleApplied",
    "groups",
    "dayAndMonth",
    "currWildcardChar",
    "currWildcardSize",
    "currLiteral",
    "state",
    "currChar",
    "charAt",
    "lookAhead",
    "push",
    "__initParseRules",
    "atomIdx",
    "lang",
    "String",
    "escapeRegexpChars",
    "wildcardRule",
    "ruleIdx",
    "__isRuleForWildcard",
    "wildcardStr",
    "RegExp",
    "exc",
    "regexFunc",
    "LString",
    "rules",
    "amMarker",
    "pmMarker",
    "yearManipulator",
    "weekYearManipulator",
    "monthManipulator",
    "localWeekDayManipulator",
    "ampmManipulator",
    "noZeroHourManipulator",
    "noZeroAmPmHourManipulator",
    "ignoreManipulator",
    "narrowEraNames",
    "narrowEraNameManipulator",
    "abbrevEraNames",
    "abbrevEraNameManipulator",
    "fullEraNames",
    "fullEraNameManipulator",
    "abbrevQuarterNames",
    "abbrevQuarterManipulator",
    "fullQuarterNames",
    "fullQuarterManipulator",
    "cache",
    "dateNamesManipulator",
    "monthPatternLetters",
    "dayPatternLetters",
    "firstLetterInPattern",
    "isMonth",
    "getContext",
    "letters",
    "context",
    "patternLength",
    "lengthName",
    "func",
    "getMonthNames",
    "getDayNames",
    "names",
    "call",
    "l",
    "data",
    "yNumber",
    "join"
  ],
  "mappings": "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",
  "file": "DateFormat.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2006 STZ-IDA, Germany, http://www.stz-ida.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Til Schneider (til132)\n     * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/**\n * A formatter and parser for dates, see\n * http://www.unicode.org/reports/tr35/#Date_Format_Patterns\n *\n * Here is a quick overview of the format pattern keys:\n * <table>\n * <tr><th>Key &nbsp;<th>Description\n * <tr><td><code> G </code><td> era, e.g. \"AD\"\n * <tr><td><code> y </code><td> year\n * <tr><td><code> Y </code><td> week year\n * <tr><td><code> u </code><td> extended year [Not supported yet]\n * <tr><td><code> Q </code><td> quarter\n * <tr><td><code> q </code><td> stand-alone quarter\n * <tr><td><code> M </code><td> month\n * <tr><td><code> L </code><td> stand-alone month\n * <tr><td><code> I </code><td> chinese leap month [Not supported yet]\n * <tr><td><code> w </code><td> week of year\n * <tr><td><code> W </code><td> week of month\n * <tr><td><code> d </code><td> day of month\n * <tr><td><code> D </code><td> day of year\n * <tr><td><code> F </code><td> day of week in month [Not supported yet]\n * <tr><td><code> g </code><td> modified Julian day [Not supported yet]\n * <tr><td><code> E </code><td> day of week\n * <tr><td><code> e </code><td> local day of week\n * <tr><td><code> c </code><td> stand-alone local day of week\n * <tr><td><code> a </code><td> period of day (am or pm)\n * <tr><td><code> h </code><td> 12-hour hour\n * <tr><td><code> H </code><td> 24-hour hour\n * <tr><td><code> K </code><td> hour [0-11]\n * <tr><td><code> k </code><td> hour [1-24]\n * <tr><td><code> j </code><td> special symbol [Not supported yet]\n * <tr><td><code> m </code><td> minute\n * <tr><td><code> s </code><td> second\n * <tr><td><code> S </code><td> fractional second\n * <tr><td><code> A </code><td> millisecond in day [Not supported yet]\n * <tr><td><code> z </code><td> time zone, specific non-location format\n * <tr><td><code> Z </code><td> time zone, rfc822/gmt format\n * <tr><td><code> v </code><td> time zone, generic non-location format [Not supported yet]\n * <tr><td><code> V </code><td> time zone, like z except metazone abbreviations [Not supported yet]\n * </table>\n *\n * (This list is preliminary, not all format keys might be implemented). Most\n * keys support repetitions that influence the meaning of the format. Parts of the\n * format string that should not be interpreted as format keys have to be\n * single-quoted.\n *\n * The same format patterns will be used for both parsing and output formatting.\n * \n * NOTE: Instances of this class must be disposed of after use\n *\n */\nqx.Class.define(\"qx.util.format.DateFormat\",\n{\n  extend : qx.core.Object,\n  implement : [ qx.util.format.IFormat ],\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param format {String|null} The format to use. If null, the locale's default\n   * format is used.\n   * @param locale {String?} optional locale to be used. In case this is not present, the {@link #locale} property of DateFormat\n   * will be following the {@link qx.locale.Manager#locale} property of qx.locale.Manager\n   */\n  construct : function(format, locale)\n  {\n    this.base(arguments);\n\n    this.__initialLocale = this.__locale = locale;\n\n    if (format != null)\n    {\n      this.__format = format.toString();\n      if(this.__format in qx.util.format.DateFormat.ISO_MASKS)\n      {\n        if(this.__format === 'isoUtcDateTime') {\n          this.__UTC = true;\n        }\n        this.__format = qx.util.format.DateFormat.ISO_MASKS[this.__format];\n      }\n    } else\n    {\n      this.__format = qx.locale.Date.getDateFormat(\"long\", this.getLocale()) + \" \" + qx.locale.Date.getDateTimeFormat(\"HHmmss\", \"HH:mm:ss\", this.getLocale());\n    }\n  },\n\n\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics :\n  {\n    /**\n     * Convenience factory that returns a <code>DateFomat</code> instance that\n     * uses a short date-only format. Beware that the overall layout of the\n     * date/time format string is that of the locale in effect when the factory\n     * function is called.\n     *\n     * Implemented as a quasi-singleton, so beware of side effects.\n     *\n     * @return {DateFormat} a DateFormat instance.\n     */\n    getDateInstance : function()\n    {\n      var DateFormat = qx.util.format.DateFormat;\n\n      var format = qx.locale.Date.getDateFormat(\"short\") + \"\";\n\n      // Memoizing the instance, so caller doesn't have to dispose it.\n      if (DateFormat._dateInstance == null || DateFormat._dateInstance.__format != format) {\n        DateFormat._dateInstance = new DateFormat(format);\n      }\n\n      return DateFormat._dateInstance;\n    },\n\n\n    /**\n     * Convenience factory that returns a <code>DateFomat</code> instance that\n     * uses a long date/time format. Beware that the overall layout of the\n     * date/time format string is that of the locale in effect when the factory\n     * function is called.\n     *\n     * Implemented as a quasi-singleton, so beware of side effects.\n     *\n     * @return {DateFormat} a DateFormat instance.\n     */\n    getDateTimeInstance : function()\n    {\n      var DateFormat = qx.util.format.DateFormat;\n\n      var format = qx.locale.Date.getDateFormat(\"long\") + \" \" + qx.locale.Date.getDateTimeFormat(\"HHmmss\", \"HH:mm:ss\");\n\n      // Memoizing the instance, so caller doesn't have to dispose it.\n      if (DateFormat._dateTimeInstance == null || DateFormat._dateTimeInstance.__format != format) {\n        DateFormat._dateTimeInstance = new DateFormat(format);\n      }\n\n      return DateFormat._dateTimeInstance;\n    },\n\n\n    /**\n     * @type {Integer} The threshold until when a year should be assumed to belong to the\n     *   21st century (e.g. 12 -> 2012). Years over this threshold but below 100 will be\n     *   assumed to belong to the 20th century (e.g. 88 -> 1988). Years over 100 will be\n     *   used unchanged (e.g. 1792 -> 1792).\n     */\n    ASSUME_YEAR_2000_THRESHOLD : 30,\n\n    /** @type {Map} Special masks of patterns that are used frequently*/\n    ISO_MASKS : {\n      isoDate :        \"yyyy-MM-dd\",\n      isoTime :        \"HH:mm:ss\",\n      isoDateTime :    \"yyyy-MM-dd'T'HH:mm:ss\",\n      isoUtcDateTime : \"yyyy-MM-dd'T'HH:mm:ss'Z'\"\n    },\n\n    /** @type {String} The am marker. */\n    AM_MARKER : \"am\",\n\n    /** @type {String} The pm marker. */\n    PM_MARKER : \"pm\"\n\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    __locale : null,\n    __initialLocale : null,\n    __format : null,\n    __parseFeed : null,\n    __parseRules : null,\n    __formatTree : null,\n    __UTC : null,\n\n    /**\n     * Fills a number with leading zeros (\"25\" -> \"0025\").\n     *\n     * @param number {Integer} the number to fill.\n     * @param minSize {Integer} the minimum size the returned string should have.\n     * @return {String} the filled number as string.\n     */\n    __fillNumber : function(number, minSize)\n    {\n      var str = \"\" + (number < 0 ? ((-1) * number) : number);\n\n      while (str.length < minSize) {\n        str = \"0\" + str;\n      }\n\n      return number < 0 ? \"-\" + str : str;\n    },\n\n\n    /**\n     * Returns the day in year of a date.\n     *\n     * @param date {Date} the date.\n     * @return {Integer} the day in year.\n     */\n    __getDayInYear : function(date)\n    {\n      var helpDate = new Date(date.getTime());\n      var day = helpDate.getDate();\n\n      while (helpDate.getMonth() != 0)\n      {\n        // Set the date to the last day of the previous month\n        helpDate.setDate(-1);\n        day += helpDate.getDate() + 1;\n      }\n\n      return day;\n    },\n\n\n    /**\n     * Returns the thursday in the same week as the date.\n     *\n     * @param date {Date} the date to get the thursday of.\n     * @return {Date} the thursday in the same week as the date.\n     */\n    __thursdayOfSameWeek : function(date) {\n      return new Date(date.getTime() + (3 - ((date.getDay() + 6) % 7)) * 86400000);\n    },\n\n\n    /**\n     * Returns the week in year of a date.\n     *\n     * @param date {Date} the date to get the week in year of.\n     * @return {Integer} the week in year.\n     */\n    __getWeekInYear : function(date)\n    {\n      // The following algorithm comes from http://www.salesianer.de/util/kalwoch.html\n      // Get the thursday of the week the date belongs to\n      var thursdayDate = this.__thursdayOfSameWeek(date);\n\n      // Get the year the thursday (and therefore the week) belongs to\n      var weekYear = thursdayDate.getFullYear();\n\n      // Get the thursday of the week january 4th belongs to\n      // (which defines week 1 of a year)\n      var thursdayWeek1 = this.__thursdayOfSameWeek(new Date(weekYear, 0, 4));\n\n      // Calculate the calendar week\n      return Math.floor(1.5 + (thursdayDate.getTime() - thursdayWeek1.getTime()) / 86400000 / 7);\n    },\n\n    /**\n     * Returns the week in month of a date.\n     *\n     * @param date {Date} the date to get the week in year of.\n     * @return {Integer} the week in month.\n     */\n    __getWeekInMonth : function(date)\n    {\n      var thursdayDate = this.__thursdayOfSameWeek(date);\n      var thursdayWeek1 = this.__thursdayOfSameWeek(new Date(date.getFullYear(), date.getMonth(), 4));\n      return Math.floor(1.5 + (thursdayDate.getTime() - thursdayWeek1.getTime()) / 86400000 / 7);\n    },\n\n    /**\n     * Returns the week year of a date. (that is the year of the week where this date happens to be)\n     * For a week in the middle of the summer, the year is easily obtained, but for a week\n     * when New Year's Eve takes place, the year of that week is ambiguous.\n     * The thursday day of that week is used to determine the year.\n     *\n     * @param date {Date} the date to get the week in year of.\n     * @return {Integer} the week year.\n     */\n    __getWeekYear : function(date)\n    {\n      var thursdayDate = this.__thursdayOfSameWeek(date);\n      return thursdayDate.getFullYear();\n    },\n\n    /**\n     * Returns true if the year is a leap one.\n     *\n     * @param year {Integer} the year to check.\n     * @return {Boolean} true if it is a leap year.\n     */\n    __isLeapYear : function(year)\n    {\n      var februaryDate = new Date(year,2,1);\n      februaryDate.setDate(-1);\n      return februaryDate.getDate() + 1 === 29;\n    },\n\n    /**\n     * Returns a json object with month and day as keys.\n     *\n     * @param dayOfYear {Integer} the day of year.\n     * @param year {Integer} the year to check.\n     * @return {Object} a json object {month: M, day: D}.\n     */\n    __getMonthAndDayFromDayOfYear : function(dayOfYear,year)\n    {\n      var month = 0;\n      var day = 0;\n      // if we don't know the year, we take a non-leap year'\n      if(!year) {\n        year = 1971;\n      }\n      var dayCounter = 0;\n      for(var i=1; i <= 12; i++)\n      {\n        var tempDate = new Date(year,i,1);\n        tempDate.setDate(-1);\n        var days = tempDate.getDate() + 1;\n        dayCounter += days;\n        if(dayCounter < dayOfYear)\n        {\n          month++;\n          day += days;\n        }\n        else\n        {\n          day = dayOfYear - (dayCounter-days);\n          break;\n        }\n      }\n\n      return {month: month,day: day};\n    },\n\n    /**\n     * Returns the year of a date when we know the week year\n     *\n     * @param weekYear {Integer} the week year.\n     * @param month {Integer} the month\n     * @param dayOfMonth {Integer} the day in month\n     * @return {Integer} the year.\n     */\n    __getYearFromWeekYearAndMonth : function(weekYear, month, dayOfMonth)\n    {\n      var year;\n      switch(month){\n        case 11 :\n          year = weekYear - 1;\n          if (weekYear != this.__getWeekYear(new Date(year,month,dayOfMonth))) {\n            year = weekYear;\n          }\n        break;\n        case 0 :\n          year = weekYear + 1;\n          if (weekYear != this.__getWeekYear(new Date(year,month,dayOfMonth))) {\n            year = weekYear;\n          }\n        break;\n        default :\n          year = weekYear;\n      }\n      return year;\n    },\n\n    /**\n     * Sets the new value for locale property\n     * @param value {String} The new value.\n     *\n     */\n    setLocale : function(value)\n    {\n      if (value !== null && typeof value != \"string\") {\n        throw new Error(\"Cannot set locale to \" + value + \" - please provide a string\");\n      }\n      this.__locale = value === null ? this.__initialLocale : value;\n    },\n    \n    /**\n     * Resets the Locale\n     */\n    resetLocale : function() {\n      this.setLocale(null);\n    },\n    \n    /**\n     * Returns the locale\n     */\n    getLocale : function() {\n      var locale = this.__locale;\n      if (locale === undefined) {\n        locale = qx.locale.Manager.getInstance().getLocale();\n      }\n      return locale;\n    },\n\n    /**\n     * Formats a date.\n     *\n     * @param date {Date} The date to format.\n     * @return {String} the formatted date.\n     */\n    format : function(date)\n    {\n      // check for null dates\n      if (date == null) {\n        return null;\n      }\n\n      if(isNaN(date.getTime())) {\n        if (qx.core.Environment.get(\"qx.debug\")) {\n          qx.log.Logger.error(\"Provided date is invalid\");\n        }\n        return null;\n      }\n\n      if(this.__UTC) {\n        date = new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds(),date.getUTCMilliseconds());\n      }\n\n      var locale = this.getLocale();\n\n      var fullYear = date.getFullYear();\n      var month = date.getMonth();\n      var dayOfMonth = date.getDate();\n      var dayOfWeek = date.getDay();\n      var hours = date.getHours();\n      var minutes = date.getMinutes();\n      var seconds = date.getSeconds();\n      var ms = date.getMilliseconds();\n\n      var timezoneOffset = date.getTimezoneOffset();\n      var timezoneSign = timezoneOffset > 0 ? 1 : -1;\n      var timezoneHours = Math.floor(Math.abs(timezoneOffset) / 60);\n      var timezoneMinutes = Math.abs(timezoneOffset) % 60;\n\n      // Create the output\n      this.__initFormatTree();\n      var output = \"\";\n\n      for (var i=0; i<this.__formatTree.length; i++)\n      {\n        var currAtom = this.__formatTree[i];\n\n        if (currAtom.type == \"literal\") {\n          output += currAtom.text;\n        }\n        else\n        {\n          // This is a wildcard\n          var wildcardChar = currAtom.character;\n          var wildcardSize = currAtom.size;\n\n          // Get its replacement\n          var replacement = \"?\";\n\n          switch(wildcardChar)\n          {\n            case 'y': // Year\n              if (wildcardSize == 2) {\n                replacement = this.__fillNumber(fullYear % 100, 2);\n              } else {\n                var year = Math.abs(fullYear);\n                replacement = year + \"\";\n                if (wildcardSize > replacement.length) {\n                  for (var j = replacement.length; j < wildcardSize; j++) {\n                    replacement = \"0\" + replacement;\n                  }\n                }\n                if(fullYear < 0) {\n                  replacement = \"-\" + replacement;\n                }\n              }\n\n              break;\n\n            case 'Y': // Year\n              replacement = this.__getWeekYear(date) + \"\";\n              var year = replacement.replace('-','');\n              if (wildcardSize > replacement.length) {\n                for (var j = year.length; j < wildcardSize; j++) {\n                  year = \"0\" + year;\n                }\n              }\n              replacement = replacement.indexOf(\"-\") != -1 ? \"-\" + year : year;\n\n              break;\n\n            case 'G': // Era - there is no CLDR data for ERA yet\n              if (wildcardSize >= 1 && wildcardSize <= 3) {\n                replacement = fullYear > 0 ? 'AD' : 'BC';\n              }\n              else if(wildcardSize == 4) {\n                replacement = fullYear > 0 ? 'Anno Domini' : 'Before Christ';\n              }\n              else if(wildcardSize == 5) {\n                replacement = fullYear > 0 ? 'A' : 'B';\n              }\n\n              break;\n\n            case 'Q': // quarter\n              if (wildcardSize == 1 || wildcardSize == 2) {\n                replacement = this.__fillNumber(parseInt(month/4) + 1, wildcardSize);\n              }\n              if(wildcardSize == 3) {\n                replacement = 'Q' + (parseInt(month/4) + 1);\n              }\n\n              break;\n\n            case 'q': // quarter stand alone\n              if (wildcardSize == 1 || wildcardSize == 2) {\n                replacement = this.__fillNumber(parseInt(month/4) + 1, wildcardSize);\n              }\n              if(wildcardSize == 3) {\n                replacement = 'Q' + (parseInt(month/4) + 1);\n              }\n\n              break;\n\n            case 'D': // Day in year (e.g. 189)\n              replacement = this.__fillNumber(this.__getDayInYear(date), wildcardSize);\n              break;\n\n            case 'd': // Day in month\n              replacement = this.__fillNumber(dayOfMonth, wildcardSize);\n              break;\n\n            case 'w': // Week in year (e.g. 27)\n              replacement = this.__fillNumber(this.__getWeekInYear(date), wildcardSize);\n              break;\n\n            case 'W': // Week in year (e.g. 27)\n              replacement = this.__getWeekInMonth(date);\n              break;\n\n            case 'E': // Day in week\n              if (wildcardSize >= 1 && wildcardSize <= 3) {\n                replacement = qx.locale.Date.getDayName(\"abbreviated\", dayOfWeek, locale, \"format\", true);\n              } else if (wildcardSize == 4) {\n                replacement = qx.locale.Date.getDayName(\"wide\", dayOfWeek, locale, \"format\", true);\n              } else if (wildcardSize == 5) {\n                replacement = qx.locale.Date.getDayName(\"narrow\", dayOfWeek, locale, \"format\", true);\n              }\n\n              break;\n\n            case 'e': // Day in week\n              var startOfWeek = qx.locale.Date.getWeekStart(locale);\n              // the index is 1 based\n              var localeDayOfWeek = 1 + ((dayOfWeek - startOfWeek >=0) ? (dayOfWeek - startOfWeek) : 7 + (dayOfWeek-startOfWeek));\n              if (wildcardSize >= 1 && wildcardSize <= 2) {\n                replacement = this.__fillNumber(localeDayOfWeek, wildcardSize);\n              } else if (wildcardSize == 3) {\n                replacement = qx.locale.Date.getDayName(\"abbreviated\", dayOfWeek, locale, \"format\", true);\n              } else if (wildcardSize == 4) {\n                replacement = qx.locale.Date.getDayName(\"wide\", dayOfWeek, locale, \"format\", true);\n              } else if (wildcardSize == 5) {\n                replacement = qx.locale.Date.getDayName(\"narrow\", dayOfWeek, locale, \"format\", true);\n              }\n\n              break;\n\n            case 'c': // Stand-alone local day in week\n              var startOfWeek = qx.locale.Date.getWeekStart(locale);\n              // the index is 1 based\n              var localeDayOfWeek = 1 + ((dayOfWeek - startOfWeek >=0) ? (dayOfWeek - startOfWeek) : 7 + (dayOfWeek-startOfWeek));\n              if (wildcardSize == 1) {\n                replacement = ''+localeDayOfWeek;\n              } else if (wildcardSize == 3) {\n                replacement = qx.locale.Date.getDayName(\"abbreviated\", dayOfWeek, locale, \"stand-alone\", true);\n              } else if (wildcardSize == 4) {\n                replacement = qx.locale.Date.getDayName(\"wide\", dayOfWeek, locale, \"stand-alone\", true);\n              } else if (wildcardSize == 5) {\n                replacement = qx.locale.Date.getDayName(\"narrow\", dayOfWeek, locale, \"stand-alone\", true);\n              }\n\n              break;\n\n            case 'M': // Month\n              if (wildcardSize == 1 || wildcardSize == 2) {\n                replacement = this.__fillNumber(month + 1, wildcardSize);\n              } else if (wildcardSize == 3) {\n                replacement = qx.locale.Date.getMonthName(\"abbreviated\", month, locale, \"format\", true);\n              } else if (wildcardSize == 4) {\n                replacement = qx.locale.Date.getMonthName(\"wide\", month, locale, \"format\", true);\n              } else if (wildcardSize == 5) {\n                replacement = qx.locale.Date.getMonthName(\"narrow\", month, locale, \"format\", true);\n\n              }\n\n              break;\n\n            case 'L': // Stand-alone month\n              if (wildcardSize == 1 || wildcardSize == 2) {\n                replacement = this.__fillNumber(month + 1, wildcardSize);\n              } else if (wildcardSize == 3) {\n                replacement = qx.locale.Date.getMonthName(\"abbreviated\", month, locale, \"stand-alone\", true);\n              } else if (wildcardSize == 4) {\n                replacement = qx.locale.Date.getMonthName(\"wide\", month, locale, \"stand-alone\", true);\n              } else if (wildcardSize == 5) {\n                replacement = qx.locale.Date.getMonthName(\"narrow\", month, locale, \"stand-alone\", true);\n              }\n\n              break;\n\n            case 'a': // am/pm marker\n              // NOTE: 0:00 is am, 12:00 is pm\n              replacement = (hours < 12) ? qx.locale.Date.getAmMarker(locale) : qx.locale.Date.getPmMarker(locale);\n              break;\n\n            case 'H': // Hour in day (0-23)\n              replacement = this.__fillNumber(hours, wildcardSize);\n              break;\n\n            case 'k': // Hour in day (1-24)\n              replacement = this.__fillNumber((hours == 0) ? 24 : hours, wildcardSize);\n              break;\n\n            case 'K': // Hour in am/pm (0-11)\n              replacement = this.__fillNumber(hours % 12, wildcardSize);\n              break;\n\n            case 'h': // Hour in am/pm (1-12)\n              replacement = this.__fillNumber(((hours % 12) == 0) ? 12 : (hours % 12), wildcardSize);\n              break;\n\n            case 'm': // Minute in hour\n              replacement = this.__fillNumber(minutes, wildcardSize);\n              break;\n\n            case 's': // Second in minute\n              replacement = this.__fillNumber(seconds, wildcardSize);\n              break;\n\n            case 'S': // Fractional second\n              replacement = this.__fillNumber(ms, 3);\n              if (wildcardSize < replacement.length) {\n                replacement = replacement.substr(0, wildcardSize);\n              } else {\n                while (wildcardSize > replacement.length) {\n                  // if needed, fill the remaining wildcard length with trailing zeros\n                  replacement += \"0\";\n                }\n              }\n              break;\n\n            case 'z': // Time zone\n              if (wildcardSize >= 1 && wildcardSize <= 4)\n              {\n                replacement =\n                \"GMT\" +\n                ((timezoneSign > 0) ? \"-\" : \"+\") +\n                this.__fillNumber(Math.abs(timezoneHours), 2) +\n                \":\" + this.__fillNumber(timezoneMinutes, 2);\n              }\n\n              break;\n\n            case 'Z': // RFC 822 time zone\n              if (wildcardSize >= 1 && wildcardSize <= 3)\n              {\n              replacement =\n                ((timezoneSign > 0) ? \"-\" : \"+\") +\n                this.__fillNumber(Math.abs(timezoneHours), 2) +\n                this.__fillNumber(timezoneMinutes, 2);\n              }\n              else\n              {\n                replacement =\n                \"GMT\" +\n                ((timezoneSign > 0) ? \"-\" : \"+\") +\n                this.__fillNumber(Math.abs(timezoneHours), 2) +\n                \":\" + this.__fillNumber(timezoneMinutes, 2);\n              }\n              break;\n          }\n\n          output += replacement;\n        }\n      }\n\n      return output;\n    },\n\n\n    /**\n     * Parses a date.\n     *\n     * @param dateStr {String} the date to parse.\n     * @return {Date} the parsed date.\n     * @throws {Error} If the format is not well formed or if the date string does not\n     *       match to the format.\n     */\n    parse : function(dateStr)\n    {\n      this.__initParseFeed();\n\n      // Apply the regex\n      var hit = this.__parseFeed.regex.exec(dateStr);\n\n      if (hit == null) {\n        throw new Error(\"Date string '\" + dateStr + \"' does not match the date format: \" + this.__format);\n      }\n\n      // Apply the rules\n      var dateValues =\n      {\n        era         : 1,\n        year        : 1970,\n        quarter     : 1,\n        month       : 0,\n        day         : 1,\n        dayOfYear   : 1,\n        hour        : 0,\n        ispm        : false,\n        weekDay     : 4,\n        weekYear    : 1970,\n        weekOfMonth : 1,\n        weekOfYear  : 1,\n        min         : 0,\n        sec         : 0,\n        ms          : 0\n      };\n\n      var currGroup = 1;\n      var applyWeekYearAfterRule = false;\n      var applyDayOfYearAfterRule = false;\n\n      for (var i=0; i<this.__parseFeed.usedRules.length; i++)\n      {\n        var rule = this.__parseFeed.usedRules[i];\n\n        var value = hit[currGroup];\n\n        if (rule.field != null) {\n          dateValues[rule.field] = parseInt(value, 10);\n        } else {\n          rule.manipulator(dateValues, value, rule.pattern);\n        }\n\n        if(rule.pattern == \"Y+\")\n        {\n          var yearRuleApplied = false;\n          for(var k=0; k<this.__parseFeed.usedRules.length; k++) {\n            if(this.__parseFeed.usedRules[k].pattern == 'y+'){\n              yearRuleApplied = true;\n              break;\n            }\n          }\n          if(!yearRuleApplied) {\n            applyWeekYearAfterRule = true;\n          }\n        }\n\n        if(rule.pattern.indexOf(\"D\") != -1)\n        {\n          var dayRuleApplied = false;\n          for(var k=0; k<this.__parseFeed.usedRules.length; k++) {\n            if(this.__parseFeed.usedRules[k].pattern.indexOf(\"d\") != -1){\n              dayRuleApplied = true;\n              break;\n            }\n          }\n          if(!dayRuleApplied) {\n            applyDayOfYearAfterRule = true;\n          }\n        }\n\n        currGroup += (rule.groups == null) ? 1 : rule.groups;\n      }\n      if(applyWeekYearAfterRule) {\n        dateValues.year = this.__getYearFromWeekYearAndMonth(dateValues.weekYear,dateValues.month,dateValues.day);\n      }\n\n      if(applyDayOfYearAfterRule)\n      {\n        var dayAndMonth = this.__getMonthAndDayFromDayOfYear(dateValues.dayOfYear, dateValues.year);\n        dateValues.month = dayAndMonth.month;\n        dateValues.day = dayAndMonth.day;\n      }\n\n      if(dateValues.era < 0 && (dateValues.year * dateValues.era < 0)) {\n        dateValues.year = dateValues.year * dateValues.era;\n      }\n\n      var date = new Date(dateValues.year, dateValues.month, dateValues.day, (dateValues.ispm) ? (dateValues.hour + 12) : dateValues.hour, dateValues.min, dateValues.sec, dateValues.ms);\n\n      if(this.__UTC) {\n        date = new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds(),date.getUTCMilliseconds());\n      }\n\n      if (dateValues.month != date.getMonth() || dateValues.year != date.getFullYear()) {\n        throw new Error(\"Error parsing date '\" + dateStr + \"': the value for day or month is too large\");\n      }\n\n      return date;\n    },\n\n\n    /**\n     * Helper method for {@link #format()} and {@link #parse()}.\n     * Parses the date format.\n     *\n     */\n    __initFormatTree : function()\n    {\n      if (this.__formatTree != null) {\n        return;\n      }\n\n      this.__formatTree = [];\n\n      var currWildcardChar;\n      var currWildcardSize = 0;\n      var currLiteral = \"\";\n      var format = this.__format;\n\n      var state = \"default\";\n\n      var i = 0;\n\n      while (i < format.length)\n      {\n        var currChar = format.charAt(i);\n\n        switch(state)\n        {\n          case \"quoted_literal\":\n            // We are now inside a quoted literal\n            // Check whether the current character is an escaped \"'\" character\n            if (currChar == \"'\")\n            {\n              if (i + 1 >= format.length)\n              {\n\n                // this is the last character\n                i++;\n\n                break;\n              }\n\n              var lookAhead = format.charAt(i + 1);\n\n              if (lookAhead == \"'\")\n              {\n                currLiteral += currChar;\n                i++;\n              }\n              else\n              {\n\n                // quoted literal ends\n                i++;\n\n                state = \"unkown\";\n              }\n            }\n            else\n            {\n              currLiteral += currChar;\n              i++;\n            }\n\n            break;\n\n          case \"wildcard\":\n            // Check whether the currChar belongs to that wildcard\n            if (currChar == currWildcardChar)\n            {\n              // It does -> Raise the size\n              currWildcardSize++;\n\n              i++;\n            }\n            else\n            {\n              // It does not -> The current wildcard is done\n              this.__formatTree.push(\n              {\n                type      : \"wildcard\",\n                character : currWildcardChar,\n                size      : currWildcardSize\n              });\n\n              currWildcardChar = null;\n              currWildcardSize = 0;\n              state = \"default\";\n            }\n\n            break;\n\n          default:\n            // We are not (any more) in a wildcard or quoted literal -> Check what's starting here\n            if ((currChar >= 'a' && currChar <= 'z') || (currChar >= 'A' && currChar <= 'Z'))\n            {\n              // This is a letter -> All letters are wildcards\n              // Start a new wildcard\n              currWildcardChar = currChar;\n              state = \"wildcard\";\n            }\n            else if (currChar == \"'\")\n            {\n              if (i + 1 >= format.length)\n              {\n                // this is the last character\n                currLiteral += currChar;\n                i++;\n                break;\n              }\n\n              var lookAhead = format.charAt(i + 1);\n\n              if (lookAhead == \"'\")\n              {\n                currLiteral += currChar;\n                i++;\n              }\n\n              i++;\n              state = \"quoted_literal\";\n            }\n            else\n            {\n              state = \"default\";\n            }\n\n            if (state != \"default\")\n            {\n              // Add the literal\n              if (currLiteral.length > 0)\n              {\n                this.__formatTree.push(\n                {\n                  type : \"literal\",\n                  text : currLiteral\n                });\n\n                currLiteral = \"\";\n              }\n            }\n            else\n            {\n              // This is an unquoted literal -> Add it to the current literal\n              currLiteral += currChar;\n              i++;\n            }\n\n            break;\n        }\n      }\n\n      // Add the last wildcard or literal\n      if (currWildcardChar != null)\n      {\n        this.__formatTree.push(\n        {\n          type      : \"wildcard\",\n          character : currWildcardChar,\n          size      : currWildcardSize\n        });\n      }\n      else if (currLiteral.length > 0)\n      {\n        this.__formatTree.push(\n        {\n          type : \"literal\",\n          text : currLiteral\n        });\n      }\n    },\n\n\n    /**\n     * Initializes the parse feed.\n     *\n     * The parse contains everything needed for parsing: The regular expression\n     * (in compiled and uncompiled form) and the used rules.\n     *\n     * @throws {Error} If the date format is malformed.\n     */\n    __initParseFeed : function()\n    {\n      if (this.__parseFeed != null)\n      {\n        // We already have the parse feed\n        return;\n      }\n\n      var format = this.__format;\n\n      // Initialize the rules\n      this.__initParseRules();\n      this.__initFormatTree();\n\n      // Get the used rules and construct the regex pattern\n      var usedRules = [];\n      var pattern = \"^\";\n\n      for (var atomIdx=0; atomIdx<this.__formatTree.length; atomIdx++)\n      {\n        var currAtom = this.__formatTree[atomIdx];\n\n        if (currAtom.type == \"literal\") {\n          pattern += qx.lang.String.escapeRegexpChars(currAtom.text);\n        }\n        else\n        {\n          // This is a wildcard\n          var wildcardChar = currAtom.character;\n          var wildcardSize = currAtom.size;\n\n          // Get the rule for this wildcard\n          var wildcardRule;\n\n          for (var ruleIdx=0; ruleIdx<this.__parseRules.length; ruleIdx++)\n          {\n            var rule = this.__parseRules[ruleIdx];\n\n            if ( this.__isRuleForWildcard(rule,wildcardChar,wildcardSize))\n            {\n              // We found the right rule for the wildcard\n              wildcardRule = rule;\n              break;\n            }\n          }\n\n          // Check the rule\n          if (wildcardRule == null)\n          {\n            // We have no rule for that wildcard -> Malformed date format\n            var wildcardStr = \"\";\n\n            for (var i=0; i<wildcardSize; i++) {\n              wildcardStr += wildcardChar;\n            }\n\n            throw new Error(\"Malformed date format: \" + format + \". Wildcard \" + wildcardStr + \" is not supported\");\n          }\n          else\n          {\n            // Add the rule to the pattern\n            usedRules.push(wildcardRule);\n            pattern += wildcardRule.regex;\n          }\n        }\n      }\n\n      pattern += \"$\";\n\n      // Create the regex\n      var regex;\n\n      try {\n        regex = new RegExp(pattern);\n      } catch(exc) {\n        throw new Error(\"Malformed date format: \" + format);\n      }\n\n      // Create the this.__parseFeed\n      this.__parseFeed =\n      {\n        regex       : regex,\n        \"usedRules\" : usedRules,\n        pattern     : pattern\n      };\n    },\n\n    /**\n     * Checks whether the rule matches the wildcard or not.\n     * @param rule {Object} the rule we try to match with the wildcard\n     * @param wildcardChar {String} the character in the wildcard\n     * @param wildcardSize {Integer} the number of  wildcardChar characters in the wildcard\n     * @return {Boolean} if the rule matches or not\n     */\n    __isRuleForWildcard : function(rule, wildcardChar, wildcardSize)\n    {\n      if(wildcardChar==='y' && rule.pattern==='y+')\n      {\n        rule.regex = rule.regexFunc(wildcardSize);\n        return true;\n      }\n      else if(wildcardChar==='Y' && rule.pattern==='Y+')\n      {\n        rule.regex = rule.regexFunc(wildcardSize);\n        return true;\n      }\n      else\n      {\n        return wildcardChar == rule.pattern.charAt(0) && wildcardSize == rule.pattern.length;\n      }\n    },\n    /**\n     * Initializes the static parse rules.\n     *\n     */\n    __initParseRules : function()\n    {\n      var DateFormat = qx.util.format.DateFormat;\n      var LString = qx.lang.String;\n\n      if (this.__parseRules != null)\n      {\n        // The parse rules are already initialized\n        return ;\n      }\n\n      var rules = this.__parseRules = [];\n\n      var amMarker = qx.locale.Date.getAmMarker(this.getLocale()).toString() || DateFormat.AM_MARKER;\n      var pmMarker = qx.locale.Date.getPmMarker(this.getLocale()).toString() || DateFormat.PM_MARKER;\n      var locale = this.getLocale();\n\n      var yearManipulator = function(dateValues, value)\n      {\n        value = parseInt(value, 10);\n\n        if(value >= 0)\n        {\n          if (value < DateFormat.ASSUME_YEAR_2000_THRESHOLD) {\n            value += 2000;\n          } else if (value < 100) {\n            value += 1900;\n          }\n        }\n\n        dateValues.year = value;\n      };\n\n      var weekYearManipulator = function(dateValues, value)\n      {\n        value = parseInt(value, 10);\n\n        if(value >= 0)\n        {\n          if (value < DateFormat.ASSUME_YEAR_2000_THRESHOLD) {\n            value += 2000;\n          } else if (value < 100) {\n            value += 1900;\n          }\n        }\n\n        dateValues.weekYear = value;\n      };\n\n      var monthManipulator = function(dateValues, value) {\n        dateValues.month = parseInt(value, 10) - 1;\n      };\n\n      var localWeekDayManipulator = function(dateValues, value) {\n        var startOfWeek = qx.locale.Date.getWeekStart(locale);\n        var dayOfWeek =  (parseInt(value,10) - 1 + startOfWeek) <= 6 ? parseInt(value,10) - 1 + startOfWeek : (parseInt(value,10) - 1 + startOfWeek) -7;\n        dateValues.weekDay = dayOfWeek;\n      };\n\n      var ampmManipulator = function(dateValues, value) {\n        var pmMarker = qx.locale.Date.getPmMarker(locale).toString() || DateFormat.PM_MARKER;\n        dateValues.ispm = (value == pmMarker);\n      };\n\n      var noZeroHourManipulator = function(dateValues, value) {\n        dateValues.hour = parseInt(value, 10) % 24;\n      };\n\n      var noZeroAmPmHourManipulator = function(dateValues, value) {\n        dateValues.hour = parseInt(value, 10) % 12;\n      };\n\n      var ignoreManipulator = function(dateValues, value) {\n        return;\n      };\n\n      var narrowEraNames = ['A', 'B'];\n      var narrowEraNameManipulator = function(dateValues, value) {\n        dateValues.era = value == 'A' ? 1 : -1;\n      };\n\n      var abbrevEraNames = ['AD', 'BC'];\n      var abbrevEraNameManipulator = function(dateValues, value) {\n        dateValues.era = value == 'AD' ? 1 : -1;\n      };\n\n      var fullEraNames = ['Anno Domini', 'Before Christ'];\n      var fullEraNameManipulator = function(dateValues, value) {\n        dateValues.era = value == 'Anno Domini' ? 1 : -1;\n      };\n\n      var abbrevQuarterNames = ['Q1','Q2','Q3','Q4'];\n      var abbrevQuarterManipulator = function(dateValues, value) {\n        dateValues.quarter = abbrevQuarterNames.indexOf(value);\n      };\n\n      var fullQuarterNames = ['1st quarter','2nd quarter','3rd quarter','4th quarter'];\n      var fullQuarterManipulator = function(dateValues, value) {\n        dateValues.quarter = fullQuarterNames.indexOf(value);\n      };\n\n      var cache = {};\n\n      var dateNamesManipulator = function(pattern){\n        var monthPatternLetters = ['L','M'];\n        var dayPatternLetters = ['c', 'e', 'E'];\n        var firstLetterInPattern = pattern.charAt(0);\n        var isMonth = monthPatternLetters.indexOf(firstLetterInPattern)>=0;\n\n        var getContext = function() {\n          var letters = isMonth ? monthPatternLetters : dayPatternLetters;\n          var context = firstLetterInPattern === letters[0] ? \"stand-alone\" : \"format\" ;\n          var patternLength = pattern.length;\n          var lengthName = 'abbreviated';\n          switch(patternLength)\n          {\n            case 4:\n              lengthName = 'wide';\n              break;\n            case 5:\n              lengthName = 'narrow';\n              break;\n            default:\n              lengthName = 'abbreviated';\n          }\n          return [context, lengthName];\n        };\n\n        if(!cache[pattern])\n        {\n          cache[pattern] = {};\n          var context = getContext();\n          var func = isMonth ? qx.locale.Date.getMonthNames : qx.locale.Date.getDayNames;\n          var names = func.call(qx.locale.Date, context[1], locale, context[0], true);\n          for(var i=0, l=names.length; i<l; i++)\n          {\n            names[i] = LString.escapeRegexpChars(names[i].toString());\n          }\n          cache[pattern].data = names;\n          cache[pattern].func = function(dateValues, value)\n          {\n            value = LString.escapeRegexpChars(value);\n            dateValues[isMonth ? 'month' : 'weekDay'] = names.indexOf(value);\n          };\n        }\n\n        return cache[pattern];\n      };\n\n      // Unsupported: F (Day of week in month)\n\n      rules.push(\n      {\n        pattern     : \"y+\",\n        regexFunc       : function(yNumber)\n          {\n            var regex = \"(-*\";\n            for(var i=0;i<yNumber;i++)\n            {\n              regex += \"\\\\d\";\n              if(i===yNumber-1 && i!==1) {\n                regex += \"+?\";\n              }\n            }\n            regex += \")\";\n            return regex;\n          },\n        manipulator : yearManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"Y+\",\n        regexFunc       : function(yNumber)\n          {\n            var regex = \"(-*\";\n            for(var i=0;i<yNumber;i++)\n            {\n              regex += \"\\\\d\";\n              if(i===yNumber-1) {\n                regex += \"+?\";\n              }\n            }\n            regex += \")\";\n            return regex;\n          },\n        manipulator : weekYearManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"G\",\n        regex       : \"(\" + abbrevEraNames.join(\"|\") + \")\",\n        manipulator : abbrevEraNameManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"GG\",\n        regex       : \"(\" + abbrevEraNames.join(\"|\") + \")\",\n        manipulator : abbrevEraNameManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"GGG\",\n        regex       : \"(\" + abbrevEraNames.join(\"|\") + \")\",\n        manipulator : abbrevEraNameManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"GGGG\",\n        regex       : \"(\" + fullEraNames.join(\"|\") + \")\",\n        manipulator : fullEraNameManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"GGGGG\",\n        regex       : \"(\" + narrowEraNames.join(\"|\") + \")\",\n        manipulator : narrowEraNameManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"Q\",\n        regex       : \"(\\\\d\\\\d*?)\",\n        field : \"quarter\"\n      });\n\n      rules.push(\n      {\n        pattern     : \"QQ\",\n        regex       : \"(\\\\d\\\\d?)\",\n        field : \"quarter\"\n      });\n\n      rules.push(\n      {\n        pattern     : \"QQQ\",\n        regex       : \"(\" + abbrevQuarterNames.join(\"|\") + \")\",\n        manipulator : abbrevQuarterManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"QQQQ\",\n        regex       : \"(\" + fullQuarterNames.join(\"|\") + \")\",\n        manipulator : fullQuarterManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"q\",\n        regex       : \"(\\\\d\\\\d*?)\",\n        field : \"quarter\"\n      });\n\n      rules.push(\n      {\n        pattern     : \"qq\",\n        regex       : \"(\\\\d\\\\d?)\",\n        field : \"quarter\"\n      });\n\n      rules.push(\n      {\n        pattern     : \"qqq\",\n        regex       : \"(\" + abbrevQuarterNames.join(\"|\") + \")\",\n        manipulator : abbrevQuarterManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"qqqq\",\n        regex       : \"(\" + fullQuarterNames.join(\"|\") + \")\",\n        manipulator : fullQuarterManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"M\",\n        regex       : \"(\\\\d\\\\d*?)\",\n        manipulator : monthManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"MM\",\n        regex       : \"(\\\\d\\\\d?)\",\n        manipulator : monthManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"MMM\",\n        regex       : \"(\" + dateNamesManipulator(\"MMM\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"MMM\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"MMMM\",\n        regex       : \"(\" + dateNamesManipulator(\"MMMM\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"MMMM\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"MMMMM\",\n        regex       : \"(\" + dateNamesManipulator(\"MMMMM\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"MMMMM\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"L\",\n        regex       : \"(\\\\d\\\\d*?)\",\n        manipulator : monthManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"LL\",\n        regex       : \"(\\\\d\\\\d?)\",\n        manipulator : monthManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"LLL\",\n        regex       : \"(\" + dateNamesManipulator(\"LLL\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"LLL\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"LLLL\",\n        regex       : \"(\" + dateNamesManipulator(\"LLLL\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"LLLL\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"LLLLL\",\n        regex       : \"(\" + dateNamesManipulator(\"LLLLL\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"LLLLL\").func\n      });\n\n      rules.push(\n      {\n        pattern : \"dd\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"day\"\n      });\n\n      rules.push(\n      {\n        pattern : \"d\",\n        regex   : \"(\\\\d\\\\d*?)\",\n        field   : \"day\"\n      });\n\n      rules.push(\n      {\n        pattern : \"D\",\n        regex   : \"(\\\\d?)\",\n        field   : \"dayOfYear\"\n      });\n\n      rules.push(\n      {\n        pattern : \"DD\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"dayOfYear\"\n      });\n\n      rules.push(\n      {\n        pattern : \"DDD\",\n        regex   : \"(\\\\d\\\\d\\\\d?)\",\n        field   : \"dayOfYear\"\n      });\n\n      rules.push(\n      {\n        pattern     : \"E\",\n        regex       : \"(\" + dateNamesManipulator(\"E\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"E\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"EE\",\n        regex       : \"(\" + dateNamesManipulator(\"EE\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"EE\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"EEE\",\n        regex       : \"(\" + dateNamesManipulator(\"EEE\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"EEE\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"EEEE\",\n        regex       : \"(\" + dateNamesManipulator(\"EEEE\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"EEEE\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"EEEEE\",\n        regex       : \"(\" + dateNamesManipulator(\"EEEEE\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"EEEEE\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"e\",\n        regex       : \"(\\\\d?)\",\n        manipulator : localWeekDayManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"ee\",\n        regex       : \"(\\\\d\\\\d?)\",\n        manipulator : localWeekDayManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"eee\",\n        regex       : \"(\" + dateNamesManipulator(\"eee\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"eee\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"eeee\",\n        regex       : \"(\" + dateNamesManipulator(\"eeee\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"eeee\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"eeeee\",\n        regex       : \"(\" + dateNamesManipulator(\"eeeee\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"eeeee\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"c\",\n        regex       : \"\\\\d?\",\n        manipulator : localWeekDayManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"ccc\",\n        regex       : \"(\" + dateNamesManipulator(\"ccc\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"ccc\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"cccc\",\n        regex       : \"(\" + dateNamesManipulator(\"cccc\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"cccc\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"ccccc\",\n        regex       : \"(\" + dateNamesManipulator(\"ccccc\").data.join(\"|\") + \")\",\n        manipulator : dateNamesManipulator(\"ccccc\").func\n      });\n\n      rules.push(\n      {\n        pattern     : \"a\",\n        regex       : \"(\" + amMarker + \"|\" + pmMarker + \")\",\n        manipulator : ampmManipulator\n      });\n\n      rules.push(\n      {\n        pattern : \"W\",\n        regex   : \"(\\\\d?)\",\n        field   : \"weekOfMonth\"\n      });\n\n      rules.push(\n      {\n        pattern : \"w\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"weekOfYear\"\n      });\n\n      rules.push(\n      {\n        pattern : \"ww\",\n        regex   : \"(\\\\d\\\\d)\",\n        field   : \"weekOfYear\"\n      });\n\n      rules.push(\n      {\n        pattern : \"HH\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"hour\"\n      });\n\n      rules.push(\n      {\n        pattern : \"H\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"hour\"\n      });\n\n      rules.push(\n      {\n        pattern     : \"kk\",\n        regex       : \"(\\\\d\\\\d?)\",\n        manipulator : noZeroHourManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"k\",\n        regex       : \"(\\\\d\\\\d?)\",\n        manipulator : noZeroHourManipulator\n      });\n\n      rules.push(\n      {\n        pattern : \"KK\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"hour\"\n      });\n\n      rules.push(\n      {\n        pattern : \"K\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"hour\"\n      });\n\n      rules.push(\n      {\n        pattern     : \"hh\",\n        regex       : \"(\\\\d\\\\d?)\",\n        manipulator : noZeroAmPmHourManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"h\",\n        regex       : \"(\\\\d\\\\d?)\",\n        manipulator : noZeroAmPmHourManipulator\n      });\n\n      rules.push(\n      {\n        pattern : \"mm\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"min\"\n      });\n\n      rules.push(\n      {\n        pattern : \"m\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"min\"\n      });\n\n      rules.push(\n      {\n        pattern : \"ss\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"sec\"\n      });\n\n      rules.push(\n      {\n        pattern : \"s\",\n        regex   : \"(\\\\d\\\\d?)\",\n        field   : \"sec\"\n      });\n\n      rules.push(\n      {\n        pattern : \"SSS\",\n        regex   : \"(\\\\d\\\\d?\\\\d?)\",\n        field   : \"ms\"\n      });\n\n      rules.push(\n      {\n        pattern : \"SS\",\n        regex   : \"(\\\\d\\\\d?\\\\d?)\",\n        field   : \"ms\"\n      });\n\n      rules.push(\n      {\n        pattern : \"S\",\n        regex   : \"(\\\\d\\\\d?\\\\d?)\",\n        field   : \"ms\"\n      });\n\n      rules.push(\n      {\n        pattern     : \"Z\",\n        regex       : \"([\\\\+\\\\-]\\\\d\\\\d\\\\d\\\\d)\",\n        manipulator : ignoreManipulator\n      });\n\n      rules.push(\n      {\n        pattern     : \"z\",\n        regex       : \"(GMT[\\\\+\\\\-]\\\\d\\\\d:\\\\d\\\\d)\",\n        manipulator : ignoreManipulator\n      });\n    }\n  }\n});\n"
  ]
}